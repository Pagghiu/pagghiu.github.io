<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#2a3140">
  <meta name="color-scheme" content="light dark">
  <link rel="canonical" href="">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@pagghiu_">
  <title>Sane Coding Blog</title>
  <meta name="description" content="Sane Coding Blog.">
  <link rel="shortcut icon" href="../../site/images/favicon.png">
  <link rel="icon" type="image/x-icon" href="../../site/images/favicon.png">
  <link rel="apple-touch-icon" href="site/images/favicon.png" type="image/png" sizes="180x180">
  <link rel="stylesheet" href="../../site/css/pico2/main.css">
  <link rel="stylesheet" href="../../site/css/pico2/docs.css">
  <link rel="stylesheet" href="../../site/css/pico2/custom.css">
</head>

<body style="min-height: 786px;"><a href="#content" class="skip-to-content contrast" role="button">Skip to content</a>
  <header class="is-fixed-above-lg is-fixed">
    <div class="container">
      <a aria-label="Sane Coding homepage" href="../../index.html">
        <img focusable="false" src="../../site/images/logo.png" style="display: block; width: 6rem" />
      </a>
      <nav class="container-fluid">
        <ul>
          <li class="hide-before-sm">Sane Coding Blog</li>
        </ul>
      </nav>
      <nav>
        <ul>
          <li><a class="secondary" href="../../site/projects/projects.html">Projects</a></li>
          <li><a class="secondary" href="../../site/blog/blog.html">Blog</a></li>
          <li><a class="secondary" href="../../site/pages/about.html">About</a></li>
          <li><a class="contrast theme-switcher" aria-label="Turn off dark mode" href=""><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 32 32" fill="currentColor"
                class="icon-theme-toggle">
                <clippath id="theme-toggle-cutout">
                  <path d="M0-11h25a1 1 0 0017 13v30H0Z"></path>
                </clippath>
                <g clip-path="url(#theme-toggle-cutout)">
                  <circle cx="16" cy="16" r="8.4"></circle>
                  <path
                    d="M18.3 3.2c0 1.3-1 2.3-2.3 2.3s-2.3-1-2.3-2.3S14.7.9 16 .9s2.3 1 2.3 2.3zm-4.6 25.6c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3-1 2.3-2.3 2.3-2.3-1-2.3-2.3zm15.1-10.5c-1.3 0-2.3-1-2.3-2.3s1-2.3 2.3-2.3 2.3 1 2.3 2.3-1 2.3-2.3 2.3zM3.2 13.7c1.3 0 2.3 1 2.3 2.3s-1 2.3-2.3 2.3S.9 17.3.9 16s1-2.3 2.3-2.3zm5.8-7C9 7.9 7.9 9 6.7 9S4.4 8 4.4 6.7s1-2.3 2.3-2.3S9 5.4 9 6.7zm16.3 21c-1.3 0-2.3-1-2.3-2.3s1-2.3 2.3-2.3 2.3 1 2.3 2.3-1 2.3-2.3 2.3zm2.4-21c0 1.3-1 2.3-2.3 2.3S23 7.9 23 6.7s1-2.3 2.3-2.3 2.4 1 2.4 2.3zM6.7 23C8 23 9 24 9 25.3s-1 2.3-2.3 2.3-2.3-1-2.3-2.3 1-2.3 2.3-2.3z">
                  </path>
                </g>
              </svg>
              <script src="../../site/js/commons.min.pico2.js"></script>
            </a></li>
        </ul>
        <ul class="icons">
          <li><a rel="noopener noreferrer" class="contrast" aria-label="GitHub repository"
              href="https://github.com/pagghiu/SaneCppLibraries" target="_blank"><svg xmlns="http://www.w3.org/2000/svg"
                height="24" width="24.25" viewBox="0 0 496 512" class="icon-github">
                <path
                  d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z">
                </path>
              </svg></a></li>
          <li><a rel="noopener noreferrer" class="contrast" aria-label="Twitter" href="https://twitter.com/pagghiu_"
              target="_blank"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512"
                class="icon-x">
                <path
                  d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z">
                </path>
              </svg></a></li>
          <li><a href="https://www.youtube.com/@Pagghiu" target="_blank" class="contrast"
              aria-label="Youtube Channel"><svg aria-hidden="true" focusable="false" role="img"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 180" height="16px">
                <path fill="red"
                  d="M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134" />
                <path fill="#FFF" d="m102.421 128.06l66.328-38.418l-66.328-38.418z" />
              </svg></a></li>
          <li><a href="https://discord.gg/tyBfFp33Z6" target="_blank" class="contrast" aria-label="Discord Chat"><svg
                aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                viewBox="0 -28.5 256 256" height="16px">
                <path
                  d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z"
                  fill="#5865F2" fill-rule="nonzero"> </path>
              </svg></a></li>
          <li><a href="https://mastodon.gamedev.place/@pagghiu" target="_blank" class="contrast"
              aria-label="Mastodon"><svg aria-hidden="true" focusable="false" role="img"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                style="enable-background:new 0 0 1668.56 1221.19;" height="16px">
                <path
                  d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z" />
              </svg></a></li>
        </ul>
      </nav>
    </div>
  </header>
  <main class="container has-table-of-contents page-index">
    <aside id="documentation-menu">
      <nav class="is-sticky-above-lg" style="--max-height: 674.75px;">
        <details open="">
          <summary>Projects</summary>
          <ul>
            <li><a class="secondary" href="../projects/SaneCppLibraries.html">Sane C++ Libraries</a></li>
          </ul>
        </details>
        <details open="">
          <summary aria-current="true">Blog</summary>
          <ul>
            <li><a class="secondary" href="../blog/2024-03-27-SaneCppLibrariesUpdate.html">☔️ Sane C++ March 24 <mark>New</mark></a></li>
            <li><a class="secondary" href="../blog/2024-02-23-SaneCppLibrariesUpdate.html">🎠 Sane C++ February 24</a></li>
            <li><a class="secondary" href="../blog/2024-01-23-SaneCppLibrariesUpdate.html">❄️ Sane C++ January 24</a></li>
            <li><a class="secondary" href="../blog/2023-12-23-SaneCppLibrariesRelease.html" aria-current="page">🎉 Sane C++ Release!</a></li>
          </ul>
        </details>
      </nav>
    </aside>
    <hgroup>
      <p class="chapter">December 23, 2023</p>
      <h1>🎉 Sane C++ Libraries<a href="#section-0" id="section-0" class="secondary" tabindex="-1">#</a></h1>
      <figure>
        <img src="2023-12-23-SaneCppLibrariesRelease/article.svg" alt="SC" />
      </figure>
      <p>
        📄 <a href="../../SaneCppLibraries/index.html" target="_blank">Sane C++ Libraries Documentation</a><br>
        💻 <a href="https://github.com/pagghiu/SaneCppLibraries" target="_blank">Sane C++ Libraries
          Repository <img src="https://img.shields.io/github/stars/Pagghiu/SaneCppLibraries"></a> <br>
        📹 <a href="https://www.youtube.com/@Pagghiu" target="_blank">Sane Coding Youtube channel</a> <img
          src="https://img.shields.io/youtube/channel/subscribers/UCnmN_whfM12LU6VNQWG0NFg"> <br>
        💬 <a href="https://discord.gg/tyBfFp33Z6" target="_blank">Sane Coding Discord</a> <a
          href="https://discord.gg/tyBfFp33Z6"><img src="https://img.shields.io/discord/1195076118307426384"></a>
      </p>
    </hgroup>
    <aside id="table-of-contents">
      <nav class="is-sticky-above-lg ">
        <details open="">
          <summary>Content</summary>
          <ul>
            <li><a class="secondary" href="#section-0">Sane C++ Release</a></li>
            <li><a class="secondary" href="#section-1">Where do we start from?</a></li>
            <li><a class="secondary" href="#section-2">Other languages and libraries</a></li>
            <li><a class="secondary" href="#section-3">The holy <i>hidden subset</i> of C++</a></li>
            <li><a class="secondary" href="#section-4">Defining the scope</a></li>
            <li><a class="secondary" href="#section-5">Some rules</a></li>
            <li><a class="secondary" href="#section-6">Dependencies</a></li>
            <li><a class="secondary" href="#section-7">Maturity</a></li>
            <li><a class="secondary" href="#section-8">Platforms</a></li>
            <li><a class="secondary" href="#section-9">Licensing</a></li>
            <li><a class="secondary" href="#section-10">Conclusions</a></li>
          </ul>
        </details>
      </nav>
    </aside>
    <div id="content" role="document">
      <section>
        <article>
          <h2>Where do we even start?<a href="#section-1" id="section-1" class="secondary" tabindex="-1">#</a></h2>
          <p>
            So...where do I even start? <br>
            This is probably just an articulation of my multi-decade old opinion on
            <code>How should C++ be written</code>&trade; that nobody has ever asked for 🤭.<br>
            <iframe width="560" height="315"
              src="https://www.youtube-nocookie.com/embed/5w1_rRXgyv0?si=vyQhUZ_vU5Rtn0pi" title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>

          <h3>Modern C++ and Standard C++ Library</h3>
          I find Modern C++ style problematic 😩, causing large increases in compile time and binary
          size, frequent confusion caused to code completion engines, and micro-heap-allocations habits engraved in
          a mountain of hard-to-understand code.<br>
          Many of these (and other) problems are not easily avoidable when using the <i>Standard C++ Library</i>,
          making it too easy descending into an endless hole of growing complexity.<br>

          <h3>Handmade C</h3>
          On the other side of the spectrum I observe so many <i>proudly handmade</i> developers sticking to C or
          coming up with new languages sharing similar minimalistic spirit.<br>
          I'm definitively more spiritually affine to readable and well written C 🧘🏻‍♂️, rather than Modern C++.<br>
          I often feel however that such libraries are rare (<code>sqlite</code>, <code>sokol</code>,
          <code>stb</code>, <code>raylib</code> etc.) and it takes a lot of discipline and experience to stick
          successfully to such clean and coherent style.<br>
          </p>

          <h2>Other languages and libraries<a href="#section-2" id="section-2" class="secondary" tabindex="-1">#</a></h2>
          <p>
            Many programming languages come with a standard library designed to solve common user needs.<br>
            That's not the case for C++ though, where any non trivial project will have to integrate
            <i>third party libraries</i> to do anything significant.<br>
            Integrating such libraries morphs C++ projects into a patchwork of incoherent programming styles,
            as direct derivation of the subset of language features chosen by the authors.<br>
            Sometimes these incoherences become actual bad practices producing hard to read and maintain code, bugs,
            instabilities, inefficiencies and security issues.<br>
          </p>

          <h2>The holy <i>hidden subset</i> of C++<a href="#section-3" id="section-3" class="secondary" tabindex="-1">#</a></h2>
          <p>
            This project is a journey of defining and discovering a C++ subset that makes writing code with it enjoyable
            😌.
            Libraries should be working harmonically with each other while still making it possible to use them in
            isolation or with minimum inter-dependencies.<br>
            This holy hidden C++ subset should encourage writing readable programs that are efficient and fast to
            compile while still being easy to develop / debug / deploy and reasonably safe on multiple platforms.<br>
            The edit / recompile cycle should ideally be closer to the ones of <i>highly productive</i> languages
            like Python and Javascript than the average C++ project / library.
          </p>

          <h2>Defining the scope<a href="#section-4" id="section-4" class="secondary" tabindex="-1">#</a></h2>
          <p>
            So what is the initial scope of the library?
          <h3>Basic building blocks</h3>
          The very first basic building blocks are a good API for: async IO / networking, file system and process
          handling, serialization, text (with utf support), json and http.
          <h3>Data structures and algorithms</h3>
          Data structures and algorithms are for now secondary, but the library comes with a solid
          <code>Vector T</code> implementation with support for custom inline storage
          <code>SmallVector T, N</code>.
          Proper arena allocation / release strategies will be explored too.
          <h3>User Interfaces</h3>
          User interfaces abstraction are excluded (for now).<br>
          Once most of the libraries will be in <i>MVP</i> or <i>Stable</i> the topic will be revisited.
          <h3>Integrations</h3>
          It's very important showing how to integrate libraries inside such system specific GUI libraries /
          toolkits.<br>
          For example it could be not obvious how to properly integrate the Async IO event loop inside a GUI event
          loop. Providing ready-made examples for such setups is going to be very useful to many users of the libraries.
          <h3>Self-hosted build system</h3>
          An optional to use build system, where build files are written in imperative C++ code (compiled on the fly) is
          being worked on. The build system links the rest of library compiled as a single unity build.
          </p>

          <h2>Some rules<a href="#section-5" id="section-5" class="secondary" tabindex="-1">#</a></h2>
          <p>
            Some rules used in the project:
          <ul>
            <li>Libraries will not use C++ standard library at all.</li>
            <li>Libraries will not need a build system to be integrated in existing projects.</li>
            <li>Libraries will not increase build time when integrated into existing projects.</li>
            <li>Libraries will compile free of warnings on all major C++ compilers (Clang, GCC, MSVC).</li>
            <li>Libraries will try to avoid heap allocation and make efforts to let caller handle such memory.</li>
            <li>Libraries will have proper tests and documentation.</li>
            <li>Libraries will focus on common use cases rather than trying to cover every possible use case.</li>
          </ul>
          </p>

          <h2>Dependencies<a href="#section-6" id="section-6" class="secondary" tabindex="-1">#</a></h2>
          <p>
            General advice is to avoid using 3rd party libraries as much as possible.<br>
            <br>
            There are some cases where it's simply unreasonable not using any third party library.<br>
            Windows and macOS native APIs are being leveraged to avoid needing libraries (a good example is the
            <code>Hashing</code> library).<br>
            On Linux however some of these API are not part of the kernel, are typically part of user-space
            libraries. Such libraries will need to be installed with <code>apt-get</code> or delivered by wrapping some
            3rd party dependency.<br><br>

            In any case if 3rd party libraries will be used, they will be made optional and properly wrapped in
            a way that they will be an hidden implementation detail.<br>
            Building the library will still not require a build system and it will still be fast to compile.<br>
            No derogation will be made to these principles.
          </p>

          <h2>Maturity<a href="#section-7" id="section-7" class="secondary" tabindex="-1">#</a></h2>
          <p>
            The project is being open-sourced in its very early stages.<br>
            Libraries have different level of maturity, stated in the documentations with a brief roadmap.<br>
            As of today, when this post is written, they're mostly in <i>Draft</i> or <i>MVP</i> state.<br>
            No guarantee is being done for API stability too for now.
          </p>

          <h2>Platforms<a href="#section-8" id="section-8" class="secondary" tabindex="-1">#</a></h2>
          <p>
            Initially, the only supported platforms are macOS and Windows.<br>
            A partial port to Emscripten / WebAssembly is also being worked on.<br>
            Linux support is one explicit bullet point in the roadmap of all libraries that use OS specific API.<br>
            Compatibility on iOS will be explored too.<br>
          </p>

          <h2>Licensing<a href="#section-9" id="section-9" class="secondary" tabindex="-1">#</a></h2>
          <p>
            The project is MIT licensed, so it should make things easy for any potential adopter.
          </p>

          <h2>Conclusions<a href="#section-10" id="section-10" class="secondary" tabindex="-1">#</a></h2>
          <p>
            It'll be fun! 😎
          </p>
        </article>

      </section>
    </div>
  </main>
  <footer>
    <div class="container">
      <section>
        <nav class="links">
          <ul>
            <li><strong>Projects</strong></li>
            <li><a aria-current="page" class="secondary" href="../projects/SaneCppLibraries.html">Sane C++
                Libraries</a></li>
          </ul>
          <ul>
            <li><strong>Blog</strong></li>
            <li><a rel="noopener noreferrer" class="secondary" href="../blog/blog.html">Posts by date</a></li>
          </ul>
          <ul>
            <li><strong>About</strong></li>
            <li><a class="secondary" href="../pages/about.html">About this blog</a></li>
          </ul>
        </nav>
        <p class="build-info">&copy; 2023-2024<!-- --> <a rel="noopener noreferrer" class="secondary" href="about.html"
            target="_blank">Stefano Cristiano</a>.</p>
      </section>
    </div>
  </footer>
</body>

</html>