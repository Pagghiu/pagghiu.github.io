<!DOCTYPE html>
<html lang="en">
  <head>
      <title>Sane Coding Blog - üå´Ô∏è Sane C++ December 25</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="shortcut icon" href="https://pagghiu.github.io/images/favicon.png">
      <link rel="icon" type="image/x-icon" href="https://pagghiu.github.io/images/favicon.png">
      <link rel="apple-touch-icon" href="https://pagghiu.github.io/images/favicon.png" type="image/png" sizes="180x180">    
        <meta name="description" content="Sane Coding Blog" />
        <link rel="stylesheet" type="text/css" href="https://pagghiu.github.io/theme/css/pico2/all.css" />
        <link href="https://pagghiu.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Sane Coding Blog Full Atom Feed" />
        <link href="https://pagghiu.github.io/feeds/sanecpplibraries.atom.xml" type="application/atom+xml" rel="alternate" title="Sane Coding Blog Categories Atom Feed" />





  </head>

  <body style="min-height: 786px;">
    <header class="is-fixed-above-lg is-fixed">
      <div class="container">
        <a aria-label="Sane Coding homepage" href="https://pagghiu.github.io/">
          <img focusable="false" src="https://pagghiu.github.io/images/logo.png" style="display: block; width: 6rem" />
        </a>
        <nav class="container-fluid">
          <ul>
            <li class="hide-before-sm">Sane Coding Blog</li>
          </ul>
        </nav>
        <nav>
          <ul>
            <li><a class="secondary" href="https://pagghiu.github.io/site/projects/projects.html">Projects</a></li>
            <li><a class="secondary" href="https://pagghiu.github.io/site/blog/blog.html">Blog</a></li>
            <li><a class="secondary" href="https://pagghiu.github.io/site/pages/about.html">About</a></li>
            <li><a class="contrast theme-switcher" aria-label="Turn off dark mode" href=""><svg
                  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 32 32" fill="currentColor"
                  class="icon-theme-toggle">
                  <clippath id="theme-toggle-cutout">
                    <path d="M0-11h25a1 1 0 0017 13v30H0Z"></path>
                  </clippath>
                  <g clip-path="url(#theme-toggle-cutout)">
                    <circle cx="16" cy="16" r="8.4"></circle>
                    <path
                      d="M18.3 3.2c0 1.3-1 2.3-2.3 2.3s-2.3-1-2.3-2.3S14.7.9 16 .9s2.3 1 2.3 2.3zm-4.6 25.6c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3-1 2.3-2.3 2.3-2.3-1-2.3-2.3zm15.1-10.5c-1.3 0-2.3-1-2.3-2.3s1-2.3 2.3-2.3 2.3 1 2.3 2.3-1 2.3-2.3 2.3zM3.2 13.7c1.3 0 2.3 1 2.3 2.3s-1 2.3-2.3 2.3S.9 17.3.9 16s1-2.3 2.3-2.3zm5.8-7C9 7.9 7.9 9 6.7 9S4.4 8 4.4 6.7s1-2.3 2.3-2.3S9 5.4 9 6.7zm16.3 21c-1.3 0-2.3-1-2.3-2.3s1-2.3 2.3-2.3 2.3 1 2.3 2.3-1 2.3-2.3 2.3zm2.4-21c0 1.3-1 2.3-2.3 2.3S23 7.9 23 6.7s1-2.3 2.3-2.3 2.4 1 2.4 2.3zM6.7 23C8 23 9 24 9 25.3s-1 2.3-2.3 2.3-2.3-1-2.3-2.3 1-2.3 2.3-2.3z">
                    </path>
                  </g>
                </svg>
                <script src="https://pagghiu.github.io/theme/js/commons.min.pico2.js"></script>
              </a></li>
          </ul>
          <ul class="icons">
            <li><a rel="noopener noreferrer" class="contrast" aria-label="GitHub repository"
                href="https://github.com/pagghiu/SaneCppLibraries" target="_blank"><svg xmlns="http://www.w3.org/2000/svg"
                  height="24" width="24.25" viewBox="0 0 496 512" class="icon-github">
                  <path
                    d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z">
                  </path>
                </svg></a></li>
            <li><a href="https://bsky.app/profile/pagghiu.bsky.social" target="_blank" class="contrast" aria-label="Bluesky"><svg
                  aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 612 612" width="16px" height="16px">
                    <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe"/>
                   </svg>
              </a></li>
            <li><a rel="noopener noreferrer" class="contrast" aria-label="Twitter" href="https://twitter.com/pagghiu_"
                target="_blank"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512"
                  class="icon-x">
                  <path
                    d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z">
                  </path>
                </svg></a></li>
            <li><a href="https://www.youtube.com/@Pagghiu" target="_blank" class="contrast"
                aria-label="Youtube Channel"><svg aria-hidden="true" focusable="false" role="img"
                  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 180" height="16px">
                  <path fill="red"
                    d="M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134" />
                  <path fill="#FFF" d="m102.421 128.06l66.328-38.418l-66.328-38.418z" />
                </svg></a></li>
                <li><a href="https://discord.gg/tyBfFp33Z6" target="_blank" class="contrast" aria-label="Discord Chat"><svg
                  aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 -28.5 256 256" height="16px">
                  <path
                    d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z"
                    fill="#5865F2" fill-rule="nonzero"> </path>
                </svg></a></li>                 
            <li><a href="https://mastodon.gamedev.place/@pagghiu" target="_blank" class="contrast"
                aria-label="Mastodon"><svg aria-hidden="true" focusable="false" role="img"
                  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                  style="enable-background:new 0 0 1668.56 1221.19;" height="16px">
                  <path
                    d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z" />
                </svg></a></li>
          </ul>
        </nav>
      </div>
    </header>
    <main class="container has-table-of-contents">
<aside id="documentation-menu">
    <nav class="is-sticky-above-lg" style="--max-height: 674.75px;">
        <details open="">
            <summary>Projects</summary>
            <ul>
                <li><a class="secondary" href="https://pagghiu.github.io/site/projects/SaneCppLibraries.html"
                        title="Permalink to Sane C++ Libraries">Sane C++ Libraries
                    </a></li>
            </ul>
        </details>
        <details open="">
            <summary>Blog</summary>
            <ul>
                <!--- articles_page.object_list --->
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2026-02-28-SaneCppLibrariesUpdate.html" title="Permalink to üîå Sane C++ February 26">
                    üîå Sane C++ February 26
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2026-01-31-SaneCppLibrariesUpdate.html" title="Permalink to ‚ùÑÔ∏è Sane C++ January 26">
                    ‚ùÑÔ∏è Sane C++ January 26
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" aria-current="page" href="" title="Permalink to üå´Ô∏è Sane C++ December 25">
                    üå´Ô∏è Sane C++ December 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year.html" title="Permalink to 2Ô∏è‚É£ Years of Sane C++ Libraries">
                    2Ô∏è‚É£ Years of Sane C++ Libraries
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-11-30-SaneCppLibrariesUpdate.html" title="Permalink to üå´Ô∏è Sane C++ November 25">
                    üå´Ô∏è Sane C++ November 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-10-31-SaneCppLibrariesUpdate.html" title="Permalink to üåßÔ∏è Sane C++ October 25">
                    üåßÔ∏è Sane C++ October 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-09-30-SaneCppLibrariesUpdate.html" title="Permalink to üçÇ Sane C++ September 25">
                    üçÇ Sane C++ September 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-08-31-SaneCppLibrariesUpdate.html" title="Permalink to üåä Sane C++ August 25">
                    üåä Sane C++ August 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-07-31-SaneCppLibrariesUpdate.html" title="Permalink to üèñÔ∏è Sane C++ July 25">
                    üèñÔ∏è Sane C++ July 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-06-30-SaneCppLibrariesUpdate.html" title="Permalink to ‚òÄÔ∏è Sane C++ June 25">
                    ‚òÄÔ∏è Sane C++ June 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-05-31-SaneCppLibrariesUpdate.html" title="Permalink to üå∏ Sane C++ May 25">
                    üå∏ Sane C++ May 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-04-30-SaneCppLibrariesUpdate.html" title="Permalink to üí§ Sane C++ April 25">
                    üí§ Sane C++ April 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-03-31-SaneCppLibrariesUpdate.html" title="Permalink to ‚òîÔ∏è Sane C++ March 25">
                    ‚òîÔ∏è Sane C++ March 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-02-28-SaneCppLibrariesUpdate.html" title="Permalink to üé† Sane C++ February 25">
                    üé† Sane C++ February 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2025-01-31-SaneCppLibrariesUpdate.html" title="Permalink to ‚ùÑÔ∏è Sane C++ January 25">
                    ‚ùÑÔ∏è Sane C++ January 25
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-12-31-SaneCppLibrariesUpdate.html" title="Permalink to ‚òÉÔ∏è Sane C++ December 24">
                    ‚òÉÔ∏è Sane C++ December 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-12-23-SaneCpp1Year.html" title="Permalink to 1Ô∏è‚É£ Year of Sane C++">
                    1Ô∏è‚É£ Year of Sane C++
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-11-30-SaneCppLibrariesUpdate.html" title="Permalink to üå´Ô∏è Sane C++ November 24">
                    üå´Ô∏è Sane C++ November 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-08-30-SaneCppLibrariesUpdate.html" title="Permalink to üåä Sane C++ August 24">
                    üåä Sane C++ August 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-07-31-SaneCppLibrariesUpdate.html" title="Permalink to üèñÔ∏è Sane C++ July 24">
                    üèñÔ∏è Sane C++ July 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-06-30-SaneCppLibrariesUpdate.html" title="Permalink to ‚òÄÔ∏è Sane C++ June 24">
                    ‚òÄÔ∏è Sane C++ June 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-05-31-SaneCppLibrariesUpdate.html" title="Permalink to üå∏ Sane C++ May 24">
                    üå∏ Sane C++ May 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-04-27-SaneCppLibrariesUpdate.html" title="Permalink to üí§ Sane C++ April 24">
                    üí§ Sane C++ April 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-03-27-SaneCppLibrariesUpdate.html" title="Permalink to ‚òîÔ∏è Sane C++ March 24">
                    ‚òîÔ∏è Sane C++ March 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-02-23-SaneCppLibrariesUpdate.html" title="Permalink to üé† Sane C++ February 24">
                    üé† Sane C++ February 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2024-01-23-SaneCppLibrariesUpdate.html" title="Permalink to ‚ùÑÔ∏è Sane C++ January 24">
                    ‚ùÑÔ∏è Sane C++ January 24
                    <br>
                </a>
            </li>
                <li>
                    <a class="secondary" href="https://pagghiu.github.io/site/blog/2023-12-23-SaneCppLibrariesRelease.html" title="Permalink to üéâ Sane C++ Libraries">
                    üéâ Sane C++ Libraries
                    <br>
                </a>
            </li>
            </ul>
        </details>
    </nav>
</aside>
  <hgroup>
    <p class="chapter">Wed 31 December 2025</p>
    <h1 id="section-0">üå´Ô∏è Sane C++ December 25</h1>
    
    <figure>
      <img src="https://pagghiu.github.io/images/2025-12-31-SaneCppLibrariesUpdate/article.png" alt="SC" />
    </figure>
    <p>
      <p>Welcome to the December 2025 update!<br> This month the <code>Http</code> library is finally losing its dependency on <code>Memory</code> and gets a lot of reliability fixes!</p>
    </p>
  </hgroup>
  <aside id="table-of-contents">
    <nav class="is-sticky-above-lg ">
      <details open="">
        <summary>Content</summary>
        <div class="col-lg-3 hidden-xs hidden-sm">
          <ul>
            <li><a class="secondary" href="#section-0">December Updates</a></li>
            <li><a class="secondary" href="#dependencies">Dependencies</a></li>
            <li><a class="secondary" href="#http">Http</a></li>
            <li><a class="secondary" href="#asyncstreams">AsyncStreams</a></li>
            <li><a class="secondary" href="#async">Async</a></li>
            <li><a class="secondary" href="#others">Others</a></li>
          </ul>
        </div>
      </details>
    </nav>
  </aside>
  <div id="content" role="document">
    <h1 id="dependencies">Dependencies</h1>
<p>The bulk of work for this month has been getting rid of the <code>Memory</code> dependency from the <code>Http</code> library.</p>
<p>This is incredibly important, because allocation is only done by the <code>Memory</code> library!</p>
<p>This means that excluding <code>Containers</code> and the support <code>ContainersReflection</code> all libraries make <em>No allocation</em> whatsoever.
All of them can work inside fixed buffers or inside dynamically allocated memory allocated by the user that has knowledge of the entire application context.</p>
<p>Plus, it finally makes the internal dependencies graph between all libraries look super cool:</p>
<p><a href="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year-Dependencies.svg" target="_blank">
<img src="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year-Dependencies.svg">
</a></p>
<h1 id="http">Http</h1>
<p>Going back to the actual improvements to Http, I am not sure where to start.
Multiple iterations of the API have been done and it's probably not over yet...</p>
<p>The API at the beginning of the month was something like this, with allocating <code>Buffers</code> usage and raw allocations everywhere (so ugly!):</p>
<p><a href="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerStart.jpg" target="_blank">
<img src="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerStart.jpg">
</a></p>
<p>The point has been making sure that a connection should be able to live within a block of memory that is fixed during its initialization.</p>
<p>This is because most of the time, reasonable defaults and safety limits must be set anyway to control how many Kb of headers can be accepted or how many Kb can be dedicated to streaming large files.</p>
<p>One example on initializing the web server with compile time fixed buffers is the following:</p>
<p><a href="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerFixed.jpg" target="_blank">
<img src="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerFixed.jpg">
</a></p>
<p>As <code>AsyncStreams</code> have been fully integrated, it's now possible to send even very large file using some tiny fixed buffers.
If they're too tiny, the transfer is going to become very slow, as a lot of syscall will be needed to fully transmit the file, so it's always as good idea sizing the buffers accordingly.</p>
<p>If one wants to decide the size of these buffers at runtime, the API will become slightly more verbose but I would say it's not so bad:</p>
<p><a href="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerRuntime.jpg" target="_blank">
<img src="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerRuntime.jpg">
</a></p>
<p>The example shows how to assign memory from <em>Structure Of Arrays</em> style arrangement for these buffers, all equally sized.
This is using an helper class called <code>StableArray</code> that uses <code>VirtualMemory</code> to reserve space for extremely large buffers and just commits to physical RAM the actually used quantity.
The <code>WebServerExample</code> in <code>SCExample</code> also shows how to resize such buffers at runtime, while the web-server is running!</p>
<p><a href="https://pagghiu.github.io/site/blog/2025-12-SCExample.jpg" target="_blank">
<img src="https://pagghiu.github.io/site/blog/2025-12-SCExample.jpg">
</a></p>
<p>It's also possible to just give each connection a buffers of different sizes, making the memory management slightly more complicated.</p>
<p>The library is still in <code>üü• Draft</code> state, and it will likely stay like that for the next months. </p>
<p>I can still see some random lost connections in browser tools from Safari / Firefox / Chrome when trying to visit some test website.</p>
<p>Also the performance / latency looks quite bad for now, but it doesn't make sense to start working on performance before becoming compliant with the spec to some acceptable level!</p>
<p><a href="https://pagghiu.github.io/site/blog/2025-12-HttpError.jpg" target="_blank">
<img src="https://pagghiu.github.io/site/blog/2025-12-HttpError.jpg">
</a></p>
<p><strong>Detailed list of commits:</strong></p>
<ul>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2802e629">Http: Add helper to configure connection buffers and queues at runtime</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d2971b78">Http: Allow declaring fixed size queues side by side with HttpConnection</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a4b7c3c3">Http: Allow resizing server connections array</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae44d2ab">Http: Allow user to setup header memory for each connection</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/15bb382b">Http: Improve Documentation</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/39ebbc23">Http: Let caller supply the streams for async file server stream</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7e5d3e53">Http: Make buffers pool and pipeline per connection</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0ce599d7">Http: Make HttpAsyncServer and HttpAsyncFileServer API more symmetric</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c5eac859">Http: Make ThreadPool mandatory to initialize HttpAsyncFileServer</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f2e70243">Http: Move pipeline from file stream to connection object</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f8506b71">Http: Move slice buffers helper to AsyncStreams</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f107b2b3">Http: Parse response in HttpClient to read Content-Length</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f39ee2cf">Http: Remove dependency on Memory (drop HttpClient)</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/802e72ef">Http: Rename HttpServer to HttpConnectionsPool</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/af100a97">Http: Rename HttpWebServer to HttpAsyncFileServer</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b306d315">Http: Use AsyncStreams in HttpResponse</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/52c160ba">Http: Use AsyncStreams in HttpWebServer</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/31395aae">Http: Write response headers to the headers buffer</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bd657cf0">SCExample: Allow changing buffers sizes at runtime in WebServer Example</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3ed1d515">SCExample: Use virtual memory for all web server buffers</a></li>
</ul>
<h1 id="asyncstreams">AsyncStreams</h1>
<p>A few changes in <code>AsyncStreams</code> have been made, as consequences of <code>Http</code> improvements.</p>
<p>Writable streams can now be destroyed and pipelines are automatically un-piped after all sinks have finished writing their data.</p>
<p>A few fixes also have been applied, like copying listeners during emit event (to allow changing listeners when inside an handler), emptying the read queue on destroy and resetting the request state on init.</p>
<p>Methods to set queues and buffers for the pool have been separated from initialization, so that they can be set during construction / setup and re-used across multiple successive initializations.</p>
<p><strong>Detailed list of commits:</strong></p>
<ul>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/99b30825">AsyncStreams: Add destroy method for writable stream</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/371edff4">AsyncStreams: Add explicit method to set buffers in the pool</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fed7c057">AsyncStreams: Add method to explicitly set read and write queues</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7d7db8c1">AsyncStreams: Automatically un-pipe pipelines after all sinks have finished</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ab7efb92">AsyncStreams: Copy listeners during Event emit</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3d0e8b82">AsyncStreams: Empty the readQueue when destroying</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/94ad89f0">AsyncStreams: Explicitly mark buffers to be re-used when their refCount goes to zero</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/71cd7291">AsyncStreams: Reset requests state on stream initialization</a></li>
</ul>
<h1 id="async">Async</h1>
<p>The extensive testing and improvements of <code>Http</code> library has exposed some issues in <code>Async</code>.</p>
<p>A quite nasty bug in the gather writes has been fixed in Posix, affecting partial writes, that has never been surfacing in the unit tests.</p>
<p>Also it made sense to ignore reporting errors when cancellations fail to submit on windows.
This happens when trying to cancel an async operation that has already finished but for which the overlapped status has not been retrieved yet.</p>
<p><strong>Detailed list of commits:</strong></p>
<ul>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b5bbc57d">Async: Add method to check if event loop backend needs thread-pool</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/eb49c425">Async: Do not report errors when cancellations fail to submit</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4dcedcfa">Async: Fix incomplete gather writes on Posix</a></li>
</ul>
<h1 id="others">Others</h1>
<p>The usual mix of fixes this month includes a debug visualizer for <code>Span&lt;T&gt;</code> and properly support exporting types across dynamic libraries (by adding <code>SC_COMPILER_EXPORT</code> in all relevant places).</p>
<p>During a bad search and replace done a few months ago, <code>Result</code> lost its <code>[[nodiscard]]</code> status, that has been fixed.</p>
<p><code>GrowableBuffer</code> has now a <code>Span&lt;char&gt;</code> specialization, to allow using things like <code>StringFormat</code> / <code>StringBuilder</code> with raw char arrays.</p>
<p><code>VirtualMemory</code> class has been cleaned up and improved, with its destructor properly releasing allocated memory.</p>
<p>A bug in <code>Process</code> was reading incomplete output from child processes terminating very quickly.</p>
<p><strong>Detailed list of commits:</strong></p>
<ul>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/aed874a7">DebugVisualizer: Add debug visualizers for Span<T></a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7b368e33">Everywhere: Add SC_COMPILER_EXPORT clause to many types</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/43df70bc">File: Add method to read into a fixed buffer until it's full or EOF happens</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a107d6e3">Foundation: Add GrowableBuffer<Span\<char>> specialization</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a9806d78">Foundation: Mark Result as a [[nodiscard]] type again</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4a3f5cbb">Memory: Make VirtualMemory fields private and add destructor</a></li>
<li><a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1f393c01">Process: Read entire process output until in user supplied writable span</a></li>
</ul>
<p>See you next month!</p>
  </div>

    </main>
    <footer>
      <div class=" container">
            <section>
              <nav class="links">
                <ul>
                  <li><strong>Projects</strong></li>

                    <li><a  aria-current="page" class="secondary" href="https://pagghiu.github.io/pages/sane-c-libraries.html"
                        title="Permalink to Sane C++ Libraries">Sane C++ Libraries
                    </a></li>

                    </ul>
                <ul>
                  <li><strong>Blog</strong></li>
                  <li><a class="secondary" href="https://pagghiu.github.io/site/blog/blog.html">All Posts</a></li>
                </ul>
                <ul>
                  <li><strong>About</strong></li>
                  <li><a class="secondary" href="https://pagghiu.github.io/site/pages/about.html">About this blog</a></li>
                </ul>
              </nav>
              <p class="build-info">&copy; 2023-2024<!-- --> <a rel="noopener noreferrer" class="secondary"
                  href="https://pagghiu.github.io/site/pages/about.html" target="_blank">Stefano Cristiano</a>.</p>
            </section>
      </div>
      </footer>
  </body>
</html>