<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Sane Coding Blog</title><link href="https://pagghiu.github.io/" rel="alternate"></link><link href="https://pagghiu.github.io/feeds/all.atom.xml" rel="self"></link><id>https://pagghiu.github.io/</id><updated>2026-02-28T00:00:00+01:00</updated><subtitle>Sane Coding Blog</subtitle><entry><title>üîå Sane C++ February 26</title><link href="https://pagghiu.github.io/site/blog/2026-02-28-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2026-02-28T00:00:00+01:00</published><updated>2026-02-28T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2026-02-28:/site/blog/2026-02-28-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the February 2026 update!&lt;br&gt; This month introduces &lt;code&gt;SerialPort&lt;/code&gt;, named-pipe end-to-end support, and major async backend wakeup/process handling improvements.&lt;/p&gt;</summary><content type="html">&lt;h1 id="serialport-and-named-pipes"&gt;SerialPort and Named Pipes&lt;/h1&gt;
&lt;p&gt;February has been all about connecting low-level I/O pieces end to end.
A new cross-platform &lt;code&gt;SerialPort&lt;/code&gt; library landed with dedicated tests (including &lt;code&gt;com0com&lt;/code&gt; coverage), while named-pipe support now spans &lt;code&gt;File&lt;/code&gt;, &lt;code&gt;Async&lt;/code&gt;, and &lt;code&gt;AsyncStreams&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The result is that local IPC and serial communication can now be handled with the same async building blocks used by the rest of the project, with better test coverage across platform-specific behavior.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/92eb611d"&gt;SerialPort: Add cross-platform library to handle serial ports&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8fad4618"&gt;SerialPort: Add com0com test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4dfcfe5a"&gt;File: Add named pipe server/client API and coverage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/63f0c521"&gt;Async: Add named pipe input/output tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fbb96637"&gt;AsyncStreams: Add PipeDescriptor stream init and named pipe tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2d8b635c"&gt;Async: Add async serial port tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d7cb0b31"&gt;File: Use pipe2 to set CLOEXEC atomically for new pipes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async-runtime"&gt;Async Runtime&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;Async&lt;/code&gt; received several runtime reliability upgrades this month.
The new &lt;code&gt;AsyncFileSend&lt;/code&gt; primitive is now part of the core, and multiple fixes improved cancellation safety and timer sequencing.&lt;/p&gt;
&lt;p&gt;Backend wakeup/process handling was also strengthened with platform-native primitives (&lt;code&gt;eventfd&lt;/code&gt;, &lt;code&gt;EVFILT_USER&lt;/code&gt;, &lt;code&gt;pidfd&lt;/code&gt;) so event loops can coordinate shared wakeups and process exits more predictably, especially on Linux.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a5ce1e83"&gt;Async: Add AsyncFileSend primitive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/353b61d2"&gt;Async: Only reset Flag_NeedsTeardown if async is accessible&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/288b6787"&gt;Async: Keep sequenced LoopTimeouts in active timer list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a10314c0"&gt;Async: Keep completion-state invariant during IOCP cancellation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/63d87e83"&gt;Async: Use eventfd on epoll and EVFILT_USER on kqueue for shared wakeups&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae27e400"&gt;Async: Use pidfd for Linux epoll process exit handling&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="http-and-asyncwebserver"&gt;Http and AsyncWebServer&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;Http&lt;/code&gt; now uses &lt;code&gt;AsyncFileSend&lt;/code&gt; for file server transfers, and header accumulation got a small optimization.
At the same time, &lt;code&gt;AsyncWebServer&lt;/code&gt; and examples gained more runtime knobs: selecting ports, forcing epoll backend options, and configuring max clients / I/O threads.&lt;/p&gt;
&lt;p&gt;These changes make it easier to benchmark and stress the server in real scenarios, while keeping setup fully self-hosted.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3ab90246"&gt;Http: Use AsyncFileSend in file server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2e3b6409"&gt;Http: Header accumulation minor optimization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f7ef1a24"&gt;AsyncWebServer: Expose max clients and io threads as CLI parameters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2b8fe4d8"&gt;Examples: Add options to force using epoll backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/32fbcbca"&gt;Examples: Add port argument to AsyncWebServer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="testing-and-build"&gt;Testing and Build&lt;/h1&gt;
&lt;p&gt;A good portion of the work focused on making test runs more parallel-friendly and less conflicting.
&lt;code&gt;BuildTest&lt;/code&gt; and &lt;code&gt;PluginTest&lt;/code&gt; fixtures are now isolated better, while SCTest supports configurable port offsets and opt-in &lt;code&gt;BuildTest&lt;/code&gt; execution for local workflows.&lt;/p&gt;
&lt;p&gt;This should reduce flakiness when multiple configurations or runs happen at the same time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a3a0bac4"&gt;Build: Isolate BuildTest outputs for parallel SCTest runs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9759bc32"&gt;Testing: Make BuildTest opt-in locally via --all-tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/78a45340"&gt;Testing: Add configurable SCTest port offsets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b323fc19"&gt;Plugin: Isolate PluginTest fixtures for parallel SCTest runs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="others"&gt;Others&lt;/h1&gt;
&lt;p&gt;The rest of the month includes practical API and platform cleanups across multiple libraries.
From read error parsing in &lt;code&gt;File&lt;/code&gt;, to &lt;code&gt;ProcessEnvironment::get&lt;/code&gt;, to exposing &lt;code&gt;SO_REUSEADDR&lt;/code&gt;, this batch improves day-to-day ergonomics while tightening edge-case behavior.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/45ee4a87"&gt;File: Parse read errors in FileDescriptor::readAppend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6febcee5"&gt;Process: Add ProcessEnvironment::get&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/abc88ebc"&gt;Socket: Expose SO_REUSEADDR&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8abd23b5"&gt;FileSystemWatcher: Increment relative path storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/be06c23c"&gt;Tools: Update 7zr to 26.00&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See you next month!&lt;/p&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚ùÑÔ∏è Sane C++ January 26</title><link href="https://pagghiu.github.io/site/blog/2026-01-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2026-01-31T00:00:00+01:00</published><updated>2026-01-31T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2026-01-31:/site/blog/2026-01-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the January 2026 update!&lt;br&gt; It looks like AI is taking over the world (starting from writing code better and faster than humans). Probably this entire project is now totally useless and obsolete, but let's do one more monthly update (maybe the last?) !&lt;/p&gt;</summary><content type="html">&lt;h1 id="http"&gt;Http&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Http&lt;/code&gt; library is being tested with more care and is slowly rising from its üü• Draft status to something better.&lt;br&gt;
It's still not time to declare it üü® MVP, but we're making progress.
There is now support for &lt;code&gt;Keep-Alive&lt;/code&gt; (reusing server connections for multiple requests) and for payloads in PUT/POST.&lt;br&gt;
Support for &lt;code&gt;multipart/form-data&lt;/code&gt; has also been partially implemented; it's still an initial implementation and may not handle all edge cases.&lt;br&gt;
What's cool about these new payload/request types is that the library remains allocation-free!&lt;br&gt;
Everything is streamed through the &lt;code&gt;AsyncStreams&lt;/code&gt; using user-provided initial buffers.&lt;br&gt;
This has been quite challenging, as the async state machine required to handle these interactions ‚Äî with many flags that can alter the lifecycle of an async client/connection ‚Äî is quite complicated.&lt;/p&gt;
&lt;p&gt;A new sample has been added called &lt;code&gt;AsyncWebServer&lt;/code&gt;.
There is also a simple pair of &lt;code&gt;.bat&lt;/code&gt; / &lt;code&gt;.sh&lt;/code&gt; scripts to compile and launch it on the fly without generating projects or setting up anything from the repo.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;~/Developer/Projects/SC&amp;gt; ./Examples/AsyncWebServer/BuildAndRun.sh
Building and running AsyncWebServer example (DEBUG)...
Address: 127.0.0.1:8090
Folder : ~/SC/Examples/AsyncWebServer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A benchmark has been added to measure the performance of the fully self-hosted HTTP server against the Python HTTP server; the results vary significantly depending on the OS.&lt;/p&gt;
&lt;p&gt;On Windows I couldn't get it to run; it hangs and needs investigation.&lt;/p&gt;
&lt;p&gt;On my macOS (M1 Pro 16GB RAM) &lt;code&gt;AsyncWebServer&lt;/code&gt; is about 200% faster than the Python Simple HTTP Server.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Support&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Benchmarks&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Http&lt;/span&gt;&lt;span class="o"&gt;/.&lt;/span&gt;&lt;span class="n"&gt;venv&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Support&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Benchmarks&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Http&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;http_benchmark&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;~/SC/_Build/_Documentation/docs&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;8090&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;concurrent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;
&lt;span class="n"&gt;Assuming&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AsyncWebServer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8090&lt;/span&gt;
&lt;span class="n"&gt;Make&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sure&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;SC&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sh&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AsyncWebServer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Debug&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;~/SC/_Build/_Documentation/docs&amp;quot;&lt;/span&gt;


&lt;span class="o"&gt;===&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Benchmarking&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AsyncWebServer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;===&lt;/span&gt;
&lt;span class="n"&gt;Server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8090&lt;/span&gt;
&lt;span class="n"&gt;Directory&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;SC&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_Build&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_Documentation&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;
&lt;span class="n"&gt;Mode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;
&lt;span class="n"&gt;Concurrent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;Iterations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;warmup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;runs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Found&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1245&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benchmark&lt;/span&gt;

&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;warmup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iterations&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;

&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;measurement&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iterations&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;12750.263&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;10553.894&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;8616.982&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;9615.676&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;10540.048&lt;/span&gt;

&lt;span class="o"&gt;---&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Results&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;---&lt;/span&gt;
&lt;span class="n"&gt;Median&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Requests&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;10540.05&lt;/span&gt;
&lt;span class="n"&gt;Median&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Throughput&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;131.36&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;Response&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Min&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.000&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Max&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.022&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Median&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.001&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;Stability&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RPS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.147&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Throughput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.147&lt;/span&gt;
&lt;span class="n"&gt;Warning&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;High&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;variability&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;detected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CV&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Consider&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;increasing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;iterations&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Starting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;8000&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;serving&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;SC&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_Build&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_Documentation&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;

&lt;span class="o"&gt;===&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Benchmarking&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;===&lt;/span&gt;
&lt;span class="n"&gt;Server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8000&lt;/span&gt;
&lt;span class="n"&gt;Directory&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;SC&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_Build&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_Documentation&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;
&lt;span class="n"&gt;Mode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;
&lt;span class="n"&gt;Concurrent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;Iterations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;warmup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;runs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Found&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1245&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benchmark&lt;/span&gt;

&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;warmup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iterations&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;

&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;measurement&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iterations&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3567.009&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3589.241&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3341.547&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3420.329&lt;/span&gt;
&lt;span class="n"&gt;Iteration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;5.&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3430.469&lt;/span&gt;

&lt;span class="o"&gt;---&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Results&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;---&lt;/span&gt;
&lt;span class="n"&gt;Median&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Requests&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3430.47&lt;/span&gt;
&lt;span class="n"&gt;Median&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Throughput&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;42.76&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;Response&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Min&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.001&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Max&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.127&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Median&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.002&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;Stability&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RPS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.030&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Throughput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.030&lt;/span&gt;

&lt;span class="o"&gt;===&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;COMPARISON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;===&lt;/span&gt;
&lt;span class="n"&gt;AsyncWebServer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;10540.05&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;131.36&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3430.47&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;42.76&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;AsyncWebServer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;207.2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;faster&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;
&lt;span class="n"&gt;AsyncWebServer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;has&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;207.2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;higher&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;throughput&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;On Linux (in a VM) the situation is reversed: the Python Simple HTTP Server is about 400% faster than AsyncWebServer.&lt;br&gt;
No investigation has been done yet into why the performance is so much worse on Linux.&lt;br&gt;
I suspect the Python server may be using &lt;code&gt;sendfile&lt;/code&gt; or similar optimizations, but one would need to spend some time to improve the benchmark.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;=== Benchmarking AsyncWebServer ===
Server URL: http://localhost:8090
Directory: /home/stefano/docs_test
Mode: directory
Concurrent requests: 10
Iterations: 5 (with 2 warmup runs)
Found 1245 files to benchmark

Running 2 warmup iterations...

Running 5 measurement iterations...
Iteration 1/5... 225.220
Iteration 2/5... 224.785
Iteration 3/5... 225.823
Iteration 4/5... 222.086
Iteration 5/5... 225.241

--- Results ---
Median Requests/sec: 225.22
Median Throughput: 2.81 MB/s
Response time - Min: 0.001s, Max: 0.057s, Median: 0.044s
Stability - RPS CV: 0.007, Throughput CV: 0.007
Starting Python HTTP server on port 8000 serving /home/stefano/docs_test

=== Benchmarking Python HTTP Server ===
Server URL: http://localhost:8000
Directory: /home/stefano/docs_test
Mode: directory
Concurrent requests: 10
Iterations: 5 (with 2 warmup runs)
Found 1245 files to benchmark

Running 2 warmup iterations...

Running 5 measurement iterations...
Iteration 1/5... 1140.778
Iteration 2/5... 1124.244
Iteration 3/5... 1118.280
Iteration 4/5... 1124.568
Iteration 5/5... 1135.039

--- Results ---
Median Requests/sec: 1124.57
Median Throughput: 14.02 MB/s
Response time - Min: 0.001s, Max: 1.078s, Median: 0.002s
Stability - RPS CV: 0.008, Throughput CV: 0.008

=== COMPARISON ===
AsyncWebServer: 225.22 requests/sec, 2.81 MB/s
Python HTTP Server: 1124.57 requests/sec, 14.02 MB/s
Python HTTP Server is 399.3% faster in requests/sec
Python HTTP Server has 399.3% higher throughput
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fbd2b88c"&gt;Http: Add a couple of font content types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/105c8c31"&gt;Http: Add a multipart/form-data parser&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bf578832"&gt;Http: Add a multipart/form-data test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/51946723"&gt;Http: Add postMultipart to test http client&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/415bca07"&gt;Http: Add some anti hang timeouts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2b3b0851"&gt;Http: Add timeout for file test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0573af8e"&gt;Http: Destroy readable socket stream after body has been fully received&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/aa7ea9d6"&gt;Http: Detect Content-Type header in the parser&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b707209a"&gt;Http: Fix buffer memory leak when unshifting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ab210ae8"&gt;Http: Forcefully disable keep-alive when running out of available connections&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6b2c9b9a"&gt;Http: Handle simple requests with body payloads (PUT / POST)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cc3c87c4"&gt;Http: Handle streaming requests with body payloads (PUT / POST)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b99f18ec"&gt;Http: Handle unexpected client disconnect on keep-alive requests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7aba1f3b"&gt;Http: Implement support for Keep-alive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0ca40286"&gt;Http: Remove only the specifically added event listener&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a9a15fa3"&gt;Http: Return connection close according to HTTP 1.1 spec&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5c887eca"&gt;Http: Reuse connections only after full cancellation of async requests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ccab97dc"&gt;Benchmarks: Add http benchmark&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6dbe3cde"&gt;Benchmarks: Fix http benchmark&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e422fa84"&gt;Examples: Add AsyncWebServer Example&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="asyncstreams"&gt;AsyncStreams&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;AsyncStreams&lt;/code&gt; is the backbone of &lt;code&gt;Http&lt;/code&gt;.&lt;br&gt;
It handles a fairly convoluted state machine (inspired by &lt;code&gt;node.js&lt;/code&gt; streams), making it possible to stream sockets to files and vice versa.&lt;/p&gt;
&lt;p&gt;The buffer management system can now create child views that reference a memory slice of the parent buffer.&lt;/p&gt;
&lt;p&gt;It has gained a few functions like &lt;code&gt;unshift&lt;/code&gt; to allow &lt;em&gt;putting back&lt;/em&gt; buffers that were popped from the stream unnecessarily.  &lt;/p&gt;
&lt;p&gt;For example, the multipart parser pops a buffer, finds the end of the multipart header, creates a child view that points to the start of the binary data, and &lt;em&gt;unshifts&lt;/em&gt; it back to the stream so it can be piped to an &lt;code&gt;AsyncWritableFileStream&lt;/code&gt; without worrying about HTTP protocol delimiters.&lt;/p&gt;
&lt;p&gt;The destruction lifecycle is now more precise with the addition of an &lt;code&gt;autoDestroy&lt;/code&gt; feature (which automatically destroys a stream when it's ended) and a clear distinction between the &lt;code&gt;end&lt;/code&gt; event (EOF) and the &lt;code&gt;close&lt;/code&gt; event (resource cleanup).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/48b16eee"&gt;AsyncStreams: Add readable stream unshift&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/96e6a705"&gt;AsyncStreams: Change func implementations to virtual functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b521a0b4"&gt;AsyncStreams: Destroy writable streams only when not already ended or ending&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3cdca1bc"&gt;AsyncStreams: Get rid of getFirstBodySlice by unshifting body buffers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/18ead745"&gt;AsyncStreams: Implement child async buffers view&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/954e3f4b"&gt;AsyncStreams: Listen to eventClose instead of eventEnd in Pipeline&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9cb5df0c"&gt;AsyncStreams: Preserve order when removing listeners&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/99ba6006"&gt;AsyncStreams: Stop async requests if they're not already cancelling&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/103e505e"&gt;AsyncStreams+Http: Implement async destruction&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async"&gt;Async&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Async&lt;/code&gt; library is maturing to handle more edge cases.
This example addresses &lt;code&gt;ERROR_INVALID_HANDLE&lt;/code&gt;, which can be returned when trying to cancel async requests whose handle has already (incorrectly) been closed.&lt;br&gt;
It's great to see &lt;code&gt;SC::Async&lt;/code&gt; handle such edge cases smoothly, making the user's programming experience easier.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5fe7560d"&gt;Async: Ignore ERROR_INVALID_HANDLE on Windows during cancellations&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="others"&gt;Others&lt;/h1&gt;
&lt;p&gt;And as always, this is a list of miscellaneous fixes and improvements made for all the other libraries.&lt;/p&gt;
&lt;p&gt;One nice addition to &lt;code&gt;Containers&lt;/code&gt; is the &lt;code&gt;VirtualArray&lt;/code&gt; class, which allows reserving a very large amount of virtual address space and committing only what's needed.
This keeps the memory location of the whole array stable while growing or shrinking it.
It has been used in the &lt;code&gt;AsyncWebServer&lt;/code&gt; sample (and &lt;code&gt;SCExample&lt;/code&gt;) to show how it can handle many connections at runtime, constrained only by OS resource limits such as RAM and the number of open handles.&lt;/p&gt;
&lt;p&gt;Also, assertions on functions returning &lt;code&gt;SC::Result&lt;/code&gt; now print the message embedded in the result.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7f04875b"&gt;Containers: Add VirtualArray class&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/eca08d76"&gt;Everywhere: Add SC_COMPILER_EXPORT clause to some classes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7c804b60"&gt;Everywhere: Compilation fixes for MSVC 32 bit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/85dc9499"&gt;File: Fix reading from file into fixed span until full or EOF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e8195e3e"&gt;Foundation: Print reason of failed assertion when using Result type&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/dce51815"&gt;Memory: Use the correct pointer type for __cxa_guard_xxx declarations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/88c02eb1"&gt;Meta: Add .venv to .gitignore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/40543e2d"&gt;Meta: Always checkout .sh files with LF and .bat with CRLF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/11142c9d"&gt;Meta: Ignore .cache and compile_commands.json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/409fea5a"&gt;Socket: Make SocketNetworking initNetworking method void&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/072137be"&gt;Threading: Remove InterlockedExchange forward declarations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üå´Ô∏è Sane C++ December 25</title><link href="https://pagghiu.github.io/site/blog/2025-12-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-12-31T00:00:00+01:00</published><updated>2025-12-31T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-12-31:/site/blog/2025-12-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the December 2025 update!&lt;br&gt; This month the &lt;code&gt;Http&lt;/code&gt; library is finally losing its dependency on &lt;code&gt;Memory&lt;/code&gt; and gets a lot of reliability fixes!&lt;/p&gt;</summary><content type="html">&lt;h1 id="dependencies"&gt;Dependencies&lt;/h1&gt;
&lt;p&gt;The bulk of work for this month has been getting rid of the &lt;code&gt;Memory&lt;/code&gt; dependency from the &lt;code&gt;Http&lt;/code&gt; library.&lt;/p&gt;
&lt;p&gt;This is incredibly important, because allocation is only done by the &lt;code&gt;Memory&lt;/code&gt; library!&lt;/p&gt;
&lt;p&gt;This means that excluding &lt;code&gt;Containers&lt;/code&gt; and the support &lt;code&gt;ContainersReflection&lt;/code&gt; all libraries make &lt;em&gt;No allocation&lt;/em&gt; whatsoever.
All of them can work inside fixed buffers or inside dynamically allocated memory allocated by the user that has knowledge of the entire application context.&lt;/p&gt;
&lt;p&gt;Plus, it finally makes the internal dependencies graph between all libraries look super cool:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year-Dependencies.svg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year-Dependencies.svg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="http"&gt;Http&lt;/h1&gt;
&lt;p&gt;Going back to the actual improvements to Http, I am not sure where to start.
Multiple iterations of the API have been done and it's probably not over yet...&lt;/p&gt;
&lt;p&gt;The API at the beginning of the month was something like this, with allocating &lt;code&gt;Buffers&lt;/code&gt; usage and raw allocations everywhere (so ugly!):&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerStart.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerStart.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The point has been making sure that a connection should be able to live within a block of memory that is fixed during its initialization.&lt;/p&gt;
&lt;p&gt;This is because most of the time, reasonable defaults and safety limits must be set anyway to control how many Kb of headers can be accepted or how many Kb can be dedicated to streaming large files.&lt;/p&gt;
&lt;p&gt;One example on initializing the web server with compile time fixed buffers is the following:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerFixed.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerFixed.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;As &lt;code&gt;AsyncStreams&lt;/code&gt; have been fully integrated, it's now possible to send even very large file using some tiny fixed buffers.
If they're too tiny, the transfer is going to become very slow, as a lot of syscall will be needed to fully transmit the file, so it's always as good idea sizing the buffers accordingly.&lt;/p&gt;
&lt;p&gt;If one wants to decide the size of these buffers at runtime, the API will become slightly more verbose but I would say it's not so bad:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerRuntime.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-HttpAsyncWebServerRuntime.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The example shows how to assign memory from &lt;em&gt;Structure Of Arrays&lt;/em&gt; style arrangement for these buffers, all equally sized.
This is using an helper class called &lt;code&gt;StableArray&lt;/code&gt; that uses &lt;code&gt;VirtualMemory&lt;/code&gt; to reserve space for extremely large buffers and just commits to physical RAM the actually used quantity.
The &lt;code&gt;WebServerExample&lt;/code&gt; in &lt;code&gt;SCExample&lt;/code&gt; also shows how to resize such buffers at runtime, while the web-server is running!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-SCExample.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-SCExample.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It's also possible to just give each connection a buffers of different sizes, making the memory management slightly more complicated.&lt;/p&gt;
&lt;p&gt;The library is still in &lt;code&gt;üü• Draft&lt;/code&gt; state, and it will likely stay like that for the next months. &lt;/p&gt;
&lt;p&gt;I can still see some random lost connections in browser tools from Safari / Firefox / Chrome when trying to visit some test website.&lt;/p&gt;
&lt;p&gt;Also the performance / latency looks quite bad for now, but it doesn't make sense to start working on performance before becoming compliant with the spec to some acceptable level!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-HttpError.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-HttpError.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2802e629"&gt;Http: Add helper to configure connection buffers and queues at runtime&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d2971b78"&gt;Http: Allow declaring fixed size queues side by side with HttpConnection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a4b7c3c3"&gt;Http: Allow resizing server connections array&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae44d2ab"&gt;Http: Allow user to setup header memory for each connection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/15bb382b"&gt;Http: Improve Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/39ebbc23"&gt;Http: Let caller supply the streams for async file server stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7e5d3e53"&gt;Http: Make buffers pool and pipeline per connection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0ce599d7"&gt;Http: Make HttpAsyncServer and HttpAsyncFileServer API more symmetric&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c5eac859"&gt;Http: Make ThreadPool mandatory to initialize HttpAsyncFileServer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f2e70243"&gt;Http: Move pipeline from file stream to connection object&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f8506b71"&gt;Http: Move slice buffers helper to AsyncStreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f107b2b3"&gt;Http: Parse response in HttpClient to read Content-Length&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f39ee2cf"&gt;Http: Remove dependency on Memory (drop HttpClient)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/802e72ef"&gt;Http: Rename HttpServer to HttpConnectionsPool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/af100a97"&gt;Http: Rename HttpWebServer to HttpAsyncFileServer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b306d315"&gt;Http: Use AsyncStreams in HttpResponse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/52c160ba"&gt;Http: Use AsyncStreams in HttpWebServer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/31395aae"&gt;Http: Write response headers to the headers buffer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bd657cf0"&gt;SCExample: Allow changing buffers sizes at runtime in WebServer Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3ed1d515"&gt;SCExample: Use virtual memory for all web server buffers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="asyncstreams"&gt;AsyncStreams&lt;/h1&gt;
&lt;p&gt;A few changes in &lt;code&gt;AsyncStreams&lt;/code&gt; have been made, as consequences of &lt;code&gt;Http&lt;/code&gt; improvements.&lt;/p&gt;
&lt;p&gt;Writable streams can now be destroyed and pipelines are automatically un-piped after all sinks have finished writing their data.&lt;/p&gt;
&lt;p&gt;A few fixes also have been applied, like copying listeners during emit event (to allow changing listeners when inside an handler), emptying the read queue on destroy and resetting the request state on init.&lt;/p&gt;
&lt;p&gt;Methods to set queues and buffers for the pool have been separated from initialization, so that they can be set during construction / setup and re-used across multiple successive initializations.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/99b30825"&gt;AsyncStreams: Add destroy method for writable stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/371edff4"&gt;AsyncStreams: Add explicit method to set buffers in the pool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fed7c057"&gt;AsyncStreams: Add method to explicitly set read and write queues&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7d7db8c1"&gt;AsyncStreams: Automatically un-pipe pipelines after all sinks have finished&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ab7efb92"&gt;AsyncStreams: Copy listeners during Event emit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3d0e8b82"&gt;AsyncStreams: Empty the readQueue when destroying&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/94ad89f0"&gt;AsyncStreams: Explicitly mark buffers to be re-used when their refCount goes to zero&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/71cd7291"&gt;AsyncStreams: Reset requests state on stream initialization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async"&gt;Async&lt;/h1&gt;
&lt;p&gt;The extensive testing and improvements of &lt;code&gt;Http&lt;/code&gt; library has exposed some issues in &lt;code&gt;Async&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A quite nasty bug in the gather writes has been fixed in Posix, affecting partial writes, that has never been surfacing in the unit tests.&lt;/p&gt;
&lt;p&gt;Also it made sense to ignore reporting errors when cancellations fail to submit on windows.
This happens when trying to cancel an async operation that has already finished but for which the overlapped status has not been retrieved yet.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b5bbc57d"&gt;Async: Add method to check if event loop backend needs thread-pool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/eb49c425"&gt;Async: Do not report errors when cancellations fail to submit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4dcedcfa"&gt;Async: Fix incomplete gather writes on Posix&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="others"&gt;Others&lt;/h1&gt;
&lt;p&gt;The usual mix of fixes this month includes a debug visualizer for &lt;code&gt;Span&amp;lt;T&amp;gt;&lt;/code&gt; and properly support exporting types across dynamic libraries (by adding &lt;code&gt;SC_COMPILER_EXPORT&lt;/code&gt; in all relevant places).&lt;/p&gt;
&lt;p&gt;During a bad search and replace done a few months ago, &lt;code&gt;Result&lt;/code&gt; lost its &lt;code&gt;[[nodiscard]]&lt;/code&gt; status, that has been fixed.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GrowableBuffer&lt;/code&gt; has now a &lt;code&gt;Span&amp;lt;char&amp;gt;&lt;/code&gt; specialization, to allow using things like &lt;code&gt;StringFormat&lt;/code&gt; / &lt;code&gt;StringBuilder&lt;/code&gt; with raw char arrays.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;VirtualMemory&lt;/code&gt; class has been cleaned up and improved, with its destructor properly releasing allocated memory.&lt;/p&gt;
&lt;p&gt;A bug in &lt;code&gt;Process&lt;/code&gt; was reading incomplete output from child processes terminating very quickly.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/aed874a7"&gt;DebugVisualizer: Add debug visualizers for Span&lt;T&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7b368e33"&gt;Everywhere: Add SC_COMPILER_EXPORT clause to many types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/43df70bc"&gt;File: Add method to read into a fixed buffer until it's full or EOF happens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a107d6e3"&gt;Foundation: Add GrowableBuffer&lt;Span\&lt;char&gt;&gt; specialization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a9806d78"&gt;Foundation: Mark Result as a [[nodiscard]] type again&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4a3f5cbb"&gt;Memory: Make VirtualMemory fields private and add destructor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1f393c01"&gt;Process: Read entire process output until in user supplied writable span&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See you next month!&lt;/p&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>2Ô∏è‚É£ Years of Sane C++ Libraries</title><link href="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year.html" rel="alternate"></link><published>2025-12-23T00:00:00+01:00</published><updated>2025-12-23T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-12-23:/site/blog/2025-12-23-SaneCpp2Year.html</id><summary type="html">&lt;p&gt;A look back at the second year of the Sane C++ Libraries project, highlighting a massive dependency cleanup, the "No Allocations" guarantee, single-file libraries, and much more.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Another year has passed, and it's time to celebrate the second anniversary of Sane C++ Libraries
&lt;a href="https://github.com/pagghiu/SaneCppLibraries"&gt;https://github.com/pagghiu/SaneCppLibraries&lt;/a&gt;!&lt;br&gt;
The journey continues toward the goal of providing simple, modern, and dependency-free C++ platform abstraction libraries for macOS, Windows, and Linux.&lt;/p&gt;
&lt;p&gt;The core principles remain the same:&lt;/p&gt;
&lt;p&gt;‚úÖ Fast compile times&lt;br&gt;
‚úÖ Bloat free&lt;br&gt;
‚úÖ Simple and readable code&lt;br&gt;
‚úÖ Easy to integrate&lt;br&gt;
‚õîÔ∏è No C++ Standard Library / Exceptions / RTTI&lt;br&gt;
‚õîÔ∏è No third party build dependencies (prefer OS API)  &lt;/p&gt;
&lt;p&gt;This second year was defined by a relentless focus on architectural purity, developer experience, and delivering on the project's core promises in a tangible way.&lt;/p&gt;
&lt;h2 id="the-great-cleanup"&gt;The Great Cleanup&lt;/h2&gt;
&lt;p class="chapter"&gt;The "No Allocations" Guarantee&lt;/p&gt;

&lt;p&gt;The single most important achievement of this year was a massive dependency cleanup that culminated in making them single-file libraries with clean dependencies.&lt;/p&gt;
&lt;p&gt;Isn't this final clean internal dependency graph super cool? üòé&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year-Dependencies.svg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-12-23-SaneCpp2Year-Dependencies.svg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A powerful guarantee for most of the libraries has been gained too:&lt;br&gt;
&lt;strong&gt;No dynamic memory allocations.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As the official &lt;code&gt;README.md&lt;/code&gt; now states:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;All libraries do not dynamically allocate memory (excluding &lt;code&gt;Memory&lt;/code&gt; and &lt;code&gt;Containers&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;All libraries are designed to work inside user-provided memory buffers.&lt;/li&gt;
&lt;li&gt;All libraries return error codes when running out of such memory buffers.&lt;/li&gt;
&lt;li&gt;Third-party container classes, including &lt;code&gt;std::&lt;/code&gt; ones, are supported (see &lt;code&gt;InteropSTL&lt;/code&gt; for an example).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Memory&lt;/code&gt; and &lt;code&gt;Containers&lt;/code&gt; are fully optional and just provided for convenience.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;This was a multi-month effort that involved:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Splitting the &lt;code&gt;Memory&lt;/code&gt; library (&lt;a href="https://pagghiu.github.io/site/blog/2025-06-30-SaneCppLibrariesUpdate.html"&gt;June&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
All components responsible for dynamic allocation (&lt;code&gt;Segment&lt;/code&gt;, &lt;code&gt;Buffer&lt;/code&gt;, &lt;code&gt;VirtualMemory&lt;/code&gt;) were moved from &lt;code&gt;Foundation&lt;/code&gt; into their own dedicated library.&lt;br&gt;
This created a clear architectural boundary.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Aggressive Refactoring (&lt;a href="https://pagghiu.github.io/site/blog/2025-07-31-SaneCppLibrariesUpdate.html"&gt;July&lt;/a&gt;-&lt;a href="https://pagghiu.github.io/site/blog/2025-10-31-SaneCppLibrariesUpdate.html"&gt;October&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
Guided by a new &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_dependencies.html"&gt;automated dependency tracking system&lt;/a&gt;, libraries like &lt;code&gt;File&lt;/code&gt;, &lt;code&gt;Socket&lt;/code&gt;, &lt;code&gt;Process&lt;/code&gt;, &lt;code&gt;FileSystem&lt;/code&gt;, and &lt;code&gt;FileSystemWatcher&lt;/code&gt; were refactored to remove all dependencies on &lt;code&gt;Memory&lt;/code&gt; or &lt;code&gt;Strings&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;"Bring Your Own Containers" (&lt;a href="https://pagghiu.github.io/site/blog/2025-10-31-SaneCppLibrariesUpdate.html"&gt;October&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
To prove this wasn't about locking users in, the &lt;code&gt;InteropSTL&lt;/code&gt; example was created to show how easily &lt;code&gt;std::string&lt;/code&gt; and &lt;code&gt;std::vector&lt;/code&gt; can be used with the libraries, thanks to the lightweight &lt;code&gt;IGrowableBuffer&lt;/code&gt; interface.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now, if you use a library that doesn't depend on &lt;code&gt;Memory&lt;/code&gt; (directly or indirectly), you have a compile-time guarantee that it performs no heap allocations.  &lt;/p&gt;
&lt;h2 id="the-year-in-review"&gt;The Year in Review&lt;/h2&gt;
&lt;p class="chapter"&gt;A Look Back at The Updates &lt;/p&gt;

&lt;p&gt;Beyond the architectural overhaul, the year was packed with new features and improvements.&lt;/p&gt;
&lt;h3 id="async-evolution"&gt;üü® Async Evolution&lt;/h3&gt;
&lt;p class="chapter"&gt;Async all the things&lt;/p&gt;

&lt;p&gt;The async ecosystem has been refined consistently throughout the year:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;AsyncStreams&lt;/code&gt; (&lt;a href="https://pagghiu.github.io/site/blog/2024-12-31-SaneCppLibrariesUpdate.html"&gt;December&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
Gained transform streams, demonstrated with an async ZLib compression stream.&lt;br&gt;
It was later promoted to &lt;strong&gt;MVP&lt;/strong&gt; status (August).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Async&lt;/code&gt; Core (&lt;a href="https://pagghiu.github.io/site/blog/2025-01-31-SaneCppLibrariesUpdate.html"&gt;January&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
The core event loop was refined with a large number of bug fixes and improvements, timers were improved, and the &lt;code&gt;SC::Function&lt;/code&gt; object was optimized to save memory.  Significant effort has been spent trying to unify cancellation behaviors of the wildly different OS APIs.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;AsyncSequence&lt;/code&gt; (&lt;a href="https://pagghiu.github.io/site/blog/2025-05-31-SaneCppLibrariesUpdate.html"&gt;May&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
A major quality-of-life improvement, allowing for easy chaining of async operations without complex callback nesting.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;AsyncFileSystemOperation&lt;/code&gt; (&lt;a href="https://pagghiu.github.io/site/blog/2025-06-30-SaneCppLibrariesUpdate.html"&gt;June&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
A powerful new feature unifying a huge range of async file system operations (&lt;code&gt;copy&lt;/code&gt;, &lt;code&gt;rename&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt;, etc.) under a single cross-platform API.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UDP Support (&lt;a href="https://pagghiu.github.io/site/blog/2025-06-30-SaneCppLibrariesUpdate.html"&gt;June&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
Added &lt;code&gt;sendTo&lt;/code&gt; and &lt;code&gt;receiveFrom&lt;/code&gt; for unconnected UDP sockets.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Http Async Evolution (&lt;a href="https://pagghiu.github.io/site/blog/2025-11-30-SaneCppLibrariesUpdate.html"&gt;November&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
Work on overhauling the &lt;code&gt;Http&lt;/code&gt; library drove improvements in &lt;code&gt;AsyncStreams&lt;/code&gt;, making it more flexible to handle externally managed buffers.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCAsyncSequence.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsyncSequence.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="memory-management-revolution-february-march"&gt;üß† Memory Management Revolution (&lt;a href="https://pagghiu.github.io/site/blog/2025-02-28-SaneCppLibrariesUpdate.html"&gt;February&lt;/a&gt;-&lt;a href="https://pagghiu.github.io/site/blog/2025-03-31-SaneCppLibrariesUpdate.html"&gt;March&lt;/a&gt;)&lt;/h3&gt;
&lt;p class="chapter"&gt;Do not allocate as if your life depends on it!&lt;/p&gt;

&lt;p&gt;The foundation for the "No Allocations" guarantee was laid early in the year.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Containers&lt;/code&gt; Rewrite (&lt;a href="https://pagghiu.github.io/site/blog/2025-02-28-SaneCppLibrariesUpdate.html"&gt;February&lt;/a&gt;):&lt;/strong&gt; The &lt;code&gt;Containers&lt;/code&gt; library was rewritten, and the crucial &lt;code&gt;Buffer&lt;/code&gt; and &lt;code&gt;SmallBuffer&lt;/code&gt; types were born in &lt;code&gt;Foundation&lt;/code&gt;, and later on isolated inside the &lt;code&gt;Memory&lt;/code&gt; library.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced Memory Management (&lt;a href="https://pagghiu.github.io/site/blog/2025-03-31-SaneCppLibrariesUpdate.html"&gt;March&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
A number of useful features were added:&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Custom Allocators:&lt;/strong&gt;&lt;br&gt;
A global, scoped, non-template-based allocator system for strategies like arena allocation.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Relative Pointers:&lt;/strong&gt;&lt;br&gt;
To enable fast, memcpy-able serialization of complex data structures (if you can accept a little bit of un-avoidable UB...).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Virtual Memory:&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;VirtualAllocator&lt;/code&gt; allows reserving large chunks of virtual address space to avoid reallocations.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/CustomVirtualAllocator.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/CustomVirtualAllocator.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/StructDump.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/StructDump.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="tooling-and-developer-experience"&gt;üõ†Ô∏è Tooling and Developer Experience&lt;/h3&gt;
&lt;p&gt;A major theme this year was making the libraries easier to use and develop.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Single-File Libraries (&lt;a href="https://pagghiu.github.io/site/blog/2025-08-31-SaneCppLibrariesUpdate.html"&gt;August&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
A huge usability win! All libraries can now be amalgamated into single header files.&lt;br&gt;
A &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_single_file_libs.html"&gt;browser-based tool&lt;/a&gt; makes it incredibly easy to generate them.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GDB Pretty Printer (&lt;a href="https://pagghiu.github.io/site/blog/2025-09-30-SaneCppLibrariesUpdate.html"&gt;September&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
With &lt;code&gt;LLDB&lt;/code&gt; and &lt;code&gt;MSVC&lt;/code&gt; visualizers already present, the addition of a &lt;code&gt;GDB&lt;/code&gt; pretty printer completed the set, providing a first-class debugging experience for the project's custom containers.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Automated Dependency Checking (&lt;a href="https://pagghiu.github.io/site/blog/2025-09-30-SaneCppLibrariesUpdate.html"&gt;September&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
The CI now automatically verifies that new code doesn't introduce unwanted dependencies, enforcing architectural hygiene.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Self-Hosting Bootstrap (&lt;a href="https://pagghiu.github.io/site/blog/2025-10-31-SaneCppLibrariesUpdate.html"&gt;October&lt;/a&gt;):&lt;/strong&gt;&lt;br&gt;
The build tool system (&lt;code&gt;SC::Tools&lt;/code&gt;) threw away its dependency on &lt;code&gt;make&lt;/code&gt;/&lt;code&gt;nmake&lt;/code&gt; and now bootstraps itself with a minimal, dependency-free C++ program (which was later ported to C for even faster startup!).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/single_file_libs.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAmalgamationGenerator.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="community-content-growth"&gt;Community, Content &amp;amp; Growth&lt;/h2&gt;
&lt;p&gt;The project is still a solo development effort for the most part, but this year saw a few contributions!&lt;br&gt;
A special thank you to &lt;strong&gt;&lt;a href="http://coz.is"&gt;Francesco "cozis" Cozzuto&lt;/a&gt;&lt;/strong&gt; for his useful contributions and bug reports.&lt;/p&gt;
&lt;p&gt;Growth on GitHub has been slow and steady.&lt;br&gt;
While there's no exponential explosion in stars, the project continues to find its audience, making me happy üòÉ.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://star-history.com/#Pagghiu/SaneCppLibraries&amp;Date" target="_blank"&gt;
  &lt;img src="https://api.star-history.com/svg?repos=Pagghiu/SaneCppLibraries&amp;type=Date" alt="Star History Chart"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In terms of content, my focus this year shifted heavily from producing YouTube videos to implementing the architectural changes described above. I may come back to making videos at some point, once I'm more satisfied with the status of the libraries, but the priority for now remains on the code.&lt;/p&gt;
&lt;h2 id="looking-ahead-to-year-three"&gt;Looking Ahead to Year Three&lt;/h2&gt;
&lt;p&gt;With the architecture in a much cleaner state, the plan for the third year is to build on this solid foundation.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Mature Existing Libraries:&lt;/strong&gt; The main objective is to bring more libraries from &lt;code&gt;Draft&lt;/code&gt; and &lt;code&gt;MVP&lt;/code&gt; states to &lt;code&gt;Usable&lt;/code&gt;.&lt;br&gt;
The top priority is the &lt;code&gt;Http&lt;/code&gt; library, whose overhaul has already begun.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;No New Libraries (Probably!):&lt;/strong&gt; I will try &lt;em&gt;not&lt;/em&gt; to add any new libraries. The focus will be on hardening and perfecting the existing ones.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Examples and Documentation:&lt;/strong&gt; With the APIs stabilizing, improving documentation and adding more real-world examples will be more important than ever.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It's been a marathon of a year focused on deep, foundational work.&lt;br&gt;
Thank you to everyone who has followed along, starred the repository, or used the libraries. &lt;/p&gt;
&lt;p&gt;The journey is far from over!&lt;/p&gt;
&lt;p&gt;See you soon! üéäüëãüèº&lt;/p&gt;</content><category term="C++"></category><category term="c++"></category><category term="sane"></category><category term="libraries"></category><category term="update"></category><category term="anniversary"></category></entry><entry><title>üå´Ô∏è Sane C++ November 25</title><link href="https://pagghiu.github.io/site/blog/2025-11-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-11-30T00:00:00+01:00</published><updated>2025-11-30T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-11-30:/site/blog/2025-11-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the November 2025 update!&lt;br&gt; This month, focus is bringing the long neglected &lt;code&gt;Http&lt;/code&gt; library out of its initial &lt;code&gt;Draft&lt;/code&gt; state!&lt;/p&gt;</summary><content type="html">&lt;h1 id="http"&gt;Http&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Http&lt;/code&gt; library was initially put together in a hurry for the first release of Sane C++ Libraries almost two years ago. Since then, it has remained largely unchanged, a simple &lt;code&gt;Draft&lt;/code&gt; that was just enough to demonstrate a basic asynchronous web server.&lt;/p&gt;
&lt;p&gt;While useful, its minimal implementation and lack of comprehensive tests meant it was often fragile, breaking as other parts of the ecosystem evolved. The time has come to give &lt;code&gt;Http&lt;/code&gt; the attention it deserves and begin the long process of elevating it to a more robust state.&lt;/p&gt;
&lt;p&gt;The first steps on this journey involve reducing its footprint by removing now-unnecessary dependencies on &lt;code&gt;Containers&lt;/code&gt; and &lt;code&gt;Time&lt;/code&gt;. Concurrently, &lt;code&gt;Http&lt;/code&gt; is being refactored to leverage the &lt;code&gt;AsyncStreams&lt;/code&gt; abstraction instead of dealing with raw socket operations. The next step is to remove the &lt;code&gt;Memory&lt;/code&gt; dependency, leaving &lt;code&gt;AsyncStreams&lt;/code&gt; as its sole dependency and solidifying its foundation.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_dependencies.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-11-Dependencies.svg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8f188bae"&gt;Http: Fix issues introduced when removing dependency from String&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ac94af4f"&gt;Http: Fix using HttpServerClient across Plugin boundaries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3c7c3359"&gt;Http: Move HttpServer::parse to HttpRequest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/81bc9234"&gt;Http: Remove dependency on Containers library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/82315df1"&gt;Http: Remove dependency on Time library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a320715e"&gt;Http: Split HttpAsyncServer out of HttpServer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cd423d17"&gt;Http: Start integrating AsyncStreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/31f38dd5"&gt;Http: Stop reading data from socket stream before sending response&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b1ce27d2"&gt;Http: Write request headers to user provided region of memory&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="asyncstreams"&gt;AsyncStreams&lt;/h1&gt;
&lt;p&gt;As is often the case, improvements in one library drive the evolution of another. The work on &lt;code&gt;Http&lt;/code&gt; exposed some limitations in &lt;code&gt;AsyncStreams&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Previously, &lt;code&gt;AsyncStreams&lt;/code&gt; was strict, only allowing data from its own pre-allocated buffers. This is great for managing memory with a fixed budget, but &lt;code&gt;Http&lt;/code&gt; needed more flexibility. It required the ability to handle data from other subsystems without forcing a copy.&lt;/p&gt;
&lt;p&gt;To accommodate this, the buffer system in &lt;code&gt;AsyncStreams&lt;/code&gt; is now a hybrid model. It now supports read-only buffers and &lt;code&gt;IGrowableBuffer&lt;/code&gt;-based views, where the memory lifetime is managed by the caller. This change, along with several bug fixes to the stream's state machine, makes &lt;code&gt;AsyncStreams&lt;/code&gt; more powerful and flexible, ready for the more complex scenarios that the evolving &lt;code&gt;Http&lt;/code&gt; library will demand.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/690750c3"&gt;AsyncStreams: Add read only AsyncBufferView&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/22feff4a"&gt;AsyncStreams: Allow re-using streams after they've been stopped, ended or destroyed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2a422952"&gt;AsyncStreams: Avoid buffer leak when stopping async streams on close / finish&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/065bdcce"&gt;AsyncStreams: Free Readable and Growable buffer slots when their refCount expires&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/776b38f0"&gt;AsyncStreams: Remove the Destroying state&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b9732563"&gt;AsyncStreams: Return true from AsyncReadableStream::push if the caller can continue pushing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/207570c5"&gt;AsyncStreams: Stop socket and file requests when close or finish events happens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/de65bb9f"&gt;AsyncStreams: Use a fixed size for AsyncPipeline transforms and sinks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c6cd8283"&gt;AsyncStreams: Wrap Strings / Buffers in AsyncBufferView though type erasure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cf7313e5"&gt;SCExample: Add option to use AsyncStreams in WebServerExample&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async"&gt;Async&lt;/h1&gt;
&lt;p&gt;Stress-testing the new &lt;code&gt;Http&lt;/code&gt; and &lt;code&gt;AsyncStreams&lt;/code&gt; integration revealed some subtle edge cases in the core &lt;code&gt;Async&lt;/code&gt; library.&lt;/p&gt;
&lt;p&gt;For instance, on Windows, &lt;code&gt;IOCP&lt;/code&gt; cancellations can return &lt;code&gt;ERROR_NOT_FOUND&lt;/code&gt; if no cancellation was queued, which shouldn't be treated as a critical error by higher-level abstractions.&lt;/p&gt;
&lt;p&gt;More critically, a re-entrancy bug was discovered. Calling the event loop's &lt;code&gt;runOnce&lt;/code&gt; method from within a callback could cause the same callback to be invoked again before it had been fully torn down. A new internal flag, &lt;code&gt;Flag_NeedsTeardown&lt;/code&gt;, now prevents the same completion from being incorrectly called multiple times.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e54d8ab1"&gt;Async: Do not complete multiple times requests waiting for teardown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6f3ad886"&gt;Async: Flag most types for dll export&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c1b763ce"&gt;Async: Handle ERROR_NOT_FOUND in IOCP cancellations using CancelIOEx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="tools"&gt;Tools&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;ToolsBootstrap&lt;/code&gt; utility, which replaces the old bootstrap Makefiles, has received some bug fixes and feature enhancements.&lt;/p&gt;
&lt;p&gt;This tool was largely coded with AI assistance, and in an interesting experiment, it was automatically translated from C++ to C. Why? To get even faster compilation times. While the C++ version was already quick, the C version is &lt;em&gt;faster&lt;/em&gt;, and the translation was surprisingly low-effort. So... here it is!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/af5c2528"&gt;Tools: Compile Tools.cpp and the Tool script in parallel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/27dc5864"&gt;Tools: Compile with debug info enabled so that tools can be debugged&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b2062177"&gt;Tools: Do not use nostdinc++ in ToolsBootstrap for older GCC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6562b144"&gt;Tools: Make bootstrap return -1 on error&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1bdb55e8"&gt;Tools: Port ToolsBootstrap to C&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="build"&gt;Build&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;SC::Build&lt;/code&gt; is steadily maturing. This month, it gained the ability to specify coverage exclusion regexes directly in the &lt;code&gt;SC-Build.cpp&lt;/code&gt; file. Additionally, the generated &lt;code&gt;Makefile&lt;/code&gt; targets are now smarter, automatically attempting a clean rebuild if a &lt;code&gt;No rule to make target&lt;/code&gt; error occurs.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0e01bdbd"&gt;Build: Automatically rebuild makefiles on "No rule to make target" error&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d46a112e"&gt;Build: De-hardcode coverage regex exclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="others"&gt;Others&lt;/h1&gt;
&lt;p&gt;As with every month, there are numerous small fixes and improvements that don't need their own section but are worth mentioning.&lt;/p&gt;
&lt;p&gt;A fix for pipe reads on Windows was added to &lt;code&gt;File&lt;/code&gt;, and the &lt;code&gt;Function&lt;/code&gt; template now has a user-configurable &lt;code&gt;LAMBDA_SIZE&lt;/code&gt; to help avoid heap allocations for closures. &lt;code&gt;Console&lt;/code&gt; gained methods for printing to &lt;code&gt;stderr&lt;/code&gt;, and the limitations of &lt;code&gt;FileSystemWatcher&lt;/code&gt; are now better documented thanks to a community-filed issue.&lt;/p&gt;
&lt;p&gt;All these small changes are great indicators of the libraries maturing and hardening over time!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b4498097"&gt;Containers: Increase Array coverage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2d72fdb9"&gt;File: Handle Windows ERROR_BROKEN_PIPE for synchronous reads&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/75eaa833"&gt;FileSystemWatcher: Document file watcher limitations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/107c23b0"&gt;Foundation: Fix type constraints for Span&lt;T&gt; std::initializer_list  constructor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f7e24260"&gt;Foundation: Make Function LAMBDA_SIZE user configurable&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/144fadd0"&gt;Strings: Add Console methods to enable printing to stderr&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üåßÔ∏è Sane C++ October 25</title><link href="https://pagghiu.github.io/site/blog/2025-10-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-10-31T00:00:00+01:00</published><updated>2025-10-31T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-10-31:/site/blog/2025-10-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the October 2025 update!&lt;br&gt; This month internal dependencies have been further removed.&lt;/p&gt;</summary><content type="html">&lt;h1 id="reducing-internal-dependencies"&gt;Reducing Internal Dependencies&lt;/h1&gt;
&lt;p&gt;The first part of the month month has been focused on continuing breaking &lt;strong&gt;internal&lt;/strong&gt; dependencies between libraries.&lt;/p&gt;
&lt;p&gt;The goal is for Sane C++ Libraries to be a collection of libraries that &lt;em&gt;work well together&lt;/em&gt;, rather than a monolithic &lt;em&gt;framework&lt;/em&gt;.
Users should be able to use a single library in isolation without being forced to adopt the entire ecosystem.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Plugin&lt;/code&gt;, &lt;code&gt;FileSystemWatcher&lt;/code&gt;, &lt;code&gt;Async&lt;/code&gt; and &lt;code&gt;Http&lt;/code&gt; libraries have seen their dependencies reduced, and the resulting dependencies graph is now starting to look a lot nicer!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_dependencies.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-10-Dependencies.svg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e03402cc"&gt;Plugin: Refactoring to isolate FileSystemIterator usage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d44ce07e"&gt;Plugin: Remove Plugin dependency on FileSystem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e252e18c"&gt;Plugin: Remove Plugin dependency on FileSystemIterator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5d4b050e"&gt;Plugin: Remove Plugin dependency on Time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/abc2abc8"&gt;FileSystemWatcher: Remove dependency on Threading&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/10c9b893"&gt;Http: Remove Http dependency on Strings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2db0ebc6"&gt;Async: Remove dependency on Time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="bring-your-own-containers"&gt;Bring Your Own Containers&lt;/h1&gt;
&lt;p&gt;A new example called &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/tree/main/Tests/InteropSTL"&gt;InteropSTL&lt;/a&gt; has been added to show how to use &lt;code&gt;std::string&lt;/code&gt; and &lt;code&gt;std::vector&amp;lt;char&amp;gt;&lt;/code&gt; with some Sane C++ Libraries.
You don't need to use the STL containers, this is only showing that you can absolutely &lt;em&gt;Bring Your Own Containers&lt;/em&gt; (including strings) if for whatever reason one is not interested in using &lt;code&gt;String&lt;/code&gt; and &lt;code&gt;Vector&amp;lt;&amp;gt;&lt;/code&gt; variations already included in the project.  &lt;/p&gt;
&lt;p&gt;Some details about how how this works: as a consequence of the dependencies reduction, in the past months a new virtual interface has been introduced (named &lt;code&gt;IGrowableBuffer&lt;/code&gt;) abstracting strings and writable byte buffers, allowing for all libraries not to depend on the &lt;code&gt;Strings&lt;/code&gt; or &lt;code&gt;Memory&lt;/code&gt; libraries.&lt;br&gt;
This month one more step has been done, by further optimizing it so that the only &lt;em&gt;virtual&lt;/em&gt; function call is done when physically requiring an allocation if the available growable buffer capacity is insufficient.&lt;br&gt;
Callers can always avoid this indirect function call by properly sizing the buffer before using some library.&lt;br&gt;
Previously a second virtual call was always done in the &lt;code&gt;IGrowableBuffer&lt;/code&gt; destructor, but now this has been optimized.
As the number of potential &lt;em&gt;virtual&lt;/em&gt; methods has become just one, the interface has been changed from a virtual one into a regular plain struct with a function pointer, reducing the additional indirection required by the C++ vtable dereferencing!  &lt;/p&gt;
&lt;p&gt;So now it's up to you to bring your own containers!!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a2bcb9d2"&gt;Everywhere: De-virtualize IGrowableBuffer destruction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5f70908a"&gt;Strings: Obtain encoding from GrowableBuffer&lt;T&gt; in StringBuilder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cb8bca41"&gt;InteropSTL: Show std::string and std::vector&lt;char&gt; usage with File and FileSystem libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e1467be9"&gt;InteropSTL: Show std::string and std::vector&lt;char&gt; usage with Strings library&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="tools-new-bootstrap"&gt;Tools new bootstrap&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;SC::Tools&lt;/a&gt; are self contained single C++ source files that are (automatically) compiled on the fly and linked to Sane C++ to be immediately executed.&lt;br&gt;
The mechanism used to compile them was historically involving both &lt;code&gt;Make&lt;/code&gt; on Posix and &lt;code&gt;NMake&lt;/code&gt; on Windows to rebuild &lt;code&gt;SC.cpp&lt;/code&gt; &lt;em&gt;library&lt;/em&gt; and the &lt;code&gt;SC-${TOOL_NAME}.cpp&lt;/code&gt; &lt;em&gt;script&lt;/em&gt; separately, link them and also to rebuild them only when some of their dependencies change.&lt;br&gt;
Both &lt;code&gt;Make&lt;/code&gt; and &lt;code&gt;NMake&lt;/code&gt; have now been replaced by a native &lt;code&gt;ToolsBootstrap.cpp&lt;/code&gt; that doesn't use any of the project's libraries.&lt;br&gt;
The new bootstrap does the same work as &lt;code&gt;Make&lt;/code&gt; but hardcoded on compiling the &lt;code&gt;SC.cpp&lt;/code&gt; plus the &lt;code&gt;SC-${TOOL_NAME}.cpp&lt;/code&gt; on Posix/Windows.  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ef36596e"&gt;Tools: Add ToolsBootstrap to get rid of the Makefiles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/da3cc54d"&gt;Tools: Fix time tracking for compiling Tools on older macOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0051b6dd"&gt;Tools: Fix time tracking for compiling Tools on Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/532f3a14"&gt;Tools: Improve ToolsBootstrap code clarity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8bca9513"&gt;Tools: Print how much time is being spent compiling a Tool on Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f646f509"&gt;Tools: Print how much time is being spent compiling a Tool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c37ddc9e"&gt;Tools: Support folder with spaces and unicode code points in ToolsBootstrap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="build"&gt;Build&lt;/h1&gt;
&lt;p&gt;The &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_build.html"&gt;SC::Build&lt;/a&gt; is a &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;tool&lt;/a&gt; implementing a build system generator where builds are imperatively described in C++.  &lt;/p&gt;
&lt;p&gt;This month it gets:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;switches to change the C++ standard used by projects&lt;/li&gt;
&lt;li&gt;some fixes for enabling exceptions on VS Projects&lt;/li&gt;
&lt;li&gt;makefiles avoiding to use the (quite dangerous) &lt;code&gt;rm -rf&lt;/code&gt; to remove intermediates and output directory as that was incompatible with building multiple projects in the same output folder.&lt;/li&gt;
&lt;li&gt;Also now custom arguments can be passed when using the run verb so for example, parsed after the first &lt;code&gt;--&lt;/code&gt; appended to the commandline&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;./SC.sh&lt;span class="w"&gt; &lt;/span&gt;build&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;SCTest&lt;span class="w"&gt; &lt;/span&gt;Debug&lt;span class="w"&gt; &lt;/span&gt;--&lt;span class="w"&gt; &lt;/span&gt;--arg1&lt;span class="w"&gt; &lt;/span&gt;--arg2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The above invokes the SCTest executable, as built by the SCTest project with the &lt;code&gt;--arg1&lt;/code&gt; and &lt;code&gt;--arg2&lt;/code&gt; arguments.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/92b9fe17"&gt;Build: Add support to switch the C++ standard&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7f82a06a"&gt;Build: Fix enabling Exception handling on Visual Studio projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b6e82ce2"&gt;Build: Only remove generated files in the 'clean' Makefile target&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8fb4ac8d"&gt;Build: Support passing custom arguments when using the run verb&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="test-coverage"&gt;Test Coverage&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/coverage/"&gt;Test coverage&lt;/a&gt; has been going down a little bit over the course of the past months, so a few commits have been done with the specific target of bringing it back in the ~85% range.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2e3dbf08"&gt;Everywhere: Increase test coverage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fce72f48"&gt;Process: Increase test coverage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/578d9207"&gt;AsyncStreams: Increase test coverage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ci"&gt;CI&lt;/h1&gt;
&lt;p&gt;CI was suffering from some flakiness on &lt;code&gt;FileSystemWatcher&lt;/code&gt; macOS tests.&lt;br&gt;
I suspect this has to do with how github is handling macOS VM as tests never fail locally but anyway, they are less flaky now.&lt;br&gt;
Also the new &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/tree/main/Tests/InteropSTL"&gt;InteropSTL&lt;/a&gt; is now compiled on all supported platforms to make sure it doesn't regress.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b370c72a"&gt;CI: Build with Xcode on macOS in Release configurations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c1ebc74e"&gt;CI: Compile and test InteropSTL on all platforms&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5b2d7528"&gt;CI: Extend windows runners timeout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d0cf32f1"&gt;FileSystemWatcherAsync: Reduce test flakiness on macOS (2nd attempt)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f17d0504"&gt;FileSystemWatcherAsync: Reduce test flakiness on macOS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="miscellaneous"&gt;Miscellaneous&lt;/h1&gt;
&lt;p&gt;And as always a bunch of fixes and minor additions throughout all libraries that are not sizable enough to have their own section in the blog post!
One thing to note is that the &lt;code&gt;ContainersSerialization&lt;/code&gt; library has been renamed to &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_containers_reflection.html"&gt;ContainersReflection&lt;/a&gt; as it was depending on &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_containers.html"&gt;Containers&lt;/a&gt; and &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_reflection.html"&gt;Reflection&lt;/a&gt; libraries.&lt;br&gt;
I want to thank &lt;a href="http://coz.is"&gt;Francesco (cozis) Cozzuto&lt;/a&gt; for reporting on &lt;a href="https://discord.com/invite/tyBfFp33Z6"&gt;Discord&lt;/a&gt; a couple of issues he has been finding with Valgrind!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fb1f4f58"&gt;Async: Preserve timeouts scheduling order and clamp their expiration time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c4a40c43"&gt;AsyncStreams: Refcount ZLibAPI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/67479112"&gt;ContainersReflection: Rename ContainersSerialization to ContainersReflection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ea85685f"&gt;Everywhere: Use wide characters versions of the &lt;strong&gt;FILE&lt;/strong&gt; macro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fcbe7837"&gt;Foundation: Fully qualify SC::forward to avoid confusion with std::forward&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f020a3be"&gt;Process: Do not close Process::handle like a file descriptor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/18ea45fa"&gt;SCExample: Fix printing plugin names on Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c0c5e771"&gt;Socket: Fix Socket test including IPV6 option for localhost&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/aac5e572"&gt;Socket: Make SocketIPAddress::isValid() return false for invalid socket addresses&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1d4b2eaa"&gt;Strings: Add Console::flush&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5a5c1274"&gt;Strings: Make StringView::operator== accept a StringView&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4421c8ed"&gt;Strings: Remove consecutive path separators in Path::normalize&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c16d7143"&gt;Testing: Flush every printed line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ebca6076"&gt;Testing: Get rid of the trailing 0 when printing red/green emoji&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üçÇ Sane C++ September 25</title><link href="https://pagghiu.github.io/site/blog/2025-09-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-09-30T00:00:00+02:00</published><updated>2025-09-30T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-09-30:/site/blog/2025-09-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the September 2025 update!&lt;br&gt; The main focus this month has been on breaking internal dependencies to enhance modularity.&lt;/p&gt;</summary><content type="html">&lt;h1 id="reducing-internal-dependencies"&gt;Reducing Internal Dependencies&lt;/h1&gt;
&lt;p&gt;The majority of the work this month focused on breaking &lt;strong&gt;internal&lt;/strong&gt; dependencies between libraries.&lt;/p&gt;
&lt;p&gt;The goal is for Sane C++ Libraries to be a collection of libraries that &lt;em&gt;work well together&lt;/em&gt;, rather than a monolithic &lt;em&gt;framework&lt;/em&gt;. Users should be able to use a single library in isolation without being forced to adopt the entire ecosystem.&lt;/p&gt;
&lt;p&gt;Sane C++ Libraries is not a project that forces itself to be the central heart of your software project (even if it would probably be a good idea! üòé).&lt;/p&gt;
&lt;p&gt;Balancing library isolation with the ergonomics of using multiple libraries together is challenging, but significant progress has been made.&lt;/p&gt;
&lt;p&gt;Here is the resulting graph of all internal dependencies between libraries:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_dependencies.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-09-Dependencies.svg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Key takeaways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Only libraries that depend on &lt;code&gt;Memory&lt;/code&gt; require dynamic memory allocation (currently &lt;code&gt;Containers&lt;/code&gt; and &lt;code&gt;Http&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;The entire lower row of libraries are essentially standalone, depending only on &lt;code&gt;Foundation&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Foundation&lt;/code&gt; is a minimal collection of headers designed to avoid using the Standard C++ Library and including compiler-supplied headers in the public interface.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In many cases, all you need to get started is the &lt;code&gt;Foundation&lt;/code&gt; single-file library plus any other library from the lower row!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3b2bc612"&gt;ContainersSerialization: Remove Serialization dependency on Containers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9a3c5dc9"&gt;FileSystem: Remove FileSystem dependency on File&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1f2ff68e"&gt;FileSystem: Remove FileSystem dependency on Time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/03852af7"&gt;Plugin: Remove Plugin dependency on Containers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f476ab91"&gt;Plugin: Remove Plugin dependency on Memory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1b1f20d7"&gt;Plugin: Remove Plugin dependency on Threading&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/83281e6d"&gt;SerializationText: Remove SerializationText dependency on Memory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/43b772ea"&gt;Strings: Move String and SmallString to Memory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/327bb8e3"&gt;Strings: Remove Path dependency on String&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/02bd0f2d"&gt;Strings: Remove StringBuilder dependency on Buffer and require finalize (breaking change)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/636d54bb"&gt;Strings: Remove StringBuilder dependency on String&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9e36c556"&gt;Strings: Remove StringFormat dependency on Buffer and String&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4752f1ef"&gt;Testing: Remove Testing dependency on Memory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0ec0f808"&gt;Testing: Remove Testing dependency on Strings&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="dependencies-support"&gt;Dependencies Support&lt;/h1&gt;
&lt;p&gt;To achieve the goal of reducing internal dependencies, it was necessary to break many internal sub-dependencies.&lt;/p&gt;
&lt;p&gt;The most challenging task was moving &lt;code&gt;String&lt;/code&gt; and &lt;code&gt;SmallString&lt;/code&gt; from the &lt;code&gt;Strings&lt;/code&gt; library to the &lt;code&gt;Memory&lt;/code&gt; library.&lt;/p&gt;
&lt;p&gt;Most &lt;code&gt;String&lt;/code&gt; usages were related to file and path manipulation, which is now handled by the fixed-size and native-encoding-aware &lt;code&gt;StringPath&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;While this may seem counter-intuitive, it makes perfect sense. The &lt;code&gt;Strings&lt;/code&gt; library should focus on string manipulation, and &lt;code&gt;std::string&lt;/code&gt;-like classes don't belong there as they require allocator support.&lt;/p&gt;
&lt;p&gt;In the future, alternatives to &lt;code&gt;std::string&lt;/code&gt;-like allocation will be provided. For now, anyone needing it can use &lt;code&gt;String&lt;/code&gt; and the &lt;code&gt;Global&lt;/code&gt; allocator support from &lt;code&gt;Memory&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This change caused a large refactoring across the entire project, which may have introduced some bugs (mainly due to re-working null-termination).&lt;/p&gt;
&lt;p&gt;The most significant &lt;em&gt;breaking change&lt;/em&gt; is the new requirement to call &lt;code&gt;StringBuilder::finalize&lt;/code&gt; to ensure the underlying string container or buffer is null-terminated.&lt;/p&gt;
&lt;p&gt;Please report any misbehavior or bugs you may find.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2cd13385"&gt;Foundation: De-virtualize IGrowableBuffer::getDirectAccess&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d6055f9e"&gt;Foundation: Export IGrowableBuffer and derived classes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/883e7cfb"&gt;Foundation: Implement GrowableBuffer&lt;StringPath&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/27f48bcd"&gt;Foundation: Move StringView::compare to StringSpan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c9c7aab1"&gt;Memory: Avoid losing data when tryGrowTo causes reallocation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0d9d0870"&gt;Memory: Make GrowableBuffer&lt;Buffer&gt; final&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0caf50ed"&gt;Plugin: Null terminate error messages when compiling or linking&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/beabd54b"&gt;SerializationText: Default specialization handles non-struct type&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f23e76eb"&gt;SerializationText: Use StringSpan in SerializationText&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/88b415f0"&gt;Strings: Allow custom encoding in construction of StringView from iterators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6ae66418"&gt;Strings: Avoid allocation in Path::normalize when preserving UNC prefix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c308279f"&gt;Strings: Avoid reading past end pointers during UTF decoding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/afcb4182"&gt;Strings: Do not append null-terminator in StringBuilder / StringFormat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/81c182b3"&gt;Strings: Get rid of dynamic memory allocations from Console&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/25194d8b"&gt;Strings: Make Console conversion buffer optional&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae04fbea"&gt;Strings: Make GrowableBuffer&lt;String&gt; final&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/dd4374c4"&gt;Strings: Make output the first parameter of Path::relativeFromTo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a0e22c32"&gt;Strings: Make StringPath::path private&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cc996056"&gt;Strings: Move null-termination helpers from StringConverter to String and StringBuilder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ac78c533"&gt;Strings: Remove unused member functions from StringConverter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f1e23351"&gt;Strings: Simplify StringConverter API and break dependency from Buffer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3ef05efc"&gt;Strings: Use StringSpan instead of StringView for StringFormat specifiers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2a8b5a6b"&gt;Testing: Use StringPath for library root / application root / executable paths&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="dependencies-tooling"&gt;Dependencies Tooling&lt;/h1&gt;
&lt;p&gt;Internal dependencies are now automatically computed with a Python script that also generates SVGs for documentation and a small interactive visualization.&lt;/p&gt;
&lt;p&gt;The interactive visualization can highlight the required downstream dependencies for a given set of libraries.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_dependencies.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-09-DependenciesInteractive.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is useful because it's now entirely automatic, ensuring the documentation is always in sync with the current state of internal dependencies.&lt;/p&gt;
&lt;p&gt;Finally, the CI will fail if a PR introduces a dependency that doesn't adhere to proper dependency hygiene!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3352d8f9"&gt;Dependencies: Compute minimal dependencies for each library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/64f3bb3e"&gt;Dependencies: Generate a dependencies graph .dot file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/60e48c42"&gt;Dependencies: Generate Dependencies SVG for each library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/15654f55"&gt;Dependencies: Generate the interactive dependencies graph&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/29bf55f4"&gt;Dependencies: Automatically check for accidental dependencies addition&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="build"&gt;Build&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;SC::Build&lt;/code&gt; build generator has been transitioned into an application rather than a library.&lt;/p&gt;
&lt;p&gt;The main driver for this change is its significant number of internal dependencies, which makes little sense to reuse as a library.&lt;/p&gt;
&lt;p&gt;A few fixes have also been made.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b079772c"&gt;Build: Make Build just a tool rather than a library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1cc5c5af"&gt;Build: Fix incorrect generation of Xcode project&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/909090f1"&gt;Build: Only define rules relevant to requested targets in Makefiles&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="gdb-pretty-printer"&gt;GDB Pretty Printer&lt;/h1&gt;
&lt;p&gt;A pretty printer is an extension for a debugger that displays data structures in a more human-readable format. For example, it can decode a string with the proper UTF encoding or show the elements of a container rather than its raw implementation details. This is very useful when debugging and is often taken for granted when using the C++ standard library.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://x.com/pagghiu_/status/1964226245010350512" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/2025-09-GDBPrettyPrinter.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For a project that doesn't use the Standard Library, creating pretty printers for its users is almost a necessity.&lt;/p&gt;
&lt;p&gt;The project already had &lt;code&gt;LLDB&lt;/code&gt; and &lt;code&gt;MSVC&lt;/code&gt; pretty printers (debug visualizers), with &lt;code&gt;GDB&lt;/code&gt; being the only one missing. A new GDB debug visualizer has been added, so be sure to give it a try if &lt;code&gt;GDB&lt;/code&gt; is your debugger of choice!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d7de5f12"&gt;DebugVisualizer: Add a GDB debug visualizer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="contributions"&gt;Contributions&lt;/h1&gt;
&lt;p&gt;This month, the project received some really useful contributions from &lt;a href="http://coz.is"&gt;Francesco Cozzuto&lt;/a&gt; (cozis)!&lt;/p&gt;
&lt;p&gt;This was also an opportunity to fix some issues in the CI for contributors that were not properly set up.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/57cc066e"&gt;Async: Use epoll_pwait instead of epoll_pwait2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b2515366"&gt;Build: Add "DebugValgrind" build for SCTest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/dc8f428d"&gt;FileSystem: Add Operations::getCurrentDirectory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d65ee98f"&gt;FileSystem: Run clang-format&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4451c6f1"&gt;CI: Allow running the CI jobs on every branch of the repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d6ae3d17"&gt;CI: Trigger "Documentation and Code Coverage" workflow on pull requests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="http"&gt;Http&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;SC::Http&lt;/code&gt; module has received some improvements to its URL parser, mainly by extending its test coverage.&lt;/p&gt;
&lt;p&gt;However, this is just a small step. &lt;code&gt;SC::Http&lt;/code&gt; is still in a üü• Draft state and will require substantial work before it can even be considered üü® MVP.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3d351d95"&gt;Http: Add UTF8 tests for HttpURL Parser&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/531a317a"&gt;Http: Improve URL parser to handle case sensitivity, IPV6 and invalid ports&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/424fa577"&gt;Http: Improve URL Parser to test more edge cases&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="miscellaneous"&gt;Miscellaneous&lt;/h1&gt;
&lt;p&gt;As with every month, here is a bunch of random fixes!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3582d554"&gt;Everywhere: Support running test suite under XCTest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/75765a45"&gt;File: Check for errors during stdin / stdout / stderr handles duplication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/22e0f32f"&gt;Process: Modify stdout / stderr Span to return how many bytes have been read&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üåä Sane C++ August 25</title><link href="https://pagghiu.github.io/site/blog/2025-08-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-08-31T00:00:00+02:00</published><updated>2025-08-31T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-08-31:/site/blog/2025-08-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for August 2025!&lt;br&gt; This month we finally have Single File Libs!!!&lt;/p&gt;</summary><content type="html">&lt;h1 id="single-file-libraries"&gt;Single File Libraries&lt;/h1&gt;
&lt;p&gt;One of the core principles of this project is to be "Easy to Integrate".&lt;br&gt;
I'm always looking for ways to lower the barrier to entry for using these libraries in your own projects.&lt;/p&gt;
&lt;p&gt;To that end, I'm happy to announce that all Sane Cpp Libraries are now available as &lt;strong&gt;single-file libraries&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;This means you can now get the power of a library like &lt;code&gt;SC::Async&lt;/code&gt; or &lt;code&gt;SC::Process&lt;/code&gt; by simply dropping a single &lt;code&gt;.h&lt;/code&gt; file into your project.&lt;br&gt;
No complex build system integration, no scripts to run‚Äîjust include the header and build the source file. It's that simple.&lt;/p&gt;
&lt;p&gt;There are two amalgamator tools written in Python and Javascript, that you can use to generate the single file libs locally on a checked out copy of the repo.
Alternatively you can use the browser-based JavaScript amalgamator available at &lt;a href="https://pagghiu.github.io/SaneCppLibraries/single_file_libs.html"&gt;single_file_libs.html&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/single_file_libs.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAmalgamationGenerator.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/single_file_libs.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAmalgamationExample.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0a0a269a"&gt;SingleFileLibs/Javascript: Add javascript single file libs amalgamator (in-browser + cli)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8ddb8370"&gt;SingleFileLibs/Python: Add python single file libs amalgamator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/304be752"&gt;SingleFileLibs/Python: Print total lines of code at the end of library tables&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="threading"&gt;Threading&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Threading&lt;/code&gt; library received some love this month and has now been promoted to &lt;strong&gt;Usable&lt;/strong&gt; status!&lt;/p&gt;
&lt;p&gt;Here are some of the key additions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SC::Semaphore&lt;/code&gt;&lt;/strong&gt;: A classic semaphore for controlling access to a resource.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SC::Barrier&lt;/code&gt;&lt;/strong&gt;: A synchronization primitive that allows a set of threads to wait for each other to reach a certain point before continuing.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SC::RWLock&lt;/code&gt;&lt;/strong&gt;: A reader-writer lock that allows concurrent access for read-only operations, but exclusive access for write operations.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Atomic&amp;lt;T&amp;gt;&lt;/code&gt; improvements&lt;/strong&gt;: The atomic types have been improved with more operations and better memory ordering support for MSVC.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I also fixed a tricky "lost wake-up" bug in &lt;code&gt;EventObject&lt;/code&gt;'s condition variable signaling, which improves the robustness of thread synchronization.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0f14d189"&gt;Threading: Add Barrier&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/29f4107c"&gt;Threading: Add RWLock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4d2a9fb2"&gt;Threading: Add Semaphore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9e8de5b5"&gt;Threading: Improve Atomic&lt;bool&gt; and Atomic&lt;int32_t&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/20c6700c"&gt;Threading: Prevent EventObject lost wake-up and fix Mutex destructor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ef558303"&gt;Threading: Promote Threading to Usable&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async"&gt;Async&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Async&lt;/code&gt; library received several important fixes, particularly for the &lt;code&gt;io_uring&lt;/code&gt; backend on Linux and the IOCP backend on Windows.&lt;br&gt;
These changes improve the reliability and prevent potential hangs or asserts when dealing with asynchronous file and pipe operations.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/53b90663"&gt;Async: Allow re-using AsyncProcessExit on Linux under io_uring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6882e371"&gt;Async: Do not expect IOCP cancellation packet if AsyncFilePoll handle is already closed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/55651c5e"&gt;Async: Do not process AsyncFilePoll cancellations on io_uring backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0a62eae8"&gt;Async: Handle file descriptor read or write succeeding synchronously on Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/815c2102"&gt;Async: Re-organize files for more effective unity build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/60118293"&gt;Async: Support async pipe non-blocking reads&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2ca79bb6"&gt;Async: Test synchronous pipe reads from ThreadPool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="asyncstreams"&gt;AsyncStreams&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;AsyncStreams&lt;/code&gt; has been promoted to &lt;strong&gt;MVP&lt;/strong&gt; (Minimum Viable Product), meaning its core feature set is in place for concurrently reading, writing, and transforming byte streams.  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a37078a3"&gt;AsyncStreams: Add async request test variation for blocking and non-blocking pipes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e1b307b9"&gt;AsyncStreams: Process leftover input bytes before finalizing zlib stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1d0e047e"&gt;AsyncStreams: Promote AsyncStreams to MVP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="algorithms"&gt;Algorithms&lt;/h1&gt;
&lt;p&gt;The Algorithms library has been removed, or to be more precise it has been merged to Containers.
The reason is pretty simple, I am not a great fan of using std-like algorithms aside from very simple usages.
I find that any non-trivial usage of std C++ &lt;code&gt;&amp;lt;algorithm&amp;gt;&lt;/code&gt; make code more difficult to read and reason about.&lt;br&gt;
For this reason Sane C++ &lt;code&gt;Algorithms&lt;/code&gt; library was only bringing 3 functions (&lt;code&gt;removeIf&lt;/code&gt;, &lt;code&gt;sort&lt;/code&gt; and &lt;code&gt;find&lt;/code&gt;) so it made really little sense.&lt;br&gt;
If you need std-like algorithms, just include &lt;code&gt;&amp;lt;algorithm&amp;gt;&lt;/code&gt; or add some other library providing them to your project.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/76158a1b"&gt;Algorithms: Revoke its standalone library status moving it to Containers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="process"&gt;Process&lt;/h1&gt;
&lt;p&gt;Process library has been improved with arguments quoting on Windows.
There's now better support for redirecting standard I/O and better support for ipc pipes in general, that has also involved the File library.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2660f3d7"&gt;Process: Automatically set child process standard IO inherit flags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3b802fbb"&gt;Process: Check the correct variable before assigning environmentMemory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1d146ea0"&gt;Process: Increment environment storage to 16K chars&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/03199676"&gt;Process: Quote arguments on Windows with any UTF encoding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e154dafa"&gt;Process: Validate external pipes used to redirect child process IO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="strings"&gt;Strings&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Path&lt;/code&gt; and &lt;code&gt;StringBuilder&lt;/code&gt; classes now have better support for to handle UTF8 and UTF16 encodings.&lt;br&gt;
Throughout the libraries the philosophy is to keep strings in whatever encoding they've been given.
Strings are lazy converted only when required by some OS API and in some cases this could lead to hitting asserts due to unsupported encodings.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6507b49e"&gt;Strings: Check for null iterator before calling memchr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6cdb0436"&gt;Strings: Remove StringView::slice methods using bytes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a6ab717e"&gt;Strings: Support mixed encodings in Path&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2ad27c99"&gt;Strings: Support mixed encodings in StringBuilder::appendReplaceAll&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bd272a53"&gt;Strings: Support mixed encodings in StringView::split{Before | After}&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="build"&gt;Build&lt;/h1&gt;
&lt;p&gt;The self-hosted C++ build system can now generate workspace files that group multiple projects.
This has been done to support testing compilation of the Single File Libs in the CI, but it can be useful in general.&lt;/p&gt;
&lt;p&gt;If absolute paths are used when adding files to a project, they will be automatically made relative to the project root directory.&lt;/p&gt;
&lt;p&gt;Some better checking in makefile generation has been added, to avoid trying to build non-existing configurations.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/655ca98c"&gt;Build: Automatically compute relative paths when required for files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/71182e79"&gt;Build: Generate workspace files grouping multiple projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d9e09efd"&gt;Build: Print error when an unsupported configuration is requested&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="file"&gt;File&lt;/h1&gt;
&lt;p&gt;The file library gains methods to open stdin / stderr and stdout cross-platform.&lt;br&gt;
Also the API for Pipe has been changed to make sure properly setting inheritable and blocking flags during creation, as in some platforms (Windows) some of these behaviors cannot be changed later (mainly setting OVERLAPPED_IO flags).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e7ff8fb5"&gt;File: Add methods to open stdin / stderr / stdout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/43bb44e5"&gt;File: Enforce setting inheritable and blocking flags during pipe creation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="other-improvements"&gt;Other Improvements&lt;/h1&gt;
&lt;p&gt;Beyond these major updates, August included a bunch of other fixes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CI&lt;/strong&gt;: The continuous integration pipeline now automatically generates and builds the single-file libraries to ensure they are always up-to-date and working correctly.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dependencies&lt;/strong&gt;: The LOC update is handled by the Python amalgamator script and the dependency .json generator is a separate script&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Everywhere&lt;/strong&gt;: Fix some warnings under clang-cl and ASAN warning about using out of scope stack memory for FileSystemIterator&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tools&lt;/strong&gt;: Generate PDBs on windows so that tools can be debugged&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/80f11581"&gt;CI: Add single file libs generation and build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a9deffea"&gt;CI: Always apt-get update before apt-get install&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1a9662f9"&gt;Dependencies: Add script to just update library dependencies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d2c2af71"&gt;Documentation: Update LOC for all libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c1f74b45"&gt;Everywhere: Declare FileSystemIterator::FolderState before FileSystemIterator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d0c3b8c6"&gt;Everywhere: Fix clang-cl warnings and unity build issues&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8147fe99"&gt;Everywhere: Remove nodiscard when used with Result&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e80abd40"&gt;FileSystem: Fix conversion of precise error messages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5c52cc56"&gt;Plugin: Propagate host executable sanitization flags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d412fd19"&gt;Testing: Enforce TestReport not printing anything under quiet mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cd429f4d"&gt;Tools: Generate PDB when building tools on Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/749742c5"&gt;Tools: Run SC-format with default event loop backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/70b2d740"&gt;Tools: Update 7zr to 25.01&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üèñÔ∏è Sane C++ July 25</title><link href="https://pagghiu.github.io/site/blog/2025-07-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-07-31T00:00:00+02:00</published><updated>2025-07-31T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-07-31:/site/blog/2025-07-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for July 2025!&lt;br&gt; It's dependency cleanup month! üßπüßπüßπ&lt;/p&gt;</summary><content type="html">&lt;h1 id="automatic-dependency-and-loc"&gt;Automatic Dependency and LOC&lt;/h1&gt;
&lt;p&gt;List of dependencies between libraries and the number of lines of code (LOC) composing them gives an immediate complexity indication.&lt;/p&gt;
&lt;p&gt;For this reason from this month I've started publishing:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The reported lines of code (LOC) for each library&lt;/li&gt;
&lt;li&gt;The dependencies between libraries &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An automatic python scripts now updates both inside each library documentation page and also to Readmes and elsewhere.&lt;/p&gt;
&lt;p&gt;This has been the input to start attacking and removing un-needed inter-dependencies between libraries.&lt;/p&gt;
&lt;p&gt;This has in turn freed many libraries from dynamic allocation!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_dependencies.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCDependencies.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/libraries.html" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCLibrariesLOC.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/195ceea"&gt;Documentation: Add lines of code count to Libraries.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e91d14a"&gt;Documentation: Report dependencies between libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/59f0bfc"&gt;Documentation: Report lines of code count of each library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/07e100e"&gt;Documentation: Update LOC also for README.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="foundation-cleanup"&gt;Foundation cleanup&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Foundation&lt;/code&gt; library received several updates in order to make it as minimal as possible.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;StringViewData&lt;/code&gt; was renamed to &lt;code&gt;StringSpan&lt;/code&gt; for better clarity.&lt;/li&gt;
&lt;li&gt;A new &lt;code&gt;StringPath&lt;/code&gt; class was introduced to handle file system paths with maximum length constraints and UTF-16 conversion.&lt;/li&gt;
&lt;li&gt;Rarely used methods in &lt;code&gt;Span&amp;lt;T&amp;gt;&lt;/code&gt; were moved to where they are actually used, and some unused &lt;code&gt;TypeTraits&lt;/code&gt; were removed.&lt;/li&gt;
&lt;li&gt;Backtrace printing for &lt;code&gt;Assert&lt;/code&gt; was implemented on Windows.&lt;/li&gt;
&lt;li&gt;Some classes have been moved elsewhere (like &lt;code&gt;Limits.h&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All of these building blocks have been necessary to allow removal of several inter-dependencies between libraries in the project.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b80d5e7"&gt;Foundation: Add StringPath holding the maximum length of a file system path&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/db94f0d"&gt;Foundation: Add write and append null terminated to StringSpan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ab3d724"&gt;Foundation: Implement Assert backtrace printing for Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/366ac35"&gt;Foundation: Move IntrusiveDoubleLinkedList to Async&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6b6a99b"&gt;Foundation: Move Limits.h to Testing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a63a1c1"&gt;Foundation: Move rarely used Span&lt;T&gt; methods where they're actually used&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2a20fb1"&gt;Foundation: Refactor StringPath functionality in a reusable StringNativeFixed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/626b59b"&gt;Foundation: Remove some rarely used TypeTraits&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a91fefc"&gt;Foundation: Remove some useless macros&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8485f00"&gt;Foundation: Rename StringViewData to StringSpan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f773a79"&gt;Foundation: Use Result in StringSpan to communicate error reason&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async-dependencies"&gt;Async dependencies&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;Async&lt;/code&gt; is an advanced multi-platform async IO library with a feature set that is progressively expanding.&lt;/p&gt;
&lt;p&gt;The biggest library of the project has now no more dependency on &lt;code&gt;Process&lt;/code&gt; library.
Combining this with all the other dependency &lt;em&gt;cleanups&lt;/em&gt; of this month makes the library set of transitive dependencies much cleaner.&lt;/p&gt;
&lt;p&gt;Previously the &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; Library was depending on almost the entire rest of Sane C++ Libraries!&lt;/p&gt;
&lt;p&gt;Now the entire list of dependencies for &lt;code&gt;Async&lt;/code&gt; is &lt;code&gt;File&lt;/code&gt;, &lt;code&gt;FileSystem&lt;/code&gt;, &lt;code&gt;Foundation&lt;/code&gt;, &lt;code&gt;Socket&lt;/code&gt;, &lt;code&gt;Threading&lt;/code&gt;, &lt;code&gt;Time&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCAsyncDependencies.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsyncDependencies.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4091f2e"&gt;Async: Remove dependency from Process library&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="filesystemwatcher-dependencies"&gt;FileSystemWatcher Dependencies&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;FileSystemWatcher&lt;/code&gt; has probably been the hardest dependency cleanup to finish.&lt;/p&gt;
&lt;p&gt;In addition to removing dependencies from &lt;code&gt;Strings&lt;/code&gt; and &lt;code&gt;Memory&lt;/code&gt; libraries, it has been necessary to remove dependency from the &lt;code&gt;Async&lt;/code&gt; library too.
The reason is that &lt;code&gt;FileSystemWatcher&lt;/code&gt; supports both a thread based backend or an event loop based one.&lt;/p&gt;
&lt;p&gt;Now the role of integrating &lt;code&gt;FileSystemWatcher&lt;/code&gt; with &lt;code&gt;Async&lt;/code&gt; has been isolated in the &lt;code&gt;FileSystemWatcherAsync&lt;/code&gt; library, through some minimal runtime virtual interface usage.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/45a1232"&gt;FileSystemWatcher: Reduce manual string handling with StringPath&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/563c03e"&gt;FileSystemWatcher: Remove dependency from Async and File libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/29829dd"&gt;FileSystemWatcher: Remove dependency from Memory library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a250300"&gt;FileSystemWatcher: Use StringPath where appropriate to simplify code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="filesystem-dependencies"&gt;FileSystem Dependencies&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;FileSystem&lt;/code&gt; library underwent significant refactoring to simplify its code and reduce dependencies:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Platform-specific implementations were merged into &lt;code&gt;FileSystemOperations&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Methods like &lt;code&gt;makeDirectoryRecursive&lt;/code&gt; were added, while &lt;code&gt;removeEmptyDirectoryRecursive&lt;/code&gt; was removed.&lt;/li&gt;
&lt;li&gt;Dependencies on &lt;code&gt;Containers&lt;/code&gt;, &lt;code&gt;Strings&lt;/code&gt;, and &lt;code&gt;Memory&lt;/code&gt; libraries were eliminated, making the library more lightweight and focused.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Library now only depends on &lt;code&gt;Foundation&lt;/code&gt; and &lt;code&gt;Time&lt;/code&gt; libraries.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/67a5dd8"&gt;FileSystem: Get rid of removeEmptyDirectoryRecursive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6f72723"&gt;FileSystem: Implement FileSystemOperations makeDirectoryRecursive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/88d3db4"&gt;FileSystem: Merge platform specific implementation in FileSystemOperations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b5b0470"&gt;FileSystem: Move FileSystemOperations to FileSystem::Operations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d82c851"&gt;FileSystem: Re-implement FileSystemDirectories methods in FileSystemOperations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/106b621"&gt;FileSystem: Remove dependency from Containers library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f966926"&gt;FileSystem: Remove dependency from String and Memory libraries&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="filesystemiterator-dependencies"&gt;FileSystemIterator dependencies&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;FileSystemIterator&lt;/code&gt; has been already cleaned up during path month's effort.
This month however the extremely error prone manual string handling has been reduced through the use of the new StringPath class&lt;/p&gt;
&lt;p&gt;Library now only depends on &lt;code&gt;Foundation&lt;/code&gt; library.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b774139"&gt;FileSystemIterator: Reduce manual string handling using StringPath&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="file-dependencies"&gt;File dependencies&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;File&lt;/code&gt; has also seen removal of dependencies from &lt;code&gt;Memory&lt;/code&gt; and &lt;code&gt;Strings&lt;/code&gt;, by using &lt;code&gt;StringPath&lt;/code&gt; for simplifying string handling.&lt;/p&gt;
&lt;p&gt;Library now only depends on &lt;code&gt;Foundation&lt;/code&gt; library.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/33e68f9"&gt;File: Remove dependency from Memory and Strings Libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b1da42d"&gt;File: Rename FileDescriptor.cpp to just File.cpp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c19572a"&gt;File: Use StringPath where appropriate to simplify code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="process-dependencies"&gt;Process dependencies&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Process&lt;/code&gt; library has seen also dependency from &lt;code&gt;Strings&lt;/code&gt; and &lt;code&gt;Memory&lt;/code&gt; library removed, through some lightweight runtime abstraction (&lt;code&gt;IGrowableBuffer&lt;/code&gt;).
This interface abstracts read/write operation to/from &lt;code&gt;Strings&lt;/code&gt; and &lt;code&gt;Buffers&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Library now only depends on &lt;code&gt;File&lt;/code&gt; and &lt;code&gt;Foundation&lt;/code&gt; libraries.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1a81233"&gt;Process: Merge ProcessDescriptor.h to Process.h&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/89c5385"&gt;Process: Remove dependency from Strings library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a2addfa"&gt;Process: Use IGrowableBuffer when outputting to String / Buffer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="socket-dependencies"&gt;Socket dependencies&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Socket&lt;/code&gt; libraries has been streamlined by removing dependencies on &lt;code&gt;Strings&lt;/code&gt;, &lt;code&gt;File&lt;/code&gt;, &lt;code&gt;Threading&lt;/code&gt; and &lt;code&gt;Time&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Library now only depends on &lt;code&gt;Foundation&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Dynamic allocation status: No allocation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/143a4c7"&gt;Socket: Remove dependency from File library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7538b89"&gt;Socket: Merge SocketDescriptor.h to Socket.h&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/da872ac5"&gt;Socket: Remove dependency from Threading library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9c89b2f7"&gt;Socket: Remove dependency from Time library&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="strings-improvements"&gt;Strings improvements&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;Strings&lt;/code&gt; library saw several improvements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;StringNative&lt;/code&gt; was renamed to &lt;code&gt;SmallStringNative&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Path&lt;/code&gt; functionality was moved from the &lt;code&gt;FileSystem&lt;/code&gt; library to &lt;code&gt;Strings&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;StringConverter&lt;/code&gt; was updated to accept &lt;code&gt;StringSpan&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dynamic allocation status: Allocates dynamic memory&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cecc951"&gt;Strings: Change StringConverter to accept StringSpan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8568bbd"&gt;Strings: Fix clang warning about GrowableBuffer destructor marked as final&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1d496d2"&gt;Strings: Move Path from FileSystem to Strings library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/40e41b8"&gt;Strings: Rename StringNative to SmallStringNative&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="other-improvements"&gt;Other improvements&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;The CI pipeline was updated to replace Windows Server 2019 with Windows Server 2025.&lt;/li&gt;
&lt;li&gt;Code was cleaned up to remove warnings reported by &lt;code&gt;clangd&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Debug Visualizers have been fixed&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Detailed list of commits:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/10c0296"&gt;CI: Replace Windows Server 2019 with Windows Server 2025&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a1021cb"&gt;Containers: Move StrongID from Foundation to Containers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/585ee59"&gt;DebugVisualizer: Fix StringSpan / StringView visualizers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8945865"&gt;Everywhere: Remove /&lt;em&gt; &lt;/em&gt;/ style comments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/72fde39"&gt;Everywhere: Get rid of some warnings reported by clangd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9a922f6"&gt;Tools: Update 7zr to 25.00&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚òÄÔ∏è Sane C++ June 25</title><link href="https://pagghiu.github.io/site/blog/2025-06-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-06-30T00:00:00+02:00</published><updated>2025-06-30T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-06-30:/site/blog/2025-06-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for June 2025!&lt;br&gt; This month brings a new async file system operations, an enhanced UDP socket support in &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; and some dependency cleanup with the Memory library split from Foundation!&lt;/p&gt;</summary><content type="html">&lt;h1 id="async-file-system-operations"&gt;Async File System Operations&lt;/h1&gt;
&lt;p&gt;A major new feature this month is the unified &lt;code&gt;AsyncFileSystemOperation&lt;/code&gt; that provides async file system operations across all platforms. This replaces the previous &lt;code&gt;AsyncFileClose&lt;/code&gt; and &lt;code&gt;AsyncSocketClose&lt;/code&gt; with a more comprehensive and consistent API.&lt;/p&gt;
&lt;p&gt;The new operations include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;open/close&lt;/strong&gt; (File)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;read/write&lt;/strong&gt; (File)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;copyFile/copyDirectory&lt;/strong&gt; (File / Directory)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rename&lt;/strong&gt; (File / Directory)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;removeFile/removeEmptyDirectory&lt;/strong&gt;: (File / Directory)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eventually &lt;code&gt;AsyncFileRead&lt;/code&gt; / &lt;code&gt;AsyncFileWrite&lt;/code&gt; will be renamed to something like &lt;code&gt;AsyncPipeRead&lt;/code&gt; / &lt;code&gt;AsyncPipeWrite&lt;/code&gt;, losing their threading support needed for buffered files, now that dedicated fs read / write operation exist.&lt;/p&gt;
&lt;p&gt;Under the hood, this leverages platform-specific async APIs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;io_uring&lt;/code&gt; on Linux&lt;/li&gt;
&lt;li&gt;&lt;code&gt;IOCP&lt;/code&gt; (I/O Completion Ports) on Windows.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The abstraction handles the complexity of these very different APIs while providing a consistent interface.&lt;/p&gt;
&lt;p&gt;Here's an example (extracted from the test suite) on how it's meant to be used:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCAsyncFileSystemOperation.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsyncFileSystemOperation.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Detailed list of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cf2dac7"&gt;Async: Add AsyncFileSystemOperation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5eea13c"&gt;Async: Add "open" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1656732"&gt;Async: Add "close" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3eb4d4e"&gt;Async: Add "read" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1656732"&gt;Async: Add "write" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/04a77a1"&gt;Async: Add "copyFile" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/427a70c"&gt;Async: Add "rename" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8033b48"&gt;Async: Add "removeFile" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/427a70c"&gt;Async: Add "removeDirectory" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4bee0c0"&gt;Async: Add "copyDirectory" async file system operation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async-udp-socket-operations"&gt;Async UDP Socket Operations&lt;/h1&gt;
&lt;p&gt;New async operations for UDP sockets have been added: &lt;code&gt;sendTo&lt;/code&gt; and &lt;code&gt;receiveFrom&lt;/code&gt; for unconnected sockets. &lt;/p&gt;
&lt;p&gt;This is particularly useful for UDP networking scenarios where you need to send/receive from multiple endpoints.&lt;/p&gt;
&lt;p&gt;The implementation handles the platform differences elegantly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Linux&lt;/strong&gt;: Uses &lt;code&gt;io_uring&lt;/code&gt; with &lt;code&gt;IORING_OP_SENDMSG&lt;/code&gt; and &lt;code&gt;IORING_OP_RECVMSG&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Windows&lt;/strong&gt;: Uses &lt;code&gt;IOCP&lt;/code&gt; with &lt;code&gt;WSASendTo&lt;/code&gt; and &lt;code&gt;WSARecvFrom&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here's how the async sendTo operation looks in practice:
&lt;a href="https://pagghiu.github.io/site/blog/SCAsyncSendTo.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsyncSendTo.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;And the corresponding receiveFrom operation:
&lt;a href="https://pagghiu.github.io/site/blog/SCAsyncReceiveFrom.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsyncReceiveFrom.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7a728f2"&gt;Async: Add sendTo and receiveFrom requests for unconnected sockets&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="memory-library-split"&gt;Memory Library Split&lt;/h1&gt;
&lt;p&gt;One important change this mont is the split of memory management components from the Foundation library into a dedicated Memory library.&lt;/p&gt;
&lt;p&gt;The goal has been isolating &lt;code&gt;Segment&lt;/code&gt;, &lt;code&gt;Buffer&lt;/code&gt;, &lt;code&gt;Globals&lt;/code&gt;, and &lt;code&gt;VirtualMemory&lt;/code&gt; - all the components that perform dynamic allocation.&lt;/p&gt;
&lt;p&gt;This change brings much clearer dependency boundaries. Now if something depends only on Foundation, you can be certain it doesn't perform any dynamic allocation. This is particularly important for embedded systems, low-level libraries, or any code that needs to avoid heap allocation.&lt;/p&gt;
&lt;p&gt;The split involved moving 46 files and updating countless include statements across the codebase. 
While this was a slighltly distrupting refactoring effort, it makes the library architecture much more predictable and easier to reason about.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/07a30bd"&gt;Memory: Split Segment, Buffer, Globals and VirtualMemory out of Foundation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="filesystemiterator-and-filesystemwatcher-dependency-cleanup"&gt;FileSystemIterator and FileSystemWatcher Dependency Cleanup&lt;/h1&gt;
&lt;p&gt;This month saw significant work on cleaning up the dependency graph, which demonstrates the commitment to the &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_principles.html"&gt;Sane C++ Libraries principles&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;FileSystemWatcher&lt;/code&gt; and &lt;code&gt;FileSystemIterator&lt;/code&gt; have been cleaned up to remove unnecessary dependencies on &lt;code&gt;Strings&lt;/code&gt; and &lt;code&gt;Containers&lt;/code&gt;, making the dependency graph cleaner and more predictable.&lt;/p&gt;
&lt;p&gt;As part of this cleanup, &lt;code&gt;FileSystemIterator&lt;/code&gt; now requires you to pass in a fixed span of &lt;code&gt;FileSystemIterator::FolderState&lt;/code&gt; that the iterator will use, avoiding any internal allocation.&lt;/p&gt;
&lt;p&gt;Also &lt;code&gt;FileSystemWatcher&lt;/code&gt; got the &lt;em&gt;no allocation&lt;/em&gt; treatment with the only exceptionon Linux where it's still doing a small (single) allocation holding paths for watching sub-directories (in case of recursive watch).
One could tecnically request the span of memory to use to the caller but maybe it's not great to bend the API for all other backends just for this one specific Linux difference. This topic will be re-visited in the future eventually maybe providing some hooks to remove also this very last allocation.&lt;/p&gt;
&lt;p&gt;This kind of architectural hygiene is crucial for maintaining the "bloat free" and "easy to integrate" principles - when libraries have minimal, clear dependencies, they're much easier to understand, test, and integrate into existing projects!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2f59c19"&gt;FileSystemWatcher: Remove dependency from Strings, Containers and FileSystemIterator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7b743ee"&gt;FileSystemIterator: Remove dependency from Strings and Containers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="foundation"&gt;Foundation&lt;/h1&gt;
&lt;p&gt;A new &lt;code&gt;SC::StringViewData&lt;/code&gt; class has been added to &lt;code&gt;Foundation&lt;/code&gt; and it can be used in place of &lt;code&gt;SC::StringView&lt;/code&gt; when parsing is not needed.&lt;/p&gt;
&lt;p&gt;It's a non-owning view over a string and the most common use case is to pass it in and out of OS API as is for file system paths.
As it holds also the encoding, some libraries will convert the string in some internal buffer before passing it to OS api.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5ee30f6"&gt;Foundation: Add StringViewData&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="socket"&gt;Socket&lt;/h1&gt;
&lt;p&gt;Added methods to shutdown sockets and get string representations of SocketIPAddress.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3e036b5"&gt;Socket: Add method to shutdown sockets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3271b9a"&gt;Socket: Add method to return SocketIPAddress string representation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="other-improvements"&gt;Other improvements&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/94c8849"&gt;Algorithms: Add contains and output found index from findIf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c8e251b"&gt;File: Fix infinite loop on FileDescriptor::write (Windows)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üå∏ Sane C++ May 25</title><link href="https://pagghiu.github.io/site/blog/2025-05-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-05-31T00:00:00+02:00</published><updated>2025-05-31T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-05-31:/site/blog/2025-05-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for May 2025!&lt;br&gt; This month a new object called &lt;code&gt;AsyncSequence&lt;/code&gt; has been added to &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; together with a good list of smaller improvements!&lt;/p&gt;</summary><content type="html">&lt;h1 id="deepwiki"&gt;DeepWiki&lt;/h1&gt;
&lt;p&gt;I've been feeding the Sane C++ Libraries repo to &lt;a href="https://deepwiki.com" target="_blank"&gt;DeepWiki&lt;/a&gt; and I am actually surprised by how good it has understood the overall codebase structure!
Some details are wrong and sometimes it analyzes details that are not really worth that much, but it's really amazing how much insight it provides at a glance to someone who is not aware of the internals of the project.&lt;/p&gt;
&lt;p&gt;Make sure to check it out at:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://deepwiki.com/Pagghiu/SaneCppLibraries"&gt;https://deepwiki.com/Pagghiu/SaneCppLibraries&lt;/a&gt;
&lt;a href="https://deepwiki.com/Pagghiu/SaneCppLibraries" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCDeepWiki.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="async-sequence"&gt;Async Sequence&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;AsyncSequence&lt;/code&gt; allows controlling requests execution order, and it's implemented as a simple linked list queue that can simplify some common use cases.&lt;/p&gt;
&lt;p&gt;For example &lt;code&gt;AsyncSequence&lt;/code&gt; can be used to issue an &lt;code&gt;AsyncSocketConnect&lt;/code&gt; request and then a sequence of &lt;code&gt;AsyncSocketSend&lt;/code&gt; or a &lt;code&gt;AsyncSocketReceive&lt;/code&gt; immediately after.
&lt;code&gt;AsyncSequence&lt;/code&gt; avoids the need to start such additional requests in the callback of the previously finished requests.&lt;/p&gt;
&lt;p&gt;This is a (not so small) extract of the test suite where &lt;code&gt;AsyncSequence&lt;/code&gt; is being used to &lt;em&gt;queue&lt;/em&gt; two writes so that they will happen in the correct order.
&lt;a href="https://pagghiu.github.io/site/blog/SCAsyncSequence.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsyncSequence.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2ec9cd28"&gt;Async: Add AsyncSequence to control async requests execution order&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async-cancellations"&gt;Async Cancellations&lt;/h1&gt;
&lt;p&gt;Lastly Async requests cancellation handling has been consolidated between all backends and it's more precise and consistent.
Some async backends (Windows &lt;code&gt;IOCP&lt;/code&gt; / Linux &lt;code&gt;io_uring&lt;/code&gt;) post cancellations notification to the kernel queue.
This is now properly handled by stepping the event loop one more time.&lt;/p&gt;
&lt;p&gt;The remaining changes try to consistently track multiple edge cases when processing cancellations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cancelAsync&lt;/code&gt; is called only if an activateAsync has been previously called&lt;/li&gt;
&lt;li&gt;&lt;code&gt;teardownAsync&lt;/code&gt; is called only if setupAsync has been previously called&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Honestly trying to unify these kind of behaviors between APIs that are so wildly different is really challenging!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b9e466af"&gt;Async: Consolidate state machine cancellation handling between all backends&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async-improvements"&gt;Async Improvements&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; has been receiving some additional fine tuning reducing the size of all AsyncRequest, removing some common fields like eventIndex and event loop pointer.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AsyncFileClose&lt;/code&gt; and &lt;code&gt;AsyncSocketClose&lt;/code&gt; have finally seen their return code moved to completion data and AsyncSocketConnect will stop its watcher in case of errors.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/10e409b4"&gt;Async: Add method to create async UDP socket associated with event loop&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/53e17bce"&gt;Async: Avoid enabling Socket connect watcher on errors (Posix)&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b9e0a77f"&gt;Socket: Add method to check SocketIPAddress validity&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f4b18d79"&gt;Async: Do not access request after completion unless it has been reactivated&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/538f769a"&gt;Async: Allow removing file / socket association with event loop&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a65f19f9"&gt;Async: Move AsyncFileClose return code to completion data&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0e713590"&gt;Async: Remove useless [[nodiscard]]&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5aad3aa6"&gt;Async: Split AsyncSocketAcceptData out of AsyncSocketAccept&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6c98c709"&gt;Async: Declare per-request debug name only when SC_ASYNC_ENABLE_LOG is defined&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/46543ed5"&gt;Async: Remove pointer to event loop inside async requests&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6425ccb1"&gt;Async: Store 2 bytes of user flags in AsyncRequest&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fb27bfa7"&gt;Async: Do not store event index per each request&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ed75c2db"&gt;Async: Migrate code to completion data in AsyncSocketClose&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üí§ Sane C++ April 25</title><link href="https://pagghiu.github.io/site/blog/2025-04-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-04-30T00:00:00+02:00</published><updated>2025-04-30T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-04-30:/site/blog/2025-04-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for April 2025!&lt;br&gt; This month has been mostly spent adding Process fork, Async vectorized writes and Memory Dump to Containers!&lt;/p&gt;</summary><content type="html">&lt;h1 id="process"&gt;Process&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_process.html"&gt;&lt;code&gt;SC::Process&lt;/code&gt;&lt;/a&gt; library allows spawning process across all supported platforms with many features, including I/O redirection and setting environment variables / starting directories.
This month however it has been gaining a new class called &lt;code&gt;SC::ProcessFork&lt;/code&gt; that uses &lt;code&gt;fork&lt;/code&gt; on Posix and &lt;code&gt;RtlCloneUserProcess&lt;/code&gt; a very well hidden NT Kernel API that we can consider to be some sort of Windows &lt;code&gt;fork&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A fork duplicates a parent process execution state, os handles and private memory.&lt;/p&gt;
&lt;p&gt;Its semantics are quite different from platform to platform but on its most common denominator it can be used to carry on "background" operations on snapshots of current program memory. One relevant use case is serializing to disk or network a live, complex and large data structure. Without the fork the program should either:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Duplicate all the data, to snapshot it in a given instant, and keep it around for Async IO&lt;/li&gt;
&lt;li&gt;Block program execution and write the live data-structure until all IO is finished&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fork avoids memory duplication because it will be shared through Copy On Write (COW) mechanisms.&lt;br&gt;
COW ensures that un-modified duplicated memory pages will not occupy additional Physical RAM.&lt;/p&gt;
&lt;p&gt;A pair of pipes makes it easy to do some coordination between parent and forked process.&lt;/p&gt;
&lt;p&gt;This is not without caveats however for example:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Many API will just not work as expected on the forked process, especially on Windows&lt;/li&gt;
&lt;li&gt;Limit API calls in forked process to console IO, network and file I/O (avoid GUI / Graphics)&lt;/li&gt;
&lt;li&gt;All threads other than the current one will be suspended in child process (beware of deadlocks)&lt;/li&gt;
&lt;li&gt;Create Sockets and FileDescriptors with Inheritable flags if you need them in fork process&lt;/li&gt;
&lt;li&gt;Process deadlocks under Windows ARM64 / x86 emulation (use &lt;code&gt;Process::IsWindowsEmulatedProcess&lt;/code&gt;)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So we're better using this feature only for very simple use cases, for example:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/ProcessFork.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/ProcessFork.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f4cb4a95"&gt;Process: Add ProcessFork&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a74f704a"&gt;Process: Add isWindowsEmulatedProcess to avoid using ProcessFork&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="foundation"&gt;Foundation&lt;/h1&gt;
&lt;p&gt;This month the custom allocator system gains a new ability.&lt;br&gt;
Anything &lt;code&gt;SC::Segment&lt;/code&gt; based (&lt;code&gt;Vector&lt;/code&gt; / &lt;code&gt;String&lt;/code&gt; / &lt;code&gt;VectorMap&lt;/code&gt; including their Inline variants) can be dumped and restored with a simple cast!&lt;br&gt;
This is very useful for serialization purposes, for network protocols or state persistence to the disk, assuming there's no need to validate the data and/or to version it.&lt;/p&gt;
&lt;p&gt;If data can evolve in different "versions" with added and removed field, you should probably look at &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_serialization_binary.html" target="_blank"&gt;&lt;code&gt;SC::SerializationBinary&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Once everything is routed through an allocator, this is not difficult to do, but some effort has been spent to make it simple and easy.&lt;br&gt;
Some &lt;a href="https://x.com/pagghiu_/status/1908415906897670633" target="_blank"&gt;debate on X&lt;/a&gt; has made it clear that this cannot be made fully UB safe under any existing C++ standard version so the usual caveats of "check what your compiler is doing" apply here.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/StructDump.jpg" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/StructDump.jpg"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2019d984"&gt;Containers: Add Containers memory dump test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f0db7de8"&gt;Containers: Allow declaring intrusive list in public headers without including its implementation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/37205552"&gt;Containers: Move Vector with Virtual memory test to Containers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bfacf568"&gt;Foundation: Add cxa_thread_atexit on Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4073d791"&gt;Foundation: Add start_lifetime_as to Span&lt;T&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/48dc8b1d"&gt;Foundation: Disable Segment owner check when creating temporaries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/62d814af"&gt;Foundation: Remove useless const_cast from start_lifetime_as&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/270f42d0"&gt;Foundation: Rename reinterpret_as_span_of&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a6862f6b"&gt;Foundation: Rename some methods in MemoryAllocator and VirtualMemory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/12f5503b"&gt;Foundation: Use type U for all src parameters in Buffer operations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="async"&gt;Async&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; library now supports vectorized writes.&lt;/p&gt;
&lt;p&gt;This is the ability to atomically write multiple slices of memory with distinct start address and length.
It can be useful to reduce the number of &lt;em&gt;syscalls&lt;/em&gt; required to execute the writes and also allows avoiding intermediate buffers to compose them in the proper order.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On posix this uses &lt;code&gt;writev&lt;/code&gt; for both sockets and files.&lt;/li&gt;
&lt;li&gt;On Windows &lt;code&gt;WSASend&lt;/code&gt; can handle sockets in the same way, but &lt;code&gt;WriteFile&lt;/code&gt; must be called multiple times in sequence for files.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;SC::Async&lt;/code&gt; unifies such platform differences providing a simpler experience for library users.&lt;/p&gt;
&lt;p&gt;Some other changes also have been done, centralizing &lt;code&gt;AsyncRequest&lt;/code&gt; start in &lt;code&gt;AsyncEventLoop&lt;/code&gt; and unifying &lt;code&gt;AsyncTask&lt;/code&gt; for all request types.
These changes have been made to prepare for a larger feature that will land next month (surprise!).&lt;/p&gt;
&lt;p&gt;Unfortunately some fields have been renamed, soft-breaking the API, but it shouldn't take more than a search and replace for library users to fix the errors.
Also the Async API will change again during next weeks so maybe it's a good idea to resume updating next month.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/AsyncVectorizedWrites.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/AsyncVectorizedWrites.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f471af41"&gt;Async: Allow using AsyncTask for every request type&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5dab6ecb"&gt;Async: Centralize Async Request start in AsyncEventLoop::start&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/627623db"&gt;Async: Define all classes directly inside namespace SC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7b87154c"&gt;Async: Manually activate write requests with same handle on Posix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8115b7f6"&gt;Async: Remove useless [[nodiscard]] for SC::Result&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2aee19b4"&gt;Async: Rename AsyncFile{Read/Write/Close/Poll} fileDescriptor field to handle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b87449b2"&gt;Async: Support vectorized file write&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b5acbf5b"&gt;Async: Support vectorized socket send&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8ef0440f"&gt;Async: Try writing to socket before activating write watcher on Posix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1eb28c7c"&gt;Async: Unify Posix file writes code path with socket writes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="tools"&gt;Tools&lt;/h1&gt;
&lt;p&gt;It's been a while since last refresh to &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;&lt;code&gt;SC::Tools&lt;/code&gt;&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SC::Tools&lt;/code&gt; are awesome, they just use Sane C++ Libraries to do the typical "scripting" that one would do in bash or python but with zero dependencies!&lt;/p&gt;
&lt;p&gt;This month some dependencies have been updated, mainly &lt;code&gt;clang-format&lt;/code&gt;, &lt;code&gt;doxygen&lt;/code&gt; and &lt;code&gt;7zip&lt;/code&gt;.&lt;br&gt;
Also the &lt;code&gt;SC::Package&lt;/code&gt; tool that downloads / clones repos from inside &lt;code&gt;SC::Build&lt;/code&gt; scripts is now using shallow cloning, bringing a noticeable speedup!&lt;/p&gt;
&lt;p&gt;It's possible to now run &lt;code&gt;SC::Format&lt;/code&gt; and build documentation and coverage on Linux instead of macOS only, so that the CI can just use any simple 
Linux VM instead of a more complex and less available macOS one.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SC::Format&lt;/code&gt; uses clang-19 so make sure to use it if you ever plan to send an MR to the project (but the CI will error out immediately anyway, so you will find out very quickly).&lt;/p&gt;
&lt;p&gt;The doxygen update was long overdue but every version of doxygen was plagued with some bug breaking the documentation.
The &lt;code&gt;1.12.0&lt;/code&gt; version seems to work better, but if you see anything wrong please open an issue on github.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/Doxygen_1_12_0.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/Doxygen_1_12_0.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5d066d29"&gt;Tools: Add more descriptive messages for when git is missing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/034cd91b"&gt;Tools: Enable running SC-Format on Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4f1e003c"&gt;Tools: Fallback to use wget on Linux if curl is not available&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c7c5fff1"&gt;Tools: Support shallow cloning of git repos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5410ccc7"&gt;Tools: Update 7zr to 24.09&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4dfefd4a"&gt;Tools: Update to clang-format 19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/835ae6d1"&gt;SCExample: Shallow clone dear-imgui and sokol&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/46b1cbad"&gt;CI: Install 7zip to monitor its validity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d6a3f78a"&gt;CI: Run clang-format and build documentation and coverage on linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ff0da851"&gt;Documentation: Update Doxygen to 1.12.0&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="build"&gt;Build&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt; has gained per-file include paths variable expansion for Visual Studio Projects and coverage computation on Linux.
Some features like &lt;code&gt;nostdlib++&lt;/code&gt; have been disabled on Linux because they need more love to properly support all combinations of it with the sanitizers.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/96d648c4"&gt;Build: Do not use nostdlib++ on Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/50a6dda3"&gt;Build: Expand per-file include paths on VS Projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e78489b3"&gt;Build: Support coverage computation on Linux&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="repository-restructuring"&gt;Repository Restructuring&lt;/h1&gt;
&lt;p&gt;The repository has been restructured as well, with the &lt;code&gt;SC.cpp&lt;/code&gt; unity build file moved to the root of the repo and all tests moved to a &lt;code&gt;Tests&lt;/code&gt; subdirectory.
Also C bindings for the library now live together with the corresponding C++ library itself.
Hopefully this now makes more sense than before.&lt;/p&gt;
&lt;p&gt;I know that this will break someone's build, but hey, it's a single file, it shouldn't take that much time to update its path in your build system.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/NewRepoStructure.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/NewRepoStructure.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0b4e8000"&gt;Everywhere: Move all tests to the Tests subdirectory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ea9d5da5"&gt;Everywhere: Move hashing C Bindings inside the library itself&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/479e7fab"&gt;Everywhere: Move the SC.cpp unity build file to root of the project&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bcb45eb8"&gt;Everywhere: Run clang-format 19 on the entire repo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="fixes"&gt;Fixes&lt;/h1&gt;
&lt;p&gt;And just a single fix that doesn't fit in any of the previous bigger categories!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/690cf89e"&gt;Strings: Fix reading from potentially unaligned memory&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚òîÔ∏è Sane C++ March 25</title><link href="https://pagghiu.github.io/site/blog/2025-03-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-03-31T00:00:00+02:00</published><updated>2025-03-31T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-03-31:/site/blog/2025-03-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for March 2025!&lt;br&gt; This month has been mostly spent adding custom allocators support to all Containers!&lt;/p&gt;</summary><content type="html">&lt;h3 id="scfoundation"&gt;SC::Foundation&lt;/h3&gt;
&lt;p&gt;The big &lt;code&gt;Segment&lt;/code&gt; refactoring from last month has left so many trails also during March in &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_foundation.html"&gt;&lt;code&gt;SC::Foundation&lt;/code&gt;&lt;/a&gt;.&lt;br&gt;
Most notably &lt;code&gt;Segment&lt;/code&gt; now:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Supports custom allocators (WIP)&lt;/li&gt;
&lt;li&gt;Uses relative pointers to store &lt;em&gt;dynamically allocated&lt;/em&gt; block information&lt;/li&gt;
&lt;li&gt;Stores its header inline instead of making it part of the &lt;em&gt;dynamic allocation&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="custom-allocators"&gt;Custom allocators&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Implementation differs from STL one of embedding allocator in the type, as a template parameter.  &lt;/li&gt;
&lt;li&gt;Keeping allocator out of the template parameters allows functions to just accept &lt;code&gt;Vector&amp;lt;T&amp;gt;&amp;amp;&lt;/code&gt; without needing to care what allocator has been set for it and avoiding the &lt;em&gt;viral&lt;/em&gt; effect of needing to make also the method templated around the allocator (that is really bad for compile times).&lt;/li&gt;
&lt;li&gt;Allocators are not stored for each single container or dynamic allocation, they're by all means a global.&lt;/li&gt;
&lt;li&gt;They're arranged in a double-linked list and users can push / pop their custom one as needed.&lt;/li&gt;
&lt;li&gt;This makes it easy for example to create strategies where all allocations in a given sub-scope are sliced from a pre-allocated slab of memory that can be later on released all at once.  &lt;/li&gt;
&lt;li&gt;Custom allocators must be considered still WIP and their API will likely change.
Also documentation about their usage is insufficient and it will be expanded.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/CustomFixedAllocator.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/CustomFixedAllocator.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Detailed list of commits: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/50d184e5"&gt;Foundation: Add FixedAllocator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/703372d3"&gt;Foundation: Add global and thread-local allocators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f31955c"&gt;Foundation: Add allocation ownership mechanism&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/938292a6"&gt;Foundation: Add alignment support to allocators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a61fba94"&gt;Foundation: Add Global and Thread-Local enum&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4a3f51c"&gt;Containers: Add thread-local Vector and SmallVector containers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fc5fd77"&gt;Containers: Use Globals to allocate in ArenaMap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4a3f51c"&gt;Documentation: Add initial documentation for Globals&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="relative-pointers"&gt;Relative pointers&lt;/h4&gt;
&lt;p&gt;Relative pointers make it easier to create data structures that can be bulk serialized and restored skipping parsing entirely.
A specific demo featuring this must still be built but this is definitively on the &lt;code&gt;TODO&lt;/code&gt; list.
Relative pointers are quite tricky to implement properly in C++ because it's very easy to trigger UB with this specific class of pointer arithmetics and this has been learned the hard way.
Some tests where failing on GCC (when compiling with &lt;code&gt;-fstrict-aliasing&lt;/code&gt;) but it has been a good occasion to learn about &lt;code&gt;std::launder&lt;/code&gt; and &lt;code&gt;std::start_lifetime_as&lt;/code&gt; family of functions and in general creating optimization barriers with &lt;code&gt;volatile&lt;/code&gt; specifier.&lt;br&gt;
For now relative pointers are used by default but at some point the performance impact due to their use will be assessed.
In case of a significant performance difference maybe it will be re-considered possible to opt-out their usage with some runtime or compile-time flag.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8a00000e"&gt;Foundation: Use relative pointers in Segment and make header inline&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ac70d9cc"&gt;Foundation: Launder Segment::data() returned pointer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7a97c14f"&gt;Foundation: Refactor Segment to reduce and isolate UB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/RelativePointer.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/RelativePointer.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="inline-header"&gt;Inline header&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;SegmentHeader&lt;/code&gt; is now part of &lt;code&gt;Segment&lt;/code&gt; declaration. In other words it's no more part of its dynamically allocated part.
This is useful to know all properties of a segment like its inline storage and capacity or the use of custom allocators.
The inline header stores also information about needing to use the &lt;code&gt;Global&lt;/code&gt; or the &lt;code&gt;Thread-Local&lt;/code&gt; allocator.&lt;br&gt;
This helps avoiding unnecessary thread-local access because it's useless if all allocations are known to be done from the main thread (or from a specific thread).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0a17bd41"&gt;Foundation: Explicitly reference header from VTable&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/76e56e5c"&gt;Foundation: Fix Segment::isInline&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SegmentHeader.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SegmentHeader.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="virtual-memory"&gt;Virtual Memory&lt;/h4&gt;
&lt;p&gt;A class called &lt;code&gt;VirtualMemory&lt;/code&gt; enables reserving large amounts (max value) of memory and then committing the needed one keeping existing allocation address stable.
This is a big win in many cases because it avoids needing to move everything when a dynamic vector needs to expand, as long as it will be under the &lt;em&gt;max value&lt;/em&gt; guessed during the Virtual Memory initialization. This max value can be very large as long as it stays in the allowed virtual memory available range for the given architecture, and in case of 64 bits that's pretty big.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/VirtualMemoryTest.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/VirtualMemoryTest.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;An associated &lt;code&gt;VirtualAllocator&lt;/code&gt; enables using it with the Segment allocator subsystem.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/CustomVirtualAllocator.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/CustomVirtualAllocator.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e6d93749"&gt;Foundation: Add VirtualAllocator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0cdbeb1f"&gt;Foundation: Add VirtualMemory&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="memory-statistics"&gt;Memory Statistics&lt;/h4&gt;
&lt;p&gt;All allocations, deallocations and reallocations are now being counted in a &lt;code&gt;Statistics&lt;/code&gt; class providing useful information about how many allocations are done by a given section of code.
The &lt;code&gt;SCTest&lt;/code&gt; is using such statistics to assert when detecting a mismatched number of &lt;code&gt;allocate&lt;/code&gt; vs &lt;code&gt;release&lt;/code&gt; calls.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/878f7627"&gt;Testing: Add global memory report&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d22c7593"&gt;Foundation: Record statistics in MemoryAllocator&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/MemoryReport.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/MemoryReport.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="vector-growth-factor"&gt;Vector Growth Factor&lt;/h4&gt;
&lt;p&gt;This has been also been the occasion to feel ashamed about how many allocations where actually already done leading to make Segment grow by factor of &lt;code&gt;2&lt;/code&gt; on append.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/390ce729"&gt;Foundation: Grow Segment capacity with factor 2 on append or insert&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="debug-visualizers"&gt;Debug visualizers&lt;/h4&gt;
&lt;p&gt;Debug visualizers have been updated to reflect changes in &lt;code&gt;Segment&lt;/code&gt; data layout.&lt;br&gt;
Also a LLDB visualizer for &lt;code&gt;Array&amp;lt;T, N&amp;gt;&lt;/code&gt; was missing and it has been added as well.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bfc0c827"&gt;DebugVisualizer: Update Segment visualizers to use relative pointers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/DebugVisualizers.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/DebugVisualizers.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="and-more"&gt;And more&lt;/h4&gt;
&lt;p&gt;Additional minor fixes that don't deserve a whole paragraph to describe them are listed below:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e5c5041f"&gt;Foundation: Add no-except to all Segment related methods&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/abb0b0b6"&gt;Foundation: Enable creation of Span&lt;void&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1ed98c28"&gt;Foundation: Extend Segment assign and insert to types convertible to T&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/92eff60a"&gt;Foundation: Fix memory Leak in Segment::shrink_to_fit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a6ad7dfd"&gt;Foundation: Split Foundation.cpp content in separate files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0cffe20e"&gt;Containers: Move SmallVector to Vector header&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scbuild"&gt;SC::Build&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt; has received a small set of changes too.
It's now always using the C++ stdlib on GCC because only more recent GCC versions (&amp;gt; 13) support the &lt;code&gt;-nostdlib++&lt;/code&gt; flag that makes it easy linking &lt;code&gt;libc&lt;/code&gt; but not &lt;code&gt;libc++&lt;/code&gt; or &lt;code&gt;libstdc++&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Also Makefiles for apple and linux platforms are now created in separate sub-directories.
This makes it easier to manually invoke make for them as you don't need the flag to indicate a custom Makefile file name.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCBuildMarch25.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCBuildMarch25.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is the detailed list of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bbb46ea1"&gt;Build: Always link C++ stdlib on GCC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/734b73b4"&gt;Build: Create Makefiles in apple / linux subdirs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9dc9792d"&gt;Build: Fix enabling standard C++ library for gcc&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="minor-changes"&gt;Minor Changes&lt;/h3&gt;
&lt;p&gt;And the obvious list of random fixes, with the notable mention of the one related to &lt;code&gt;SC::Async&lt;/code&gt; that was randomly failing in the CI very often due to some bad copy and paste from the &lt;code&gt;io_uring&lt;/code&gt; headers.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6d288b0d"&gt;Everywhere: Fixes to compile under ClangCL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/59efa2fc"&gt;Async: Just fill the entire SQE with zero inside io_uring_prep_rw on Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9ef93dad"&gt;Async: Set to zer all SQE fields for Linux on io_uring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f60358e0"&gt;Documentation: Fix some typos for build instructions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/443c38e9"&gt;SerializationBinary: Fix UB on buffer reader&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d003f221"&gt;Containers: Use placementNew in ArenaMap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üé† Sane C++ February 25</title><link href="https://pagghiu.github.io/site/blog/2025-02-28-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-02-28T00:00:00+01:00</published><updated>2025-02-28T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-02-28:/site/blog/2025-02-28-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for February 2025!&lt;br&gt; This month has been mostly spent re-writing &lt;code&gt;Containers&lt;/code&gt; and &lt;code&gt;SC::Build&lt;/code&gt; libraries!&lt;/p&gt;</summary><content type="html">&lt;h3 id="containers"&gt;Containers&lt;/h3&gt;
&lt;p&gt;Re-writing &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_containers.html"&gt;&lt;code&gt;Containers&lt;/code&gt;&lt;/a&gt;...what could be going wrong?&lt;/p&gt;
&lt;p&gt;Sane C++ Libraries tag-line is "Platform Abstraction Libraries". 
The main reason for that is that the project doesn't try or want to be a STL replacement.
There is an hard requirement not to depend on the Standard C++ Library because the standard totally disrespects one of the fundamental pillars of the project, namely &lt;em&gt;Fast Compile Times&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;In general STL-like containers may not be the best or most efficient abstraction in many cases.
Using them (or not) it's really an application choice that should not dictated by a &lt;em&gt;Platform Abstraction&lt;/em&gt; library.&lt;/p&gt;
&lt;p&gt;A lot of effort is often spent avoiding or at least reducing Containers usage in other Sane C++ Libraries API.
The problem is that &lt;code&gt;Vector&amp;lt;T&amp;gt;&lt;/code&gt; containers were used both by &lt;code&gt;Strings&lt;/code&gt; library and just as Buffers for &lt;code&gt;File&lt;/code&gt; and other libraries.&lt;/p&gt;
&lt;p&gt;For this reason I've decided to re-write the entire set of &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_containers.html"&gt;&lt;code&gt;Containers&lt;/code&gt;&lt;/a&gt; with a few objectives&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Cleaning-up the quite messy and verbose code for &lt;code&gt;Vector&amp;lt;T&amp;gt;&lt;/code&gt; and &lt;code&gt;SmallVector&amp;lt;T&amp;gt;&lt;/code&gt; and &lt;code&gt;Array&amp;lt;T,N&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Provide a base implementation that works for &lt;code&gt;char&lt;/code&gt; buffers but concise enough to be included in &lt;code&gt;Foundations&lt;/code&gt; library.&lt;/li&gt;
&lt;li&gt;Share as much code as possible to implement  &lt;code&gt;Vector&amp;lt;T&amp;gt;&lt;/code&gt; and &lt;code&gt;SmallVector&amp;lt;T&amp;gt;&lt;/code&gt; that are still in &lt;code&gt;Containers&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a &lt;em&gt;byte buffer&lt;/em&gt; implementation that should not leak in the headers&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The results are quite satisfying, there is now a &lt;code&gt;Buffer&lt;/code&gt; and &lt;code&gt;SmallBuffer&amp;lt;N&amp;gt;&lt;/code&gt; that replace all &lt;code&gt;Vector&amp;lt;char&amp;gt;&lt;/code&gt; usages and are implemented in &lt;code&gt;Foundation.cpp&lt;/code&gt; file.
All the other Vector-like containers share most of the code and they're delivered as &lt;em&gt;header only&lt;/em&gt; library as one can expect from a templated library.&lt;/p&gt;
&lt;p&gt;Probably a next step could be evolving them to use custom memory allocators and arenas, but that will happen maybe in some future update.&lt;/p&gt;
&lt;p&gt;This is the detailed list of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/39ea983b"&gt;Containers: Handle edge case in copy insert&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4ed5a47c"&gt;Containers: Replace contains and find in Vector and Array using Span&lt;T&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c6d2e1da"&gt;Containers: Rewrite Vector and Array using Segment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b5564bb3"&gt;DebugVisualizers: Add Buffer and SmallBuffer visualizers for lldb and natvis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f1a7105b"&gt;DebugVisualizers: Update String and SmallString visualizers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3c239f6f"&gt;DebugVisualizers: Update Vector and SmallVector visualizers for lldb and natvis&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An these are the commits were some dependencies from &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_containers.html"&gt;&lt;code&gt;Containers&lt;/code&gt;&lt;/a&gt; have been removed&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7167f4d3"&gt;File: Remove dependency from Containers library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/87b100df"&gt;SerializationBinary: Replace Vector usages with Buffer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/24898f6f"&gt;Strings: Remove dependency from Containers library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d5b7ec21"&gt;Http: Use Buffer instead of Vector&lt;char&gt; in test&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scfoundation"&gt;SC::Foundation&lt;/h3&gt;
&lt;p&gt;Changes in &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_foundation.html"&gt;&lt;code&gt;SC::Foundation&lt;/code&gt;&lt;/a&gt; are connected to the ones just described in Containers, because &lt;code&gt;Segment&lt;/code&gt; class and &lt;code&gt;Buffer&lt;/code&gt; plus &lt;code&gt;SmallBuffer&lt;/code&gt; are all defined there.
Two classes, specifically &lt;code&gt;TaggedUnion&lt;/code&gt; and &lt;code&gt;TaggedMap&lt;/code&gt; have been moved to &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_foundation_extra.html"&gt;&lt;code&gt;SC::FoundationExtra&lt;/code&gt;&lt;/a&gt;.
The reason is that they're not used by any other library and feel a little bit too &lt;code&gt;Modern C++&lt;/code&gt; to deserve a place in Sane C++ Libraries.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8df0b5af"&gt;Foundation: Add Buffer and SmallBuffer&lt;N&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8aba6435"&gt;Foundation: Add Segment::append overload for types convertible to T&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d5544f3a"&gt;Foundation: Add function to register Memory globals&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d88738d2"&gt;Foundation: Move Assert code to a dedicated Internal file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6d37a744"&gt;FoundationExtra: Move TaggedUnion and TaggedMap to FoundationExtra&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scbuild"&gt;SC::Build&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt; is the self-hosted build system used by Sane C++ Libraries to generate test and example projects.
It's not needed to &lt;em&gt;use&lt;/em&gt; the libraries, as they need no build system at all, but it's used when &lt;em&gt;developing&lt;/em&gt; the libraries.&lt;/p&gt;
&lt;p&gt;It's not ready for general use (yet!), but it's progressing towards getting there someday.&lt;/p&gt;
&lt;p&gt;In this month the build definition API has been cleaned up a little bit, with preference towards using &lt;em&gt;methods&lt;/em&gt; to configure the build rather than filling the data structure.&lt;/p&gt;
&lt;p&gt;A new more precise flags resolution / merging system properly allows to override compile or link flags in configuration, so that they have priority over the ones set per-project.
It's also possible to set a compile flags for a specific set of files, including disabling warnings for them.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Result&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;buildTestProject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Parameters&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;TargetType&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ConsoleExecutable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TEST_PROJECT_NAME&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// All relative paths are evaluated from this project root directory.&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setRootDirectory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;directories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;libraryDirectory&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Project Configurations&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addPresetConfiguration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Configuration&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Preset&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Debug&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addPresetConfiguration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Configuration&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Preset&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Release&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addPresetConfiguration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Configuration&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Preset&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;DebugCoverage&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Defines&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// $(PROJECT_ROOT) expands to Project::setRootDirectory expressed relative to $(PROJECT_DIR)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addDefines&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SC_LIBRARY_PATH=$(PROJECT_ROOT)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SC_COMPILER_ENABLE_CONFIG=1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Includes&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addIncludePaths&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="c1"&gt;// Libraries path (for PluginTest)&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tests/SCTest&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// SCConfig.h path (enabled by SC_COMPILER_ENABLE_CONFIG == 1)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;addSaneCppLibraries&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addFiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tests/SCTest&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*.cpp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// add all .cpp from SCTest directory&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addFiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tests/SCTest&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*.h&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;// add all .h from SCTest directory&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addFiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SC-*.cpp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;// add all tools&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addFiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*.h&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="c1"&gt;// add tools headers&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addFiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tools&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*Test.cpp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// add tools tests&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// This is a totally useless per-file define to test &amp;quot;per-file&amp;quot; flags SC::Build feature.&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;SourceFiles&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// For testing purposes let&amp;#39;s create a needlessly complex selection filter for &amp;quot;SC Spaces.cpp&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSelection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tests/SCTest&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*.cpp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;removeSelection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tests/SCTest&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SCTest.cpp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Add an useless define to be checked inside &amp;quot;SC Spaces.cpp&amp;quot; and &amp;quot;SCTest.cpp&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addDefines&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SC_SPACES_SPECIFIC_DEFINE=1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addIncludePaths&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;../Directory With Spaces&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// For testing purposes disable some warnings caused in &amp;quot;SC Spaces.cpp&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;disableWarnings&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="mi"&gt;4100&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;&lt;span class="w"&gt;                                 &lt;/span&gt;&lt;span class="c1"&gt;// MSVC only&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;disableWarnings&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;unused-parameter&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="c1"&gt;// GCC and Clang&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;disableClangWarnings&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;reserved-user-defined-literal&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Clang Only&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSpecificFileFlags&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;specificFiles&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Result&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is the detailed list of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f9da0f75"&gt;Build: Add basic support for disabling warnings on specific file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae6689a2"&gt;Build: Basic support of "per-file" compile flags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9867844c"&gt;Build: Improve build definition API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/34def2fe"&gt;Build: Refactor Makefile backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/76aa65a9"&gt;Build: Refactor Xcode writer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1ec566cc"&gt;Build: Resolve compile / link options in project if not set on configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/18a234ca"&gt;Build: Simplify defining compile and link settings getting rid of TaggedUnion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c2238d84"&gt;Build: Use TargetType to configure console executables or graphical application&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="minor-changes"&gt;Minor Changes&lt;/h3&gt;
&lt;p&gt;And as always here is the list of random fixes scattered around the library!&lt;/p&gt;
&lt;p&gt;This is the detailed list of commits for all minor changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6ae335c2"&gt;Async: Remove variable length array in Linux backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/956cdf96"&gt;AsyncStreams: Disable tests requiring ZLib on Windows ARM64&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ee78587f"&gt;CI: Compile also SCExample&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b52a9280"&gt;Everywhere: Fix some spelling errors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9e48369e"&gt;Plugin: Add close method to PluginRegistry&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/12f1d236"&gt;Plugin: Move StringHashFNV to PluginHash&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a1254116"&gt;SCTest: More properly group tests by library they belong to&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1614560f"&gt;Strings: Move implementations to internal&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚ùÑÔ∏è Sane C++ January 25</title><link href="https://pagghiu.github.io/site/blog/2025-01-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2025-01-31T00:00:00+01:00</published><updated>2025-01-31T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2025-01-31:/site/blog/2025-01-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for January 2025!&lt;br&gt; This month has been mostly spent improving &lt;code&gt;SC::Async&lt;/code&gt; library!&lt;/p&gt;</summary><content type="html">&lt;h3 id="scasync"&gt;SC::Async&lt;/h3&gt;
&lt;p&gt;&lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; has been the main focus of the month.&lt;/p&gt;
&lt;p&gt;Simplification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Remove one state throughout the system (&lt;code&gt;Teardown&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Consistency:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Expose callback to signal when a request is fully stopped after issuing a &lt;code&gt;AsyncRequest::stop()&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Exclude specific request from active count (it will not keep the loop alive)&lt;/li&gt;
&lt;li&gt;Enumerate all (non-internal) active and submitted async requests&lt;/li&gt;
&lt;li&gt;Interrupt event loop even with active requests&lt;/li&gt;
&lt;li&gt;Update loop time externally&lt;/li&gt;
&lt;li&gt;Check request state (free / active / cancelling)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Stability:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fix issues with &lt;code&gt;AsyncWakeUp&lt;/code&gt; on &lt;code&gt;io_uring&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Timers (&lt;code&gt;AsyncLoopTimeout&lt;/code&gt;) improvements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Invoke timers consistently when one of them is being cancelled during another timer's callback.&lt;/li&gt;
&lt;li&gt;Sort timers by expiration time (first) and insertion order (second)&lt;/li&gt;
&lt;li&gt;Use Monotonic clock everywhere&lt;/li&gt;
&lt;li&gt;Unify code on all backends (including &lt;code&gt;io_uring&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a8825316"&gt;Async: Add a callback to signal when AsyncRequest is fully closed after stop()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cfe1eef6"&gt;Async: Add method to check if event loop is initialized&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/63850d3d"&gt;Async: Add method to enumerate all requests of the event loop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/705643b8"&gt;Async: Add methods to check if a request is free/active/cancelling and update loop time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/809d139d"&gt;Async: Allow excluding a specific request from active count&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/69d6edb2"&gt;Async: Allow interrupting event loop even with active requests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/082e2dcb"&gt;Async: Do not enumerate internally created requests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/00ced9c5"&gt;Async: Enforce temporal ordering of loop timeouts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/89506626"&gt;Async: Expose callback to notify before and after polling for IO&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f1eac82e"&gt;Async: Fix AsyncWakeUp on io_uring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/81e4455a"&gt;Async: Fix expired timers invocation when they're being cancelled&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c6edcbd3"&gt;Async: Make teardownAsync static function&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3c0a170b"&gt;Async: Reduce AsyncEventLoop size&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/32f15c13"&gt;Async: Remove Teardown state to reduce complexity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c46a9fa4"&gt;Async: Split AsyncTest in multiple files for easier navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ca411dc0"&gt;Async: Update time in any case after a kernel sync operation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9970a64d"&gt;Async: Use Monotonic clock everywhere&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8b375613"&gt;Async: When interrupted loop shouldn't dispatch completions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scasyncstreams"&gt;SC::AsyncStreams&lt;/h3&gt;
&lt;p&gt;Some minimal work as been done to the &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async_streams.html"&gt;&lt;code&gt;SC::AsyncStreams&lt;/code&gt;&lt;/a&gt; library as well.&lt;/p&gt;
&lt;p&gt;One video has been recorded Showing how to move the transform stream compression operation on a background thread, using &lt;code&gt;AsyncLoopWork&lt;/code&gt;.
This video pauses (for now) the series of videos dedicated to &lt;code&gt;SC::AsyncStreams&lt;/code&gt;.&lt;/p&gt;
&lt;div class="youtube youtube-16x9"&gt;
&lt;iframe src="https://www.youtube.com/embed/vCh6vEfiISI" allowfullscreen seamless frameborder="0"&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5df350ac"&gt;AsyncStreams: Compress on separate thread on zlib transform stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d7c0e573"&gt;AsyncStreams: Fix zlib api calling convention&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scfoundation"&gt;SC::Foundation&lt;/h3&gt;
&lt;p&gt;&lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_foundation.html"&gt;&lt;code&gt;SC::Foundation&lt;/code&gt;&lt;/a&gt; most notable change has been using a different approach in &lt;code&gt;SC::Function&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We're now using a &lt;code&gt;vtable&lt;/code&gt;-like approach that allows saving one entire pointer (!!) for each &lt;code&gt;SC::Function&lt;/code&gt; instance.&lt;/p&gt;
&lt;p&gt;The price to pay is the static initialization (that will require a &lt;code&gt;mutex&lt;/code&gt; acquisition) and one more indirection, but it has been considered a good tradeoff.&lt;/p&gt;
&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/48788b62"&gt;Foundation: Add a basic test for HeapBuffer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/dec26556"&gt;Foundation: Add explicit size for Linux on OpaqueObject&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/153995b9"&gt;Foundation: Use static vtable approach in Function to reduce its size&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="sctime"&gt;SC::Time&lt;/h3&gt;
&lt;p&gt;The &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_time.html"&gt;&lt;code&gt;SC::Time&lt;/code&gt;&lt;/a&gt; library got user defined literals, some conversion between different units and differentiation between monotonic and realtime clocks.&lt;/p&gt;
&lt;p&gt;A nasty bug regarding time normalization in &lt;code&gt;SC::Time::HighResolutionCounter&lt;/code&gt; has been fixed too!&lt;/p&gt;
&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/57f737d6"&gt;Time: Add User defined literals and more conversions between types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/22c2335a"&gt;Time: Differentiate between Monotonic and Realtime clocks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e4832649"&gt;Time: Handle time normalization in HighResolutionCounter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="minor-changes"&gt;Minor changes&lt;/h3&gt;
&lt;p&gt;And these are some minor changes that don't have enough impact to deserve a dedicated comment.&lt;/p&gt;
&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fb093b66"&gt;Everywhere: Fix build and runtime issues with GCC 13&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae1f43d8"&gt;Plugin: Use correct casing for the "nologo" option&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ca1b0c12"&gt;SCExample: Stop timer during close&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/77c26075"&gt;SCExample: Update dear-imgui and sokol&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚òÉÔ∏è Sane C++ December 24</title><link href="https://pagghiu.github.io/site/blog/2024-12-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-12-31T00:00:00+01:00</published><updated>2024-12-31T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-12-31:/site/blog/2024-12-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for December 2024!&lt;br&gt; This month has been mostly spent improving &lt;code&gt;SC::AsyncStreams&lt;/code&gt; library with Async Transform Streams!&lt;/p&gt;</summary><content type="html">&lt;h3 id="scasyncstreams"&gt;SC::AsyncStreams&lt;/h3&gt;
&lt;p&gt;Most of the work has been focused on shaping the &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async_streams.html"&gt;&lt;code&gt;SC::AsyncStreams&lt;/code&gt;&lt;/a&gt; library.&lt;/p&gt;
&lt;p&gt;Async streams got their own folder and the &lt;code&gt;AsyncPipeline&lt;/code&gt; API has been improved so that it accept transform streams.&lt;br&gt;
Transform streams are used to concurrently modify data read from a source, before it's being written to one or multiple destinations.
The sample use case has been compression through ZLIB library.&lt;br&gt;
In order to keep Sane C++ Libraries free of build time dependencies, zlib is dynamically loaded on all major operating systems.
A nice trick has been figuring out that the .NET CLR on Windows ships zlib hidden in the &lt;code&gt;clrcompression.dll&lt;/code&gt;, avoiding the need to deploy it.&lt;/p&gt;
&lt;blockquote class="bluesky-embed" data-bluesky-uri="at://did:plc:2yxw2iku77om6gswp7sl3njb/app.bsky.feed.post/3ldjr6ckmqk2q" data-bluesky-cid="bafyreigzeqlu4m7mdurvptalveduamsadxd3yhbvevzb6t6h7fsqgynpvi"&gt;&lt;p lang="en"&gt;C/C++ compression tip:
Avoid deploying zlib binary with your executable, it&amp;#x27;s already included in the OS.

macOS ‚ñ∂Ô∏è libz.dylib
Linux ‚ñ∂Ô∏è libz.so.1 (on normal distros)
Windows ‚ñ∂Ô∏è clrcompression.dll (.NET CLR) exports:
- deflate
- deflateEnd
- inflate
- inflateEnd
- deflateInit2_
- inflateInit2_

Enjoy!üòè&lt;/p&gt;&amp;mdash; Stefano Cristiano (&lt;a href="https://bsky.app/profile/did:plc:2yxw2iku77om6gswp7sl3njb?ref_src=embed"&gt;@pagghiu.bsky.social&lt;/a&gt;) &lt;a href="https://bsky.app/profile/did:plc:2yxw2iku77om6gswp7sl3njb/post/3ldjr6ckmqk2q?ref_src=embed"&gt;December 17, 2024 at 10:14 PM&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://embed.bsky.app/static/embed.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;It seems that the &lt;em&gt;fixed pool&lt;/em&gt; initial design constraint, that forbids any dynamic allocation inside Async Streams is still working.
Some more work will need to be carried on to really prove if it works on a significant number of use cases!  &lt;/p&gt;
&lt;p&gt;Two Videos have been recorded while implementing the most significant portions of &lt;code&gt;SC::AsyncTransformStream&lt;/code&gt;&lt;/p&gt;
&lt;div class="youtube youtube-16x9"&gt;
&lt;iframe src="https://www.youtube.com/embed/Ul7DdQGrETo" allowfullscreen seamless frameborder="0"&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;div class="youtube youtube-16x9"&gt;
&lt;iframe src="https://www.youtube.com/embed/KKwohFmAUCk" allowfullscreen seamless frameborder="0"&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/00b4e95d"&gt;Move Async Streams to a dedicated folder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/17a36188"&gt;Improve documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/21839848"&gt;Use threaded blocking IO for file operations in test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/21a0c927"&gt;Add an async zlib transform stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/21c8605c"&gt;Replace Pipe with a Span of AsyncWritableStream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/387cc1f1"&gt;Add method to remove all listeners bound to a specific class instance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/402a214c"&gt;Fix pause handling inside AsyncRequestReadableStream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/70a4f927"&gt;Allow extending writable ending state until needed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/741bf983"&gt;Add unpipe to remove listeners added by pipe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/80b565e8"&gt;Add CircularQueue::pushFront&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/87e7652d"&gt;Make AsyncPipeline end writable sinks when readable source ends&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8a3c5431"&gt;Add errors listener directly on the AsyncPipeline in the test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ad6a2b59"&gt;Add ZLibAPI and ZLibStream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c7c6714d"&gt;Add Event::removeListener member function overload&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d74291a1"&gt;Implement write resuming and pushing a buffer to the top of the write queue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/de7e410f"&gt;Add auto-close descriptor for request streams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/df25bbf2"&gt;Add AsyncTransformStream and a simple synchronous zlib stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ec5d68dc"&gt;Add AsyncPipeline::pipe to validate requested pipeline&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scasync"&gt;SC::Async&lt;/h3&gt;
&lt;p&gt;&lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; gets its usual set of monthly minimal improvements.
The most significant one is change in API when using thread pools, so that they can be set once and re-used over multiple &lt;code&gt;start&lt;/code&gt; of the same request.&lt;/p&gt;
&lt;p&gt;Detailed List of commits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/898a7755"&gt;Require setting thread-pool before start for AsyncLoopWork&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/90fca39b"&gt;Allow setting request thread pool and task before start&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9cd6b84a"&gt;Avoid leaking link to next element in ThreadSafeLinkedList&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b05854d2"&gt;Set AsyncRequest to State::Free after stop()&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scfoundation"&gt;SC::Foundation&lt;/h3&gt;
&lt;p&gt;&lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_foundation.html"&gt;&lt;code&gt;SC::AsyncFoundation&lt;/code&gt;&lt;/a&gt; gets a few new classes to represent read-only and read/write strings without needing to include the entire &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_strings.html"&gt;&lt;code&gt;SC::String&lt;/code&gt;&lt;/a&gt; library.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1fb1bf36"&gt;Fix Span::reinterpret_as_array_of const correctness&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/245cb384"&gt;Add method to check if a Function is bound to a specific class instance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9ba637d1"&gt;Add SpanStringView and SpanString&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a16248d1"&gt;Add Span::sliceFromStartUntil and fix Span::equals&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ae21ddc2"&gt;Fix Span::reinterpret_as_array_of&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="refactoring"&gt;Refactoring&lt;/h3&gt;
&lt;p&gt;Changes in &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_foundation.html"&gt;&lt;code&gt;SC::AsyncFoundation&lt;/code&gt;&lt;/a&gt; have been carried on to reduce header bloat and inter-dependencies between libraries.
More specifically both File and Socket library got this treatment, so that Socket doesn't depend on &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_strings.html"&gt;&lt;code&gt;SC::String&lt;/code&gt;&lt;/a&gt; library at all anymore, and &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file.html"&gt;&lt;code&gt;SC::File&lt;/code&gt;&lt;/a&gt; now has a StringView-free header (&lt;code&gt;FileDescriptor.h&lt;/code&gt;) that can be included without bringing any &lt;code&gt;StringView&lt;/code&gt; dependency&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a2f67be3"&gt;Split all String and Vector related functions out of FileDescriptor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/77d21663"&gt;Split SocketDescriptor header&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="minor-changes"&gt;Minor changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/146608cc"&gt;Cleanup README.md by referencing relevant blogs/videos inside each library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b0154f33"&gt;Add some Quick Sheets and update README.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a7aad864"&gt;Add function to obtain plugins to reload after a file is modified&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>1Ô∏è‚É£ Year of Sane C++</title><link href="https://pagghiu.github.io/site/blog/2024-12-23-SaneCpp1Year.html" rel="alternate"></link><published>2024-12-23T00:00:00+01:00</published><updated>2024-12-23T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-12-23:/site/blog/2024-12-23-SaneCpp1Year.html</id><summary type="html">&lt;p&gt;Time flies, it's been already one year since the first public release of Sane C++ Libraries!&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://github.com/pagghiu/SaneCppLibraries" target="_new"&gt;&lt;code&gt;Sane C++ Libraries&lt;/code&gt;&lt;/a&gt; is a set of C++ platform abstraction libraries for macOS, Windows and Linux based on the following &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_principles.html"&gt;Principles&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;‚úÖ Fast compile times&lt;br&gt;
‚úÖ Bloat free&lt;br&gt;
‚úÖ Simple and readable code&lt;br&gt;
‚úÖ Easy to integrate&lt;br&gt;
‚õîÔ∏è No C++ Standard Library / Exceptions / RTTI&lt;br&gt;
‚õîÔ∏è No third party build dependencies (prefer OS API)&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/pagghiu/SaneCppLibraries" target="_new"&gt;&lt;code&gt;Sane C++ Libraries&lt;/code&gt;&lt;/a&gt; can be used without the C++ Standard Library but it's &lt;strong&gt;NOT&lt;/strong&gt; a STL replacement, and it doesn't try to be that.&lt;/p&gt;
&lt;p&gt;Each library is color-coded to signal its status:&lt;/p&gt;
&lt;p&gt;üü• Draft (incomplete, WIP, works on basic case)&lt;br&gt;
üü® MVP (minimum set of features have been implemented)&lt;br&gt;
üü© Usable (a reasonable set of useful features has been implemented)&lt;br&gt;
üü¶ Complete (all planned features have been implemented)  &lt;/p&gt;
&lt;h3 id="new-2024-additions"&gt;&lt;mark&gt;New&lt;/mark&gt; 2024 additions&lt;/h3&gt;
&lt;p class="chapter"&gt;Supported platforms and architectures&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;mark&gt;New&lt;/mark&gt; Support for Linux&lt;/li&gt;
&lt;li&gt;&lt;mark&gt;New&lt;/mark&gt; Support for iOS&lt;/li&gt;
&lt;li&gt;&lt;mark&gt;New&lt;/mark&gt; &lt;code&gt;SC::AsyncStreams&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;mark&gt;New&lt;/mark&gt; &lt;code&gt;SC::Tools&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;mark&gt;New&lt;/mark&gt; &lt;code&gt;SCExample&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="usable-libraries"&gt;üü© Usable Libraries&lt;/h3&gt;
&lt;p class="chapter"&gt;Promoted from üü® MVP to üü© Usable state&lt;/p&gt;

&lt;p&gt;üü© &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_process.html"&gt;&lt;code&gt;SC::Process&lt;/code&gt;&lt;/a&gt;&lt;br&gt;
üü© &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file_system.html"&gt;&lt;code&gt;SC::FileSystem&lt;/code&gt;&lt;/a&gt;&lt;br&gt;
üü© &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file_system_iterator.html"&gt;&lt;code&gt;SC::FileSystemIterator&lt;/code&gt;&lt;/a&gt;&lt;br&gt;
üü© &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file_system_watcher.html"&gt;&lt;code&gt;SC::FileSystemWatcher&lt;/code&gt;&lt;/a&gt;  &lt;/p&gt;
&lt;h3 id="mvp-libraries"&gt;üü® MVP Libraries&lt;/h3&gt;
&lt;p class="chapter"&gt;Promoted from üü• Draft to üü® MVP state&lt;/p&gt;

&lt;p&gt;üü® &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt;&lt;br&gt;
üü® &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_plugin.html"&gt;&lt;code&gt;SC::Plugin&lt;/code&gt;&lt;/a&gt;&lt;br&gt;
üü® &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file.html"&gt;&lt;code&gt;SC::File&lt;/code&gt;&lt;/a&gt;  &lt;/p&gt;
&lt;h3 id="scasync"&gt;üõú SC::Async&lt;/h3&gt;
&lt;p class="chapter"&gt;üü® Async I/O library (files, sockets, timers, processes, fs events, wake-up) &lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is the most advanced library of the project, designed to do exactly 0 dynamic allocations and it got stability and quality of life improvements.&lt;/p&gt;
&lt;p&gt;Think of a simplified libuv / Boost.ASIO that covers most of their features in a very compact codebase written according to the Sane C++ Principles!&lt;/p&gt;
&lt;p&gt;üü¢ No allocations!&lt;br&gt;
üü¢ Socket operations (send/receive/connect/accept)&lt;br&gt;
üü¢ File operations (read/write/close)&lt;br&gt;
üü¢ Child process watcher&lt;br&gt;
üü¢ Folder watcher&lt;br&gt;
üü¢ Background Threaded Work  &lt;/p&gt;
&lt;p&gt;Backends:&lt;/p&gt;
&lt;p&gt;üü¢ &lt;code&gt;epoll&lt;/code&gt;&lt;br&gt;
üü¢ &lt;code&gt;io_uring&lt;/code&gt;&lt;br&gt;
üü¢ &lt;code&gt;kqueue&lt;/code&gt;&lt;br&gt;
üü¢ &lt;code&gt;IOCP&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It's slowly getting closer to libuv and/or Boost.Asio features set&lt;/li&gt;
&lt;li&gt;Easy to integrate in any GUI Event Loop (or another IO event loop)&lt;/li&gt;
&lt;li&gt;&lt;a target="_new" href="https://pagghiu.github.io/SaneCppLibraries/page_examples.html"&gt;&lt;code&gt;SC::Example&lt;/code&gt;&lt;/a&gt; shows integration with GUI event loops&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCAsync.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCAsync.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scexample"&gt;üìù SCExample&lt;/h3&gt;
&lt;p class="chapter"&gt;WIP example browser showcase for the library&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="https://pagghiu.github.io/SaneCppLibraries/page_examples.html"&gt;&lt;code&gt;SC::Example&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Based on Dear ImGui and sokol libraries ‚ù§Ô∏è&lt;br&gt;
üü¢ Power Efficient: redraws on SC::Async IO or input events&lt;br&gt;
üü¢ Hot-reloaded on the fly through  &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_plugin.html"&gt;&lt;code&gt;SC::Plugin&lt;/code&gt;&lt;/a&gt;&lt;br&gt;
üü¢ Integrates &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; with native event Loop&lt;br&gt;
üü¢ Supports macOS, iOS, Linux and Windows  &lt;/p&gt;
&lt;p&gt;Running on macOS:&lt;/p&gt;
&lt;div class="youtube youtube-16x9"&gt;
&lt;iframe src="https://github.com/user-attachments/assets/2a38310c-6a28-4f86-a0f3-665dc15b126d" allowfullscreen seamless frameborder="0"&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br&gt;
Running on iOS:&lt;/p&gt;
&lt;div class="youtube youtube-16x9"&gt;
&lt;iframe src="https://github.com/Pagghiu/SaneCppLibraries/assets/5406873/5c7d4036-6e0c-4262-ad57-9ef84c214717" allowfullscreen seamless frameborder="0"&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;h3 id="sctools"&gt;üõ†Ô∏è SC::Tools&lt;/h3&gt;
&lt;p class="chapter"&gt;Single C++ "scripts" compiled on the fly for immediate execution&lt;/p&gt;

&lt;p&gt;&lt;a target="_new" href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;&lt;code&gt;SC::Tools&lt;/code&gt;&lt;/a&gt; replace all shell automation scripts in the project with real C++ programs dog-fooding &lt;a href="https://github.com/pagghiu/SaneCppLibraries" target="_new"&gt;&lt;code&gt;Sane C++ Libraries&lt;/code&gt;&lt;/a&gt; themselves.&lt;/p&gt;
&lt;p&gt;üü¢ &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Generates build projects for VStudio / XCode / Makefiles&lt;/li&gt;
&lt;li&gt;Builds Documentation (through Doxygen)&lt;/li&gt;
&lt;li&gt;Runs Coverage (using Clang)&lt;/li&gt;
&lt;li&gt;Runs executables executables&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;üü¢ &lt;a target="_new" href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;&lt;code&gt;SC::Package&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Primitive source code / binaries downloader for &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;üü¢ &lt;a target="_new" href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;&lt;code&gt;SC::Format&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Downloads, installs and invokes clang-format (also for the CI)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCTools.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCTools.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scbuild"&gt;üî® SC::Build&lt;/h3&gt;
&lt;p class="chapter"&gt;üü® Minimal self-hosted build system where builds are described in C++&lt;/p&gt;
&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_build.html"&gt;&lt;code&gt;SC::Build&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Support generating multiple projects from a single definition&lt;br&gt;
üü¢ Support generating Makefile for Linux and macOS&lt;br&gt;
üü¢ Support generating macOS and iOS bundles with icons for XCode&lt;br&gt;
üü¢ Support building specific configuration and architecture&lt;br&gt;
üü¢ Support paths with spaces üòé&lt;br&gt;
üü¢ Simplify build definition&lt;br&gt;
üü¢ Support generating projects for Windows subsystem&lt;br&gt;
üü¢ Add new actions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;generate&lt;/code&gt; - generates project files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;configure&lt;/code&gt; - downloads third party dependencies&lt;/li&gt;
&lt;li&gt;&lt;code&gt;build&lt;/code&gt; - invokes host build tool to build&lt;/li&gt;
&lt;li&gt;&lt;code&gt;run&lt;/code&gt; - runs the default built executable&lt;/li&gt;
&lt;li&gt;&lt;code&gt;documentation&lt;/code&gt; - Builds the doxygen documentation&lt;/li&gt;
&lt;li&gt;&lt;code&gt;coverage&lt;/code&gt; - Generates coverage using clang&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCBuild.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCBuild.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scprocess"&gt;‚öñÔ∏è SC::Process&lt;/h3&gt;
&lt;p class="chapter"&gt;üü© Create Child processes, chain them, read outputs.&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_process.html"&gt;&lt;code&gt;SC::Process&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Improve API ease of use&lt;br&gt;
üü¢ Improve stability and reliability on Posix&lt;br&gt;
üü¢ Support custom working directory&lt;br&gt;
üü¢ Support custom environment variables&lt;br&gt;
üü¢ Support ignoring child process stdout/stderr  &lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCProcess.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCProcess.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scplugin"&gt;üîå SC::Plugin&lt;/h3&gt;
&lt;p class="chapter"&gt;üü® Minimal dependency based plugin system with hot-reload&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_plugin.html"&gt;&lt;code&gt;SC::Plugin&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Allow overriding sysroot path&lt;br&gt;
üü¢ Capture compiler and linker output&lt;br&gt;
üü¢ Intercept and use environment CFLAGS / LDFLAGS&lt;br&gt;
üü¢ QueryInterface-like mechanism&lt;br&gt;
üü¢ Multiple include paths&lt;br&gt;
üü¢ Track number of reloads and load time for plugins&lt;br&gt;
üü¢ Detect Visual Studio Path dynamically  &lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCPlugin.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCPlugin.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scfilesystemwatcher"&gt;üëÄ SC::FileSystemWatcher&lt;/h3&gt;
&lt;p class="chapter"&gt;üü© Notifications {add, remove, rename, modified} for files and directories&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file_system_watcher.html"&gt;&lt;code&gt;SC::FileSystemWatcher&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Improve reliability&lt;br&gt;
üü¢ Support iOS using the (private) FSEvents framework&lt;br&gt;
üü¢ Can monitor files in a background thread or using SC::Async  &lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCFileSystemWatcher.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCFileSystemWatcher.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scfilesystem"&gt;üóÉÔ∏è SC::FileSystem&lt;/h3&gt;
&lt;p class="chapter"&gt;üü© File System operations { exists, copy, delete } for { files and directories }&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_file_system.html"&gt;&lt;code&gt;SC::FileSystem&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Improve reliability&lt;br&gt;
üü¢ Symlinks creation  &lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCFileSystem.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCFileSystem.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="schashing"&gt;#Ô∏è‚É£ SC::Hashing&lt;/h3&gt;
&lt;p class="chapter"&gt;üü© Compute MD5, SHA1 or SHA256 hashes for a stream of bytes&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_hashing.html"&gt;&lt;code&gt;SC::Hashing&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ C Bindings&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCHashing2.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCHashing2.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="schttp"&gt;üï∏Ô∏è SC::Http&lt;/h3&gt;
&lt;p class="chapter"&gt;üü• HTTP parser, client and server&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_http.html"&gt;&lt;code&gt;SC::Http&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Improved to the level of self-hosting this website (non-production)&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pagghiu.github.io/site/blog/SCHttp.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SCHttp.png"&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="scasyncstreams"&gt;üö∞ SC::AsyncStreams&lt;/h3&gt;
&lt;p class="chapter"&gt;üü• Read / transform / write data concurrently from async sources to destinations.&lt;/p&gt;

&lt;p&gt;See &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async_streams.html"&gt;&lt;code&gt;SC::AsyncStreams&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;üü¢ Inspired from node.js streams&lt;br&gt;
üü¢ Back-pressure handling&lt;br&gt;
üü¢ Readable Streams (Sources)&lt;br&gt;
üü¢ Writable Streams (Sinks / Destinations)&lt;br&gt;
üü¢ Transform Streams&lt;br&gt;
üü¢ Pipelines (Source -&amp;gt; Transforms -&amp;gt; Multiple Sinks)  &lt;/p&gt;
&lt;p&gt;API is still very WIP&lt;/p&gt;
&lt;h3 id="continuous-integration"&gt;ü§ñ Continuous Integration&lt;/h3&gt;
&lt;p&gt;üü¢ Runs using GitHub runners&lt;br&gt;
üü¢ Tests run on Windows Server 2019 / 2022, Linux and macOS&lt;br&gt;
üü¢ No shell scripting (uses &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/page_tools.html"&gt;&lt;code&gt;SC::Tools&lt;/code&gt;&lt;/a&gt;)&lt;br&gt;
üü¢ No external dependencies other than doxygen for docs and clang&lt;br&gt;
üü¢ Verifies code to be formatted properly on all Pull Requests&lt;br&gt;
üü¢ Builds and publishes documentation at every commit&lt;br&gt;
üü¢ Computes and publishes code coverage at every commit  &lt;/p&gt;
&lt;h2 id="youtube"&gt;ü§≥ YouTube&lt;/h2&gt;
&lt;p&gt;üü¢ 32 YouTube videos produced  &lt;/p&gt;
&lt;p&gt;I've always liked the idea of producing some videos to shed some light on the development process and get better at explaining myself.
This has been taking a little bit of time away from actual coding, but I enjoyed doing them!&lt;/p&gt;
&lt;p&gt;Take a look at my &lt;a href="https://www.youtube.com/@Pagghiu" target="_new"&gt;YouTube Channel&lt;/a&gt; if you're interested!&lt;/p&gt;
&lt;h2 id="blog"&gt;üìí Blog&lt;/h2&gt;
&lt;p&gt;üü¢ 10 Blog Posts written  &lt;/p&gt;
&lt;p&gt;Writing update blog post has also been consuming some time but it was worth it.&lt;br&gt;
I think it's a nice way to keep up to date with latest additions of the projects spending a very minimal amount of readers time.&lt;/p&gt;
&lt;h2 id="whats-next"&gt;What's next&lt;/h2&gt;
&lt;p&gt;It's important not to lose focus and continuing to improve existing libraries.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MOAR&lt;/strong&gt; examples&lt;/li&gt;
&lt;li&gt;Try promoting all libraries in üü• Draft state to üü® MVP&lt;/li&gt;
&lt;li&gt;Improve testing and code coverage&lt;/li&gt;
&lt;li&gt;Create more C-API wrappers (similar to the sc_hashing prototype)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MOAR&lt;/strong&gt; examples&lt;/li&gt;
&lt;li&gt;Improve Documentation (maybe with Tutorials)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MOAR&lt;/strong&gt; examples&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It feels like the most advanced functionality is already in the Async I/O capability of the libraries, but there is still so much to do.&lt;/p&gt;
&lt;p&gt;It would be great improving &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; to make it competitive with more famous libraries like Boost.Asio and libuv.
Ideally &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; should cover 80% of common use cases but with a much smaller and faster to compile code base.
The C-API for &lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async.html"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; should try to be close to libuv. 
Can we make it so that unmodified libuv programs can be compiled against such C-API? &lt;/p&gt;
&lt;p&gt;&lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_async_streams.html"&gt;&lt;code&gt;SC::AsyncStreams&lt;/code&gt;&lt;/a&gt; should be improved to bring higher level functionality that exists in successful server runtimes like node.js.&lt;/p&gt;
&lt;p&gt;&lt;a target="_new" href="http://pagghiu.github.io/SaneCppLibraries/library_http.html"&gt;&lt;code&gt;SC::Http&lt;/code&gt;&lt;/a&gt; should grow to support enough HTTP 1.1 to become useful at least to create a quick webserver when it's needed.
WebSocket should be implemented on top of it.
It would be great to implement HTTPS support without needing to include and link an external library like OpenSSL.
Exploring the proper Windows and macOS API to do proper handshake and cryptography will be very useful.&lt;/p&gt;
&lt;p&gt;How much of these objectives will be achievable highly depends on if the &lt;em&gt;solo development&lt;/em&gt; experience will continue to be the norm.  &lt;/p&gt;
&lt;p&gt;See you soon!!üéäüëãüèº&lt;/p&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üå´Ô∏è Sane C++ November 24</title><link href="https://pagghiu.github.io/site/blog/2024-11-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-11-30T00:00:00+01:00</published><updated>2024-11-30T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-11-30:/site/blog/2024-11-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for November 2024! &lt;br&gt; Main focus of the month is the addition of Async Streams!&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
    &lt;nav class="is-sticky-above-lg "&gt;
    &lt;details open=""&gt;
        &lt;summary&gt;Content&lt;/summary&gt;
        &lt;ul&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ November 2024&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;SC::AsyncStreams&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;Additional fixes&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/details&gt;
    &lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;

&lt;section&gt;
&lt;h2&gt;SC::AsyncStreams&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Pushing it forward&lt;/p&gt;
&lt;p&gt;
The &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async_streams.html" target="_new"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; library has been extended with the addition of &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async_streams.html" target="_new"&gt;SC::AsyncStreams&lt;/a&gt;!&lt;br&gt;
Async Streams are largely inspired by &lt;a href="https://nodejs.org/api/stream.html" target="_new"&gt;node.js Streams&lt;/a&gt;, a very powerful tool to process large amounts of data in parallel.&lt;br&gt;
The basic idea about an async stream is to create a Source / Sink abstraction (also called Readable and Writable) and process small buffers of data at time.&lt;br&gt;
The state machine that coordinates this interaction handles data buffering and more importantly handles also back-pressure, that means:
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;Pausing&lt;/b&gt; the readable stream when a connected writable stream cannot process data fast enough&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Resuming&lt;/b&gt; the readable stream when a connected writable stream is finally able to receive more data&lt;/li&gt;
&lt;/ul&gt;
By implementing streams on top of async operations it's possible to run many of them concurrently very efficiently.&lt;br&gt;
When properly implemented for example an async pipeline can concurrently read from disk, write to a socket while compressing data.&lt;br&gt;
For now only Readable / Writable File and Socket streams have been implemented, but Async Transform Streams (for compression) will be next!&lt;br&gt;

Most notable differences with node.js streams are for now:
&lt;ul&gt;
&lt;li&gt;No allocation (designed to work inside user-provided list of buffers)&lt;/li&gt;
&lt;li&gt;No object mode&lt;/li&gt;
&lt;li&gt;Fixed Layout to create data pipelines (&lt;code&gt;AsyncPipeline&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onData&lt;/code&gt; support only (no &lt;code&gt;readable&lt;/code&gt; event)&lt;/li&gt;
&lt;/ul&gt;

&lt;code&gt;Async Streams&lt;/code&gt; are for now in üü• Draft state.
It's also possible that its API will evolve a little bit to be less verbose and there is also lack of nice examples, aside from the tests.&lt;br&gt;
It's better waiting for it to become stable before doing anything significant with it.&lt;br&gt;
Some changes and fixes in the &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async_streams.html" target="_new"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; library
have been made necessary to support Async Streams.
&lt;br&gt;&lt;br&gt;
This is the list of related commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/339f291e" target="_new"&gt;Async: Add AsyncReadableStream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/11a2b925" target="_new"&gt;Async: Add AsyncWritableStream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9d9d550b" target="_new"&gt;Async: Draft AsyncPipeline and AsyncRequest{Readable | Writable} Stream&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fc97464e" target="_new"&gt;Async: Extend AsyncRequest{Readable | Writable}Stream to Socket Send/Receive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/46174b02" target="_new"&gt;Async: Make AsyncPipeline and AsyncRequest{Readable | Writable}Stream public&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/15ec1855" target="_new"&gt;Async: Make AsyncSocket{Send | Receive} buffer and handle public&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a6bdc110" target="_new"&gt;Async: Rename AsyncPipeline::Sink to AsyncPipeline::Pipe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3c780170" target="_new"&gt;Async: Reorganize AsyncTest for clarity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c251205c" target="_new"&gt;Async: Use offsets only if explicitly set in AsyncFile{Read | Write}&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;Additional fixes&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Fix fix fix&lt;/p&gt;
&lt;p&gt;

And just like every update, a bunch of fixes and improvements to all libraries have been committed.
Nothing specific stands out this update, but for completeness this is the list of related commits:          
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9347ca62" target="_new"&gt;Build: Bypass VMWare hgfs issue setting wrong modified time for new files&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a075702d" target="_new"&gt;Build: Support linking system libraries in XCode&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a572d897" target="_new"&gt;Containers: Fix compile errors under latest MSVC&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ee4947b2" target="_new"&gt;Documentation: Enable warnings as errors&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/596f0523" target="_new"&gt;Documentation: Update README.md with latest videos&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b0778887" target="_new"&gt;Foundation: Add equality operator to Function&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0ad81879" target="_new"&gt;Foundation: Add HeapBuffer&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c750871f" target="_new"&gt;Foundation: Add Span::equals&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7f08864b" target="_new"&gt;Foundation: Add Span::get(int)&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/14f37f58" target="_new"&gt;Foundation: Add StrongID&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e80edc21" target="_new"&gt;Hashing: Improve documentation&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/23e7b37b" target="_new"&gt;Meta: Ignore sync folder and icon files&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fa9a48cb" target="_new"&gt;Tools: Rebuild bootstrap when make fails&lt;/a&gt; &lt;/li&gt;

&lt;/ul&gt;          
&lt;/p&gt;
&lt;/section&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üåä Sane C++ August 24</title><link href="https://pagghiu.github.io/site/blog/2024-08-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-08-30T00:00:00+02:00</published><updated>2024-08-30T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-08-30:/site/blog/2024-08-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for August 2024!&lt;br&gt; August has been spent doing some first round of improvements to the &lt;code&gt;SC::Http&lt;/code&gt; library.&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
    &lt;nav class="is-sticky-above-lg "&gt;
    &lt;details open=""&gt;
        &lt;summary&gt;Content&lt;/summary&gt;
        &lt;ul&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ August 2024&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;SC::AsyncStreams&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;Additional fixes&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/details&gt;
    &lt;/nav&gt;
&lt;/aside&gt;

&lt;div id="content" role="document"&gt;



&lt;section&gt;
&lt;h2&gt;SC::AsyncStreams&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Pushing it forward&lt;/p&gt;
&lt;p&gt;
  The &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async_streams.html" target="_new"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; library has been extended with the addition of &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async_streams.html" target="_new"&gt;SC::AsyncStreams&lt;/a&gt;!&lt;br&gt;
  Async Streams are largely inspired by &lt;a href="https://nodejs.org/api/stream.html" target="_new"&gt;node.js Streams&lt;/a&gt;, a very powerful tool to process large amounts of data in parallel.&lt;br&gt;
  The basic idea about an async stream is to create a Source / Sink abstraction (also called Readable and Writable) and process small buffers of data at time.&lt;br&gt;
  The state machine that coordinates this interaction handles data buffering and more importantly handles also back-pressure, that means:
  &lt;ul&gt;
  &lt;li&gt;&lt;b&gt;Pausing&lt;/b&gt; the readable stream when a connected writable stream cannot process data fast enough&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Resuming&lt;/b&gt; the readable stream when a connected writable stream is finally able to receive more data&lt;/li&gt;
  &lt;/ul&gt;
  By implementing streams on top of async operations it's possible to run many of them concurrently very efficiently.&lt;br&gt;
  When properly implemented for example an async pipeline can concurrently read from disk, write to a socket while compressing data.&lt;br&gt;
  For now only Readable / Writable File and Socket streams have been implemented, but Async Transform Streams (for compression) will be next!&lt;br&gt;

  Most notable differences with node.js streams are for now:
  &lt;ul&gt;
  &lt;li&gt;No allocation (designed to work inside user-provided list of buffers)&lt;/li&gt;
  &lt;li&gt;No object mode&lt;/li&gt;
  &lt;li&gt;Fixed Layout to create data pipelines (&lt;code&gt;AsyncPipeline&lt;/code&gt;)&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;onData&lt;/code&gt; support only (no &lt;code&gt;readable&lt;/code&gt; event)&lt;/li&gt;
  &lt;/ul&gt;

  &lt;code&gt;Async Streams&lt;/code&gt; are for now in üü• Draft state.
  It's also possible that its API will evolve a little bit to be less verbose and there is also lack of nice examples, aside from the tests.&lt;br&gt;
  It's better waiting for it to become stable before doing anything significant with it.&lt;br&gt;
  Some changes and fixes in the &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async_streams.html" target="_new"&gt;&lt;code&gt;SC::Async&lt;/code&gt;&lt;/a&gt; library
  have been made necessary to support Async Streams.
  &lt;br&gt;&lt;br&gt;
  This is the list of related commits:
  &lt;ul&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/339f291e" target="_new"&gt;Async: Add AsyncReadableStream&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/11a2b925" target="_new"&gt;Async: Add AsyncWritableStream&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9d9d550b" target="_new"&gt;Async: Draft AsyncPipeline and AsyncRequest{Readable | Writable} Stream&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fc97464e" target="_new"&gt;Async: Extend AsyncRequest{Readable | Writable}Stream to Socket Send/Receive&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/46174b02" target="_new"&gt;Async: Make AsyncPipeline and AsyncRequest{Readable | Writable}Stream public&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/15ec1855" target="_new"&gt;Async: Make AsyncSocket{Send | Receive} buffer and handle public&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a6bdc110" target="_new"&gt;Async: Rename AsyncPipeline::Sink to AsyncPipeline::Pipe&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3c780170" target="_new"&gt;Async: Reorganize AsyncTest for clarity&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c251205c" target="_new"&gt;Async: Use offsets only if explicitly set in AsyncFile{Read | Write}&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/p&gt;
  &lt;/section&gt;

  &lt;section&gt;
  &lt;h2&gt;Additional fixes&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
  &lt;p class="chapter"&gt;Fix fix fix&lt;/p&gt;
  &lt;p&gt;

  And just like every update, a bunch of fixes and improvements to all libraries have been committed.
  Nothing specific stands out this update, but for completeness this is the list of related commits:          
  &lt;ul&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9347ca62" target="_new"&gt;Build: Bypass VMWare hgfs issue setting wrong modified time for new files&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a075702d" target="_new"&gt;Build: Support linking system libraries in XCode&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a572d897" target="_new"&gt;Containers: Fix compile errors under latest MSVC&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ee4947b2" target="_new"&gt;Documentation: Enable warnings as errors&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/596f0523" target="_new"&gt;Documentation: Update README.md with latest videos&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b0778887" target="_new"&gt;Foundation: Add equality operator to Function&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0ad81879" target="_new"&gt;Foundation: Add HeapBuffer&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c750871f" target="_new"&gt;Foundation: Add Span::equals&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7f08864b" target="_new"&gt;Foundation: Add Span::get(int)&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/14f37f58" target="_new"&gt;Foundation: Add StrongID&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e80edc21" target="_new"&gt;Hashing: Improve documentation&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/23e7b37b" target="_new"&gt;Meta: Ignore sync folder and icon files&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fa9a48cb" target="_new"&gt;Tools: Rebuild bootstrap when make fails&lt;/a&gt; &lt;/li&gt;

  &lt;/ul&gt;          
  &lt;/p&gt;
  &lt;/section&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üèñÔ∏è Sane C++ July 24</title><link href="https://pagghiu.github.io/site/blog/2024-07-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-07-31T00:00:00+02:00</published><updated>2024-07-31T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-07-31:/site/blog/2024-07-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the update post for July 2024!&lt;br&gt;The focus of the month has been building a nicer showcase for &lt;code&gt;SC::Plugin&lt;/code&gt; and &lt;code&gt;SC::Serialization&lt;/code&gt; libraries.&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
  &lt;nav class="is-sticky-above-lg "&gt;
    &lt;details open=""&gt;
      &lt;summary&gt;Content&lt;/summary&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ June 2024&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;SCExample&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;SC::Serialization&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;SC::Plugin&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;SC::Build&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;Contributions&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a class="secondary" href="#section-6"&gt;Additional fixes&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/details&gt;
  &lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;

&lt;section&gt;
&lt;h2&gt;SCExample&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Serializer example&lt;/p&gt;
&lt;p&gt;
The hot-reload system of SCExample has been tuned so that each internal example is just an hot-reloaded Plugin.
It's now very convenient to iteratively build them and experiment!
A nice serialization example has been added to SCExample,  based on a very well known piece of code from the official imgui demo.
State of the canvas control is saved to binary and json using the automatic serialization provided by the reflection system.
It's also showing a somewhat advanced usage of the Reflection system, that is how to wrap a "custom" vector implementation (ImVector&lt;T&gt;)


&lt;iframe width="700" height="400" src="https://github.com/user-attachments/assets/2a38310c-6a28-4f86-a0f3-665dc15b126d" frameborder="0" allowfullscreen&gt;
&lt;/iframe&gt;

There is a video where I've been recording the most important bits of this development:                    
&lt;p&gt;
  &lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/d7DXxC6xG_A?si=vyQhUZ_vU5Rtn0pi"
  title="YouTube video player" frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;

And as a last nicety, SCExample has been fully ported to iOS!
Hot-reload obviously requires root access to install clang compiler and a sysroot on iOS, so it will work only if you have an active jailbreak.

Also here I've been recording a video on finalizing porting SCExample to iOS.


&lt;p&gt;
  &lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/6DfykfYCQdY?si=vyQhUZ_vU5Rtn0pi"
  title="YouTube video player" frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;


This is the list of SCExample related commits:
&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/85e6352b" target="_new"&gt;SCExample: Port to iOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c839d17f" target="_new"&gt;SCExample: Show compile errors when hovering examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/641c9276" target="_new"&gt;SCExample: Refactoring hot-reload plugins as examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b14ef5ed" target="_new"&gt;SCExample: Add Serialization example&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;SC::Serialization&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Serialize all the things&lt;/p&gt;
&lt;p&gt;

While building the Serialization example, a few fixes have been made necessary to 
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_serialization_binary.html" target="_blank"&gt;SC::SerializationBinary&lt;/a&gt;&lt;/code&gt;.
The first has been supporting the bool data type that for some obscure reason was missing from the primitive types.
Some helpers to read and write the schema together with serialized data have been added to make it easy supporting versioned binary serialization.
Fields can be added or removed, and the serializer will still try to load data that can be converted assuming a matching order.
There is also some support for changing field types. For example a float field that is converted to int (or vice-versa) will receive a truncated value on deserialization.

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fe203bb1" target="_new"&gt;Reflection: Add vector manipulation methods to ExtendedTypeInfo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0419d749" target="_new"&gt;Reflection: Support bool primitive type&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f83bb784" target="_new"&gt;SerializationBinary: Add writeWithSchema and loadVersionedWithSchema&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/03ef3a13" target="_new"&gt;SerializationBinary: Reduce boilerplate needed to wrap a custom vector container&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/18d871c2" target="_new"&gt;SerializationBinary: Support bool primitive type&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/89814957" target="_new"&gt;SerializationText: Reduce boilerplate needed to wrap a custom vector container&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;SC::Plugin&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Hot-Reload like there is no tomorrow&lt;/p&gt;
&lt;p&gt;

&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_plugin.html" target="_blank"&gt;SC::Plugin&lt;/a&gt;&lt;/code&gt;  library has received a few improvements, 
like the ability to specify a path for the sysroot under clang (needed on iOS), and it's capturing compiler and linker outputs.
This last one allows showing compile errors in the plugin host app, that is a nice addition to SCExample.
Finally some dynamic export clauses have been added to many libraries in order for Plugins to find symbols in the host application that is loading them.
This will for sure increase the executable size as the linker will not be able to trim such classes as "unused" code, even if they're not referenced by any Plugin.
Probably some macro to disable this "export by default" behavior will be added for anyone that wants to use Sane C++ Libraries without the Plugin Library or without 
needing to use Sane C++ Libraries type across dynamic library boundaries.

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e6d21a84" target="_new"&gt;Plugin: Allow overriding isysroot path&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/61b89284" target="_new"&gt;Plugin: Capture compiler and linker output&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1ffb8749" target="_new"&gt;Everywhere: Add export clause for use across Plugin boundaries&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;SC::Build&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Actually got a promotion!&lt;/p&gt;
&lt;p&gt;
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html" target="_blank"&gt;SC::Build&lt;/a&gt;&lt;/code&gt; library has 
received some improvements too, supporting generation of iOS project and application icon for Xcode app bundle.
There are still many missing features and too many hardcoded defaults but I feel that the library deserves more than a Draft status.
For this reason I've been promoting it to MVP status: maybe this will become an incentive to add more features to make it usable!

&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d865cc41" target="_new"&gt; Build: Add iOS storyboard generation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ca0fb7b6" target="_new"&gt; Build: Elevate to MVP status&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6551c1e3" target="_new"&gt; Build: Support application icon in Xcode app bundles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/70d32b7d" target="_new"&gt; Build: Support iOS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;Contributions&lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Together we can build more!&lt;/p&gt;
&lt;p&gt;          
This month &lt;a href="https://x.com/_plop_" target="_new"&gt;Jeremy Laumon&lt;/a&gt; has been adding &lt;code&gt;.natvis&lt;/code&gt; support for Arrays!

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/415dc323" target="_new"&gt;DebugVisualizers: Add natvis for SegmentedItems and Array&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;          
&lt;/p&gt;
&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;Additional fixes&lt;a href="#section-6" id="section-6" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Fix fix fix&lt;/p&gt;
&lt;p&gt;

And then the usual amount of monthly fixes!
I can never stress how important is to use the libraries in a real project or even just in an example app to trigger issues and identify missing bits!
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/050bad6a" target="_new"&gt;Strings: Export String and some SmallString&lt;N&gt; for use across Plugin boundaries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1d485307" target="_new"&gt;Containers: Fix some incorrect Array member functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/20f2dd9b" target="_new"&gt;FileSystemWatcher: Add internal header with FSEvents declarations for iOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/54fb28bc" target="_new"&gt;Documentation: Improve README and fix descriptions of some libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5a72dcf1" target="_new"&gt;FileSystem: Add read and write overloads for uint8_t&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/915367a5" target="_new"&gt;Strings: Fix doubles parsing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a176a3e7" target="_new"&gt;Everywhere: Add lifetime bound attribute for StringViews and Spans&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e3121af6" target="_new"&gt;Foundation: Add Span::reinterpret_as_array_of&lt;T&gt;()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e5475aff" target="_new"&gt;Tools: Use Github to download doxygen releases&lt;/a&gt;&lt;/li&gt;

&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;

&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚òÄÔ∏è Sane C++ June 24</title><link href="https://pagghiu.github.io/site/blog/2024-06-30-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-06-30T00:00:00+02:00</published><updated>2024-06-30T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-06-30:/site/blog/2024-06-30-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the Sane C++ Libraries June 2024 update post!&lt;br&gt; The month has been spent mainly building SCExample, a small GUI example app to showcase some Libraries (mainly &lt;code&gt;SC::Async&lt;/code&gt; / &lt;code&gt;SC::Plugin&lt;/code&gt; / &lt;code&gt;SC::FileSystemWatcher&lt;/code&gt;).&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ June 2024&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;SCExample&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;SC::Async&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;SC::Plugin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;SC::FileSystemWatcher&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;SC::Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-6"&gt;Additional fixes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;

&lt;section&gt;
&lt;h2&gt;SCExample&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Always give a good example&lt;/p&gt;
&lt;p&gt;
SCExample is a small GUI application based on sokol_app / sokol_gfx libraries, providing window abstraction and graphics api abstraction and dear-imgui for the UI.

&lt;iframe width="700" height="400" src="https://github.com/Pagghiu/SaneCppLibraries/assets/5406873/4ad12058-6bc2-4316-90f8-4ba4c05e28de" frameborder="0" allowfullscreen&gt;
&lt;/iframe&gt;

Building this application has been mostly documented in the following YouTube videos:

&lt;p&gt;
First step has been putting together a pure cross platform GUI application (win/linux/macos), making sure to pause the render loop in absence of user inputs:&lt;br&gt;
&lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/4acqdGcUQnE?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;


&lt;p&gt;
Second step has been integrating the GUI event loop with the SC::Async I/O library (always cross-platform).&lt;br&gt;
&lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/z7QaTa7drFo?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;


&lt;p&gt;
And lastly showcasing the integration of SC::FileSystemWatcher and SC::Plugin to watch source files that are being hot-reloaded as plugins (dynamic libraries).&lt;br&gt;
Also in this case the cross-platform aspect has been preserved.&lt;br&gt;
&lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/BXybEWvSpGU?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;

This is the list of SCExample related commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/6f29135e" target="_new"&gt;SCExample: Create (sokol+dear imgui) app re-drawing on user input only&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4c72b42e" target="_new"&gt;SCExample: Display number of reloads and last load time of hot-reloaded plugins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/96e6df4b" target="_new"&gt;SCExample: Implement simple hot-reload to showcase Plugin and FileSystemWatcher libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5be2d020" target="_new"&gt;SCExample: Integrate SC::AsyncEventLoop by using SC::AsyncEventLoopMonitor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/947f8a7f" target="_new"&gt;SCExample: Transform floating window into a toolbar&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;SC::Async&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;A single event loop is never enough&lt;/p&gt;
&lt;p&gt;

A small but useful addition to the &lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;&lt;/code&gt; library has been the &lt;code&gt;SC::AsyncEventLoopMonitor&lt;/code&gt; class.
This class wraps most of the required machinery to integrate &lt;code&gt;SC::Async&lt;/code&gt; event loop in an application that has a different main event loop (GUI or IO)

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/784ffcf7" target="_new"&gt;Async: Add AsyncEventLoopMonitor to poll the event loop from a background thread&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;SC::Plugin&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Hot-Reload like there is no tomorrow&lt;/p&gt;
&lt;p&gt;

&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_plugin.html" target="_blank"&gt;SC::Plugin&lt;/a&gt;&lt;/code&gt;  library has been receiving some love, with the addition of a queryInterface-like mechanism helping to define contracts between plugins and the host application.

It's possible to control linking libc / libc++, adding some custom include directories and disabling exceptions.
SC::Plugin now monitors &lt;code&gt;CFLAGS&lt;/code&gt; and &lt;code&gt;LDFLAGS&lt;/code&gt; environment variables (if defined) of the host environment, to allow linking the correct sysroot on posix systems.
Some fixes too have been needed on macOS where duplicated plugin symbols from different compiled &lt;code&gt;.dylibs&lt;/code&gt; can wrongly increment their refcount, preventing from unloading them.

&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d6816b1d" target="_new"&gt;Plugin: Add PluginCompilerEnvironment to intercept and use CFLAGS and LDFLAGS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/94ad0d95" target="_new"&gt;Plugin: Add PluginDynamicLibrary::queryInterface&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/efc48639" target="_new"&gt;Plugin: Add PluginSysroot and build options to allow linking libc and libc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/64ee7266" target="_new"&gt;Plugin: Allow multiple include paths&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9466040a" target="_new"&gt;Plugin: Change appendDefinitions into replaceDefinitions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/72354c8f" target="_new"&gt;Plugin: Disable exceptions under MSVC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/8ad2aca3" target="_new"&gt;Plugin: Hide Plugin symbols by default on macOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f7dfa225" target="_new"&gt;Plugin: Track number of reloads and last load time for all plugins&lt;/a&gt;&lt;/li&gt;


&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;SC::FileSystemWatcher&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Make it actually usable&lt;/p&gt;
&lt;p&gt;

Using &lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_filesystemwatcher.html" target="_blank"&gt;SC::FileSystemWatcher&lt;/a&gt;&lt;/code&gt; 
inside SC::Example has exposed some usability issues and bugs (mainly repeated notifications), that have been promptly fixed.


&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/05c0edd0" target="_new"&gt;FileSystemWatcher: Filter repeated notifications on macOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ffada009" target="_new"&gt;FileSystemWatcher: Improve API usability &lt;/a&gt;&lt;/li&gt;

&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;SC::Build&lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Spaces and GUI Apps&lt;/p&gt;
&lt;p&gt;


&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html" target="_blank"&gt;SC::Build&lt;/a&gt;&lt;/code&gt; 
can now generate Xcode projects for gui applications creating app bundles on macOS for the Xcode backend.
The configure phase will download required dependencies (like sokol or dear-imgui for SCExample).
This is not ideal as it requires internet connection, so it will be probably be made optional in some future update.

It can now build from paths with spaces (even when using the Makefile backend...) and generates Xcode projects avoiding any warning.
Some of the fixes have ramifications also on the SC::Tools that bootstraps SC::Build.


&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2be7d392" target="_new"&gt;Build: Collapse all non-apple TARGET_OS to just linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/931fe7c0" target="_new"&gt;Build: Escape quotes in Make and Xcode backends&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/df3eae83" target="_new"&gt;Build: Fix generation of compile_commands.json file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e6acc3d0" target="_new"&gt;Build: Fix Makefile force clean on platform specific makefiles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b2252911" target="_new"&gt;Build: Generate makefiles supporting building from paths with spaces&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f711566e" target="_new"&gt;Build: Improve Xcode generator not to produce warnings under Xcode 15&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0214cdb7" target="_new"&gt;Build: Support creating app bundles on Xcode&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b2e3cef0" target="_new"&gt;Tools: Improve Makefile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0b802ba2" target="_new"&gt;Tools: Support building a tool from path containing spaces&lt;/a&gt;&lt;/li&gt;

&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;Additional fixes&lt;a href="#section-6" id="section-6" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Fix fix fix&lt;/p&gt;
&lt;p&gt;



And just like every month, working on SCExample has generated a number of minor fixes, API improvements / refactoring.&lt;br&gt;
All of them have been proudly committed to the main branch!


&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/30f07bd1" target="_new"&gt;Containers: Fix bug in VectorMap::remove&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/03b81f67" target="_new"&gt;FileSystem: Add writeStringAppend&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/95d90abc" target="_new"&gt;Foundation: Add Host Operating System detection&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4d9d9ae4" target="_new"&gt;Process: Avoid creating windows when spawning a new process&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a7859c5c" target="_new"&gt;Process: Improve ProcessTest compatibility&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/03cd51dd" target="_new"&gt;Process: Rename StringsTable to StringsArena&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1f332027" target="_new"&gt;Reflection: Disable SC_REFLECT_AUTOMATIC on older clang versions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a9412644" target="_new"&gt;Reflection: Fix compile error due to a GCC bug&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e230df7b" target="_new"&gt;Strings: Add StringHashFNV&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1c0fd898" target="_new"&gt;Strings: Do not let StringBuilder leave unterminated string when format fails&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fd246950" target="_new"&gt;Time: Make HighResolutionCounter::snap return reference to HighResolutionCounter itself&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1b50cb3b" target="_new"&gt;Documentation: Add SCExample to the Examples page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/32181ff8" target="_new"&gt;Documentation: Update README with latest video&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/07591f19" target="_new"&gt;Documentation: Update README with May 2024 blog post&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/476fbf88" target="_new"&gt;Documentation: Update SCExample documentation&lt;/a&gt;&lt;/li&gt;



&lt;/ul&gt;


&lt;/p&gt;
&lt;/section&gt;

&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üå∏ Sane C++ May 24</title><link href="https://pagghiu.github.io/site/blog/2024-05-31-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-05-31T00:00:00+02:00</published><updated>2024-05-31T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-05-31:/site/blog/2024-05-31-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the Sane C++ Libraries May 2024 update post!&lt;br&gt; No big feature has been added this month, so this is a month a bugfixes and incremental improvements.&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ May 2024&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;SC::Async&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;SC::Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;GitHub CI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;SC::Socket&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;First contribution!&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-6"&gt;Additional fixes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;
&lt;section&gt;
&lt;h2&gt;SC::Async&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Fine tuning&lt;/p&gt;
&lt;p&gt;
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;&lt;/code&gt;
Library has been receiving some fixes and an useful refactoring.
&lt;/p&gt;
&lt;p&gt;
&lt;code&gt;AsyncEventLoop::runOnce&lt;/code&gt; has been split into three methods, separating: 
&lt;ul&gt;

&lt;li&gt;request submission&lt;/li&gt;
&lt;li&gt; polling for new events&lt;/li&gt;
&lt;li&gt; completion callbacks dispatch&lt;/li&gt;
&lt;/ul&gt;
This allows submitting request from a "main" thread, that already has an event loop, 
blocking to poll for changes on a separate thread, and dispatching the callbacks for events received again on the same thread used for submission.
&lt;br&gt;
The main use of this would be integrating an AsyncEventLoop with another event loop from another library that already "owns" the application main thread, including a GUI event loop.
&lt;br&gt;
This refactoring has been recorded in a video
&lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/3lbyx11qDxM?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;
&lt;p&gt;
Relevant commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0526b5c"&gt; Async: Split runOnce into submitRequests, blockingPoll and dispatchCompletions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/069b4bd"&gt; Async: More precise handling of GetQueuedCompletionStatusEx on Windows 10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/138d1d8"&gt; Async: Allow re-activation of AsyncLoopTimeout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3d48f77"&gt; Async: Add ReactivateAsyncPhase to allow skipping submission on reactivation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/af1e0f0"&gt; Async: Hide KernelQueue and KernelEvents inside Internal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b7623c5"&gt; Async: Handle different GetQueuedCompletionStatusEx behavior on Windows 10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e6a5704"&gt; Async: Update time consistently both in NoWait and ForcedForwardProgress modes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
&lt;h2&gt;SC::Build&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Handmade toy build system generator grows&lt;/p&gt;
&lt;p&gt;

&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html" target="_blank"&gt;SC::Build&lt;/a&gt;&lt;/code&gt; Library 
has also been receiving some love, increasing its capability while simplifying &lt;code&gt;SC-build.cpp&lt;/code&gt; scripts:

&lt;ul&gt;
&lt;li&gt;Support generating VS2019 projects (needed by the Windows10 Github runner)&lt;/li&gt;
&lt;li&gt;Support Objective-C or Objective-C++ files&lt;/li&gt;
&lt;li&gt;Support generating multiple projects&lt;/li&gt;
&lt;li&gt;Support libraries to link (Makefile backend)&lt;/li&gt;
&lt;li&gt;Support creating non-console applications (Windows)&lt;/li&gt;
&lt;li&gt;Consistently handle all paths (include, libraries etc) as relative to project root&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;
Relevant commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2860888"&gt; Build: Generate one solution per project on Visual Studio backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2d63b73"&gt; Build: Specify target name when invoking Makefile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/35f5fc5"&gt; Build: Avoid Makefile warnings on intermediates and outputs directory creation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/5879951"&gt; Build: Support Objective-C and Objective-C++ files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9f195b3"&gt; Build: Generate platform specific Makefile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a123422"&gt; Build: Express absolute include paths as relative to project dir&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ad9f0ee"&gt; Build: Add flag to generate Visual Studio projects using Windows subsystem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b90f05c"&gt; Build: Allow selecting target for compile, build or run action&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c9dd352"&gt; Build: Simplify SC-Build with more defaults&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cab21d6"&gt; Build: Support link libraries on Makefile backend&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/df488cd"&gt; Build: Simplify usage of relative paths in includes and defines&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f0b3043"&gt; Build: Add basic multi-projects support&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;GitHub CI&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;because a good and lean CI keeps you healthy&lt;/p&gt;
&lt;p&gt; 
The GitHub CI has been simplified, consisting now of three github workflow files:
&lt;ul&gt;
&lt;li&gt;windows (windows 10 + windows 11)&lt;/li&gt;
&lt;li&gt;posix (linux + macOS)&lt;/li&gt;
&lt;li&gt;documentation and coverage (macOS)&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;p&gt;
The GitHub CI matrix feature has been used to test multiple platforms and configurations.
On all platforms both Debug and Release configurations are now being tested.
Additionally also Windows 10 has been added to the list of platform tested by the CI.
&lt;/p&gt;
&lt;p&gt;
Relevant Commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/04123ab"&gt;CI: Skip documentation deployment step outside of forks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/097d01d"&gt;CI: Merge Linux and macOS into a posix runner&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9a4d1f2"&gt;CI: Run GitHub workflows only on main branch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b59a345"&gt;CI: Fix windows pipeline&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cdd5e3a"&gt;CI: Run the tests on Windows 10 and Windows 11 both in Debug and Release&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f8067a8"&gt;CI: Set GitHub workflow badges to the correct URL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fd1dc37"&gt;CI: Skip documentation deployment step on forks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;SC::Socket&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Sockets keep your feet warm&lt;/p&gt;

&lt;p&gt;
&lt;code&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/library_socket.html" target="_blank"&gt;
SC::Socket
&lt;/a&gt;&lt;/code&gt; library has been cleaned up, after some "encouragement" given in a issue that was trying to expand UDP support.
&lt;/p&gt;

&lt;p&gt;
Relevant commits:
&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/645dae9"&gt; Socket: Move examples from header to snippets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9755163"&gt; Socket: Move SocketNetworking::resolveDNS into its own SocketDNS class&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/befe282"&gt; Socket: Require a valid socket for both SocketClient::connect overloads&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/cf3034e"&gt; Socket: Split SocketServer::bind out of SocketServer::listen to allow creating UDP servers&lt;/a&gt;&lt;/li&gt;

&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;First contribution!&lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;

First contributor of the project has appeared!&lt;br&gt;
Thanks to &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/pull/18" target="_blank"&gt; this contributor PR&lt;/a&gt; now both Tools and Plugin 
will work even if visual studio is installed in a directory different from default!
&lt;/p&gt;
&lt;p&gt;
More importantly the entire &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/CONTRIBUTING.md" target="_blank" &gt;CONTRIBUTING.md&lt;/a&gt; guide has been validated 
and this also proves that &lt;code&gt;SC::Tools&lt;/code&gt; and the GitHub CI have been doing their job just fine!
&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/89a3518"&gt; Plugin: Detect Visual Studio path dynamically&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/978cc4c"&gt; Tools: Update 7-zip to 24.05&lt;/a&gt;&lt;/li&gt;  
&lt;/ul&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;Additional fixes&lt;a href="#section-6" id="section-6" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;


An &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/issues/17" target="_blank"&gt;issue&lt;/a&gt; has been reported when mixing Sane C++ Libraries with C++ Standard Library on Linux and they've been fixed as well.
&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/98e7310"&gt; Foundation: Just include &lt;memory.h&gt; if SC_COMPILER_ENABLE_STD_CPP is defined or exceptions are used&lt;/a&gt;&lt;/li&gt;

And then just a usual bunch of fixes and minor additions.
&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/036c5c4"&gt; Documentation: Update README with latest video&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0f1cd95"&gt; Documentation: Improve commit message format and squashing sections&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/940b780"&gt; Everywhere: Support Visual Studio 2019&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f37c814"&gt; Everywhere: Fix ClangCL build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1d0271c"&gt; FileSystem: Fix Path::relativeFromTo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/fde2d97"&gt; Foundation: Allow passing arbitrary number of arguments to placement new&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f86ce3d"&gt; Strings: Add String::owns&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/75819d5"&gt; Time: Add operator &lt; and &gt; to Milliseconds and HighResolutionCounter::getRelative&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/40341b4"&gt; Tools: Escape path for the .touched file in the NMAKE Windows bootstrap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d30163d"&gt; Tools: Use just commit hash for SC-Package when cloning git repos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d47e439"&gt; Tools: Fix HEAD casing for "git rev-parse" used by SC-Package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d4ce9c3"&gt; Tools: Automatically retry building a tool on make failure&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/section&gt;
&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üí§ Sane C++ April 24</title><link href="https://pagghiu.github.io/site/blog/2024-04-27-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-04-27T00:00:00+02:00</published><updated>2024-04-27T00:00:00+02:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-04-27:/site/blog/2024-04-27-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Here we are with the forth monthly update for Sane C++ Libraries!&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ April 2024&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;Coverage and Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;SC::AsyncLoopWork&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;C bindings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;SC::Process&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;Improvements to the Library&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;
&lt;section&gt;
&lt;h2&gt;SC::AsyncLoopWork&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Executing background work with notification on event loop&lt;/p&gt;
&lt;p&gt;
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;&lt;/code&gt;
has gained the new
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/struct_s_c_1_1_async_loop_work.html#details" target="_blank"&gt;SC::AsyncLoopWork&lt;/a&gt;&lt;/code&gt;
type, that allows executing blocking work in background thread, with an "after work" notification callback
called on the event loop itself.
This second notification callback can be used to update GUI or to safely modify some global state without
needing mutexes.
&lt;code&gt;SC::AsyncLoopWork&lt;/code&gt; is a generalization of the system used to execute file operations on thread
pool, extending it to any arbitrary blocking operation.
&lt;/p&gt;
&lt;p&gt;
The addition of &lt;code&gt;SC::AsyncLoopWork&lt;/code&gt; has been recorded in a video.
&lt;iframe width="560" height="314" src="https://www.youtube-nocookie.com/embed/huavEjzflHQ?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;  
&lt;/p&gt;
&lt;p&gt;
Relevant commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4ab30f5" target="_blank"&gt;Async: Add
AsyncLoopWork to execute
callbacks in background threads on the EventLoop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/c7870cd" target="_blank"&gt;Async: Add atomic
pending flags to
avoid multiple invocations of wakeup in the same loop iteration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bee5228" target="_blank"&gt;Async: Clarify
condition where
getNumberofActiveHandle() can become negative&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/79fdec0" target="_blank"&gt;Async: Refactoring
AsyncTask to embed
ThreadPoolTask&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;
&lt;section&gt;
&lt;h2&gt;Coverage and Documentation&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Automation for GitHub CI&lt;/p&gt;
&lt;p&gt;
GitHub CI scripts are now able to generate test coverage reports and documentation.
In line with the spirit of the project, both features have been added to
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html" target="_blank"&gt;SC::Tools&lt;/a&gt;&lt;/code&gt;,
avoiding any shell scripting or use of other languages.
This means that they've been written in C++, using Sane C++ libraries to execute FileSystem operations, spawn
processes and &lt;code&gt;SC::Package&lt;/code&gt; to download and extract binary dependencies.
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/coverage_badge.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/coverage_badge.png"&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/coverage_report.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/coverage_report.png"&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SC build coverage&lt;/code&gt; generates the coverage report using clang source based coverage (and a SVG
badge).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SC build documentation&lt;/code&gt; generates documentation using doxygen.&lt;/li&gt;
&lt;/ul&gt;
Both actions are executed in sequence in the same CI job and automatically deployed to GitHub pages.
&lt;br&gt;
This means that the entire &lt;a href="https://pagghiu.github.io/SaneCppLibraries" target="_blank"&gt;Documentation Website&lt;/a&gt; 
is now automatically built and deployed on every commit to main!
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/coverage_tasks.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/coverage_tasks.png"&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;
Relevant commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/92660cb" target="_blank"&gt;Tools: Add build
coverage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/b654096" target="_blank"&gt;Tools: Add build
documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ffe3d9b" target="_blank"&gt;Tools: Add build run
to
run default built target&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2652e4c" target="_blank"&gt;Tools: Add the
-nostdlib++ flag to the bootstrap Makefile when
clang is detected&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/7713ea8" target="_blank"&gt;Tools: Fix incorrect
build coverage regex filter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/588ef54" target="_blank"&gt;Tools: Return
errorlevel on Windows building the tool fails&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/a9f21aa" target="_blank"&gt;Tools: Support build
documentation on Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/05854a4" target="_blank"&gt;Tools: Track
dependencies properly also for NMAKE on
windows&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/82be102" target="_blank"&gt;Build: Add support
for
C source files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/e395304" target="_blank"&gt;Build: Enable source
based coverage when under clang&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d070d63" target="_blank"&gt;Build: Generate
coverage badge SVG&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2f66257" target="_blank"&gt;CI: Automatically
build
and deploy documentation and code
coverage report&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/939e5d9" target="_blank"&gt;Coverage: Exclude
some
tests that cannot be run under
XCTest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;C bindings&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;because Sane C++ libraries map to C really well&lt;/p&gt;
&lt;p&gt;
Most Sane C++ Libraries have been designed to nicely map to a clean C-api.&lt;br&gt;
Time has come to start creating some C bindings, starting with the simplest one:
&lt;code&gt;&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_hashing.html"&gt;SC::Hashing&lt;/a&gt;&lt;/code&gt;.&lt;br&gt;
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/group__group__sc__hashing.html#details"
target="_blank"&gt;This
is the result&lt;/a&gt;.&lt;br&gt;
What library do you think should be the next?&lt;br&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/sc_hashing.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/sc_hashing.png"&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
Relevant Commits:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/91ac131" target="_blank"&gt; Bindings: Add C
binding for
SC::Hashing (sc_hashing)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f4f9ffa" target="_blank"&gt; Hashing: Improve
methods naming&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;h2&gt;SC::Process&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;Everyone loves child processes&lt;/p&gt;

&lt;p&gt;
&lt;code&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/library_process.html" target="_blank"&gt;
SC::Process
&lt;/a&gt;&lt;/code&gt; library is getting more complete.&lt;br&gt;
This month it has been gaining ability to:
&lt;ul&gt;
&lt;li&gt;Set child process working directory&lt;/li&gt;
&lt;li&gt;Set child process environment variables&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/sc_process_environment.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/sc_process_environment.png"&gt;
&lt;/a&gt;
&lt;/p&gt;
Both options have been implemented on all supported platforms (windows/macOS/Linux).

&lt;/p&gt;
&lt;p&gt;
Relevant commits:
&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ea5e2c0" target="_blank"&gt;Process: Add
Process::setWorkingDirectory&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4e38dea" target="_blank"&gt;Process: Allow
customizing child processes environment variables&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;Improvements to the Library&lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;

Some fixes and minor additions have been delivered too, improving the entire set of libraries.
&lt;ul&gt;

&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1a2681b" target="_blank"&gt; FileSystem: Fix
copyFile failing when trying to clone across devices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/20dddb7" target="_blank"&gt; FileSystem: Use File
library for file read and write&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/720a90f" target="_blank"&gt; Foundation: Make min
and max arguments and return value references&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f6a4ecf" target="_blank"&gt; Strings: Add some
tests for StringView::fromNullTerminated&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/af1a68c" target="_blank"&gt; Strings: Add
StringView::{splitAfter | trimWhiteSpaces} and StringViewTokenizer::tokenizeNextLine&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/62c7854" target="_blank"&gt; Strings: Add
StringView::splitBefore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/ddb2c27" target="_blank"&gt; Strings: Make
StringViewTokenizer remaining StringView available as a field&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0cf618a" target="_blank"&gt; Testing: Add --quiet
switch and flags to execute sections only if explicitly requested&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;/section&gt;
&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚òîÔ∏è Sane C++ March 24</title><link href="https://pagghiu.github.io/site/blog/2024-03-27-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-03-27T00:00:00+01:00</published><updated>2024-03-27T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-03-27:/site/blog/2024-03-27-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Welcome to the third monthly update for Sane C++ Libraries!&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ March 2024&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;SC::Tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;SC-build.cpp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;SC-package.cpp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3-1"&gt;&gt; Additional Reasons&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3-2"&gt;&gt; Technical Details&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;SC-format.cpp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4-1"&gt;&gt; Improvements to CI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;Sane C++ Improvements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5-1"&gt;&gt; SC::Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5-2"&gt;&gt; SC::Async&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5-3"&gt;&gt; SC::FileSystem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5-4"&gt;&gt; SC::Strings&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;

&lt;section&gt;
&lt;h2&gt;SC::Tools&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;written for Sane C++ Libraries, using Sane C++ Libraries&lt;/p&gt;
&lt;p&gt;
There is no better way to improve a library than using it to create some other project or tool.
&lt;br&gt;
This is why effort has been spent using Sane C++ Libraries to build some useful tools
needed by...Sane C++ Libraries!
&lt;/p&gt;

&lt;p&gt;
So, unsurprisingly, the big addition of the month to Sane C++ Libraries are &lt;a
href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html" target="_blank"&gt;SC::Tools&lt;/a&gt;!
&lt;/p&gt;
&lt;p&gt;

Something similar to &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html"
target="_blank"&gt;SC::Tools&lt;/a&gt; already used to exist in some form:
&lt;code&gt;SCBuild.cpp&lt;/code&gt;, the bootstrap from source C++ file using
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html" target="_blank"&gt;SC::Build&lt;/a&gt;
build system (generator).&lt;br&gt;
It used to work thanks to a bootstrap bash / batch file that compiles &lt;code&gt;SC-Build.cpp&lt;/code&gt; and
the unity build file &lt;code&gt;SC.cpp&lt;/code&gt; to produce the &lt;code&gt;SCBuild[.exe]&lt;/code&gt; self-contained
(statically linked) executable.&lt;br&gt;
This was nice but it had a few issues, for example it was not able to detect
changes in any of the source files and rebuild the executable accordingly.
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_tools.html" target="_blank"&gt;SC::Tools&lt;/a&gt;
is a generalization of the
&lt;code&gt;SCBuild.{sh | bat} &lt;/code&gt; mechanism into a more flexible
&lt;code&gt;SC.sh $TOOL [$ACTION]&lt;/code&gt;.

This allows also running custom tools, leveraging Sane C++ Libraries, by just launching
&lt;code&gt;SC.sh myDirectory/myScript.cpp [$ACTION]&lt;/code&gt;!
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/tool.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/tool.png"&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;
The source code dependency tracking is taken care of by a couple of parametric makefiles.&lt;br&gt;

The intermediate files directory is shared by all tools, and the unity build file
&lt;code&gt;SC.cpp&lt;/code&gt; (#include-d by &lt;code&gt;Tools.cpp&lt;/code&gt; ) makes the entire set of Sane C++
Libraries available to every tool.&lt;br&gt;
It's compiled just once (in a couple of seconds), making any successive compile / linking of
the tools extremely fast (less than 1 sec on a recent laptop).
&lt;/p&gt;
&lt;p&gt;
Tools in the&lt;code&gt;Tools&lt;/code&gt; subdirectory are special, as they can be invoked by just using
their name (without the &lt;code&gt;SC-&lt;/code&gt; prefix).&lt;br&gt;
&lt;code&gt;./SC.sh Tools/SC-build.cpp&lt;/code&gt; can be invoked as just &lt;code&gt;./SC.sh build&lt;/code&gt;.
&lt;/p&gt;
&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;SC-build.cpp&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;building C++ programs in C++, why not?&lt;/p&gt;
The first tool is just called
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Tools/SC-build.cpp" target="_blank"&gt;
SC-build.cpp&lt;/a&gt;.&lt;br&gt; It comes with a companion
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Tools/SC-build.h" target="_blank"&gt;
SC-build.h&lt;/a&gt; file holding code shared between multiple projects.&lt;br&gt;
Its default action (&lt;code&gt;configure&lt;/code&gt;) is equivalent to
the (now old) &lt;code&gt;SCBuild.sh&lt;/code&gt;, that generates build/project files.
&lt;p&gt;
The new action called &lt;code&gt;compile&lt;/code&gt; (guess what?) compiles the
generated projects ü§Ø!
&lt;/p&gt;
&lt;p&gt;
&lt;code&gt;./SC.sh Tools/SC-build.cpp configure&lt;/code&gt;&lt;br&gt;
or&lt;br&gt;
&lt;code&gt;./SC.sh build configure&lt;/code&gt;
&lt;/p&gt;
&lt;p&gt;
and on windows:
&lt;/p&gt;

&lt;p&gt;
&lt;code&gt;SC.bat Tools\SC-build.cpp compile&lt;/code&gt;&lt;br&gt;
or&lt;br&gt;
&lt;code&gt;SC.bat build compile&lt;/code&gt;
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/build.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/build.png"&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;SC-package.cpp&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;wheel reinvention, reinvented&lt;/p&gt;
The second tool is
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Tools/SC-package.cpp" target="_blank"&gt;
SC-package.cpp&lt;/a&gt;, once again a manifestation of the wheel
reinvention attitude already pervading the entire project üòä.
&lt;p&gt;
This poor-man's imperative package manager downloads binary files taking care of checking
MD5, extracting and testing what's contained.&lt;br&gt;
The guiding reason for this tool to exist was to automatically be able downloading and
extracting the official&lt;code&gt;clang&lt;/code&gt; distribution (at a specific version, matching the
Gitlab CI) in order to use &lt;code&gt;clang-format&lt;/code&gt; on the entire repo.&lt;br&gt;
This is needed for a potential contributor to properly format files before sending a Pull
Request, keeping the CI format validation jobs happy.
&lt;/p&gt;

&lt;p&gt;
The end result is a folder with &lt;i&gt;_PackagesCache&lt;/i&gt; and &lt;i&gt;_Packages&lt;/i&gt; under &lt;i&gt;_Build&lt;/i&gt;.
&lt;/p&gt;

&lt;p&gt;
This is still very primitive for now, but who knows, maybe in the future it could be evolved
into something more advanced.
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/packages-results.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/packages-results.png" width="75%"&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;h3&gt;Additional reasons to exist&lt;a href="#section-3-1" id="section-3-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;
&lt;/h3&gt;
&lt;p class="chapter"&gt;other than wheel re-invention&lt;/p&gt;
&lt;p&gt;
Too often &lt;i&gt;repository automation&lt;/i&gt; tools are written in&lt;code&gt;bash&lt;/code&gt; or
&lt;code&gt;batch&lt;/code&gt; where best thing you can do is putting print (echo) statements to debug
them.&lt;br&gt;
Slightly better are the cases when an actual programming language like &lt;code&gt;python&lt;/code&gt;
or &lt;code&gt;javascript&lt;/code&gt; is used, but sometimes this comes with an entire set of problems
regarding their requirements and in general the fact that such tools expect to be installed
globally on developer's system, with probability of incurring into a &lt;i&gt;it works on my machine&lt;/i&gt;
situation.&lt;br&gt; Things like Python &lt;i&gt;.venv&lt;/i&gt; can sometimes help but not always. &lt;br&gt;
In some cases such scripts do not even exist, but you're getting a bunch of &lt;i&gt;install this&lt;/i&gt;
or &lt;i&gt;install that&lt;/i&gt; &lt;code&gt;Readmes&lt;/code&gt; always missing some step and where you end up
wasting a lot of time.&lt;br&gt;
And let's not discuss docker about please, I am trying to stay nice üòÑ.
&lt;/p&gt;

&lt;p&gt;
So my obvious solution has been to write such a tool in C++ using Sane C++ Libraries of
course, so that I can debug it properly just like any other program.&lt;br&gt;
I am really happy the result, the small program is easy to follow and does its job.&lt;br&gt;
For now all data is local to the repository &lt;i&gt;_Build&lt;/i&gt; directory but it would be easy
sharing the &lt;i&gt;_PackagesCache&lt;/i&gt; into some custom user directory to save some space on
multiple checked-out copies of the repository. &lt;br&gt;
For any issue, I can just debug this C++ &lt;i&gt;shell script&lt;/i&gt;, that is just a regular
&lt;i&gt;program&lt;/i&gt;, like all other programs that a C++ programmer debugs &lt;i&gt;every day&lt;/i&gt;.
&lt;/p&gt;

&lt;h3&gt;Technical Details&lt;a href="#section-3-2" id="section-3-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p class="chapter"&gt;if you really want to know...&lt;/p&gt;
&lt;p&gt;
On Posix to get&lt;code&gt;clang+llvm-x.y.z-$ARCH-$PLATFORM&lt;/code&gt; you just download a file from
github, check it MD5, and extract the &lt;code&gt;.tar.gz&lt;/code&gt; file.&lt;br&gt;
&lt;/p&gt;
&lt;p&gt;

On Windows this is even more difficult because the official LLVM binary distribution is some
sort of self-extracting setup (requiring admin privileges too!) and to extract it you need a
tool like &lt;code&gt;7zip&lt;/code&gt;.
&lt;code&gt;7zip&lt;/code&gt; is as well a self extracting installer and requires another tool (called
&lt;code&gt;7zr.exe&lt;/code&gt;) in order to be extracted!.
So on Windows &lt;code&gt;SC-package&lt;/code&gt; downloads &lt;code&gt;7zr.exe&lt;/code&gt; -&gt; extracts the
&lt;code&gt;7zip&lt;/code&gt; installer -&gt; uses the extracted &lt;code&gt;7z.exe&lt;/code&gt; to extract the
&lt;code&gt;LLVM-X.Y.Z-$ARCH&lt;/code&gt; into some directory.
If someone knows an easier way of doing this (without installing other tools or requiring a
package manger) please let me know.
&lt;/p&gt;

&lt;p&gt;
On all platforms / architectures (macOS/Windows/Linux and ARM64/Intel64) MD5 of the
downloaded files it's being checked to make sure they're all legit.
This also helps creating a &lt;i&gt;_PackagesCache&lt;/i&gt; to hold these setup files and avoid
re-downloading them every time.
&lt;/p&gt;

&lt;p&gt;
Also a small &lt;code&gt;clang-format&lt;/code&gt; test is run to make sure it's properly installed and
available.
The extracted directory is symlinked into a &lt;i&gt;_Packages&lt;/i&gt; sub-folder containing package name
/ platform.
&lt;/p&gt;


&lt;p&gt;
Sane C++ Libraries doesn't have (yet) a properly working HTTPS client, so an alternative
solution was necessary.
It looks like nowadays&lt;code&gt;curl&lt;/code&gt; is pre-installed on any
recent &lt;code&gt;macOS&lt;/code&gt;,&lt;code&gt;linux&lt;/code&gt; and&lt;code&gt;windows&lt;/code&gt;
install and so &lt;code&gt;SC-package&lt;/code&gt; uses it.
&lt;/p&gt;


&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_hashing.html" target="_blank"&gt;SC::Hashing&lt;/a&gt;
library has been used to compute all MD5 easily getting the job done.
&lt;br&gt;
File operations and cross-platform path handling have been implemented using the
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_file_system.html" target="_blank"&gt;SC::FileSystem&lt;/a&gt;
library.

&lt;/section&gt;



&lt;section&gt;
&lt;h2&gt;SC-format.cpp&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p class="chapter"&gt;code is poetry, prove me wrong&lt;/p&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Tools/SC-format.cpp" target="_blank"&gt;
SC-format.cpp
&lt;/a&gt;
runs &lt;code&gt;clang-format&lt;/code&gt; on all files of the repository, with some exclusions, to beautify source code.
&lt;p&gt;
It launches many parallel processes but always &lt;i&gt;dynamically limiting&lt;/i&gt; them to the number
of available processors using &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_process.html"
target="_blank"&gt;SC::Process&lt;/a&gt;.
Processes are monitored using the
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;
Library, and as soon as one "slot" is made available, it's being filled with a new &lt;code&gt;clang-format&lt;/code&gt;
process.
&lt;/p&gt;
&lt;p&gt;
Most code has upper bounds and fixed buffers.&lt;br&gt;
Even if it's totally unnecessary for such a small script, it's cool to see how the libraries work
together to allow minimal (or no) heap allocation!&lt;br&gt;
In this example the number of maximum processes is fixed and the recursive file system iteration
happens with a lambda, avoiding storing a vector of all file paths found in the target directory.
&lt;/p&gt;
&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/format-script.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/format-script.png"&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;

The tool looks for &lt;code&gt;clang-format&lt;/code&gt; in known places, depending on platform, and if a
working &lt;code&gt;clang-format&lt;/code&gt; at the correct version is found, it will be used.
This is for example what happens on CI as &lt;code&gt;clang-format&lt;/code&gt; is pre-installed on Github
CI OS
Images.
If the no suitable &lt;code&gt;clang-format&lt;/code&gt; has been found, then
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Tools/SC-format.cpp" target="_blank"&gt;
SC-format.cpp
&lt;/a&gt;
relies on
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Tools/SC-package.cpp" target="_blank"&gt;
SC-package.cpp
&lt;/a&gt;

to
download a brand new set of LLVM binaries from github, extracting and symlinking them.

&lt;/p&gt;
&lt;h3&gt;Improvements to the CI and .vscode files&lt;a href="#section-4-1" id="section-4-1" class="secondary"
tabindex="-1"&gt;#&lt;/a&gt;&lt;/h3&gt;

All these tools are now making the CI scripts and the .VSCode files a lot nicer.
&lt;p&gt;
These are the new simplified CI and VSCode build scripts:
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/ci-linux.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/ci-linux.png" width="48%"&gt;&lt;/a&gt;
&lt;a href="https://pagghiu.github.io/site/blog/ci-windows.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/ci-windows.png" width="48%"&gt;&lt;/a&gt;
&lt;a href="https://pagghiu.github.io/site/blog/ci-macos.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/ci-macos.png" width="48%"&gt;&lt;/a&gt;
&lt;a href="https://pagghiu.github.io/site/blog/vscode-build.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/vscode-build.png" width="48%"&gt;&lt;/a&gt;
&lt;/p&gt;

&lt;/section&gt;


&lt;section&gt;
&lt;h2&gt;Improvements to the Library&lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;

As expected, the act of building this simple set of tools, has uncovered issues, bugs and
limitations in Sane C++ Libraries.&lt;br&gt;
Of course they've been promptly fixed, but this shows, once again, that developing libraries
in a vacuum doesn't generate strong enough code üôÇ.&lt;br&gt;
Hopefully more developers will start using the libraries, reporting issues or providing bug-reports
and maybe even Pull Requests!

&lt;h3&gt;SC::Process&lt;/h3&gt;
The &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_process.html" target="_blank"&gt;SC::Process&lt;/a&gt;
class has been pretty crucial in implementing the tools.
&lt;p&gt;
The original interface was not so easy to use so it got a nice facelift:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f038a44e67e9c72b88182c20cc923698512342b2"
target="_blank"&gt;
Process: Improve the API to be more pleasant to use&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a href="https://pagghiu.github.io/site/blog/new-process-api.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/new-process-api.png"&gt;
&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;
It also got some more features:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/bed597734acf9673427d3d61722854e2743c8b3b"
target="_blank"&gt;
Process: Allow ignoring child process standard output / error&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/32e5fb47ca022078a7a02cf131057342d2df5cfd"
target="_blank"&gt;
Process: Add Process::getNumberOfProcessors
&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;
Improved Tests and Documentation:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/771300ef584c2e26b7ef9992fbececdd66f1362e"
target="_blank"&gt; Process: Cleanup tests and improve documentation
&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;
and bugfixes for very tricky OS-specific issues!
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1145a382cd4cf37a59425478f9c62c23651696cf"
target="_blank"&gt; Process: Fix Posix waitForExitSync failing on non zero exit status&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/eebe13a808fa457fe0a2df4da0b1905f60451993"
target="_blank"&gt; Process: Handle kevent ESRCH errors caused by processes exiting too
fast&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;h3&gt;SC::Build&lt;a href="#section-5-1" id="section-5-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;

As already said the &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html"
target="_blank"&gt;SC::Build&lt;/a&gt; library got the capability of compiling specific configuration
/ architecture combos.
&lt;/p&gt;
&lt;p&gt;
This has been also the occasion to cleanup the intermediates / output folder naming, so that
all folders can coexist in the same working directory.
This is useful to map that very same working directory on all Operating Systems (with a couple
of Virtual Machines), so that code can be quickly tested on all platforms while it's being
developed, before even hitting the CI.
&lt;/p&gt;

&lt;p&gt;
Features:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1f2a8aab363b884bb02432470567d8d7d3fb83bf"
target="_blank"&gt; Build: Support compiling specific configuration / architecture &lt;/a&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/site/blog/build-directories.png" target="_blank"&gt;
&lt;img src="https://pagghiu.github.io/site/blog/build-directories.png" width="50%"&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;h3&gt;SC::Async&lt;a href="#section-5-2" id="section-5-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;
The &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;
library got some fixes in the child process exit handling,
that
was randomly failing on the&lt;code&gt;SC-format&lt;/code&gt; command!
&lt;/p&gt;
&lt;p&gt;
Features:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/996374f9f37542631f3b579e2c34e9327c603df6"
target="_blank"&gt;Async: Remove the handle from active list before calling complete
callback&lt;/a&gt;
&lt;br&gt;
This allows reusing "completed" AsyncRequests in the callback for a new operation!)
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;p&gt;
Bugfixes:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/9d94bb85354d45fc0358230d4d7c231107cbf87e"
target="_blank"&gt;Async: Handle merged &lt;code&gt;SIGCHLD&lt;/code&gt; by signalfd on epoll
backend&lt;/a&gt;
&lt;br&gt;
This was causing spuriously missing child process exit notifications, and it was only
visible on Linux (Intel) with a "high enough" number of concurrent process finishing
"simultaneously".
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;h3&gt;SC::FileSystem&lt;a href="#section-5-3" id="section-5-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_fileSystem.html"
target="_blank"&gt;SC::FileSystem&lt;/a&gt; got some additions needed mainly by
&lt;code&gt;SC-package&lt;/code&gt;
and a bugfix found when developing the tool.
&lt;/p&gt;

&lt;p&gt;
Features:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/1a5955962f718e8096bdfefb9cc238a32c53b76a"
target="_blank"&gt;FileSystem: Add existsAndIsLink, removeLinkIfExists and moveDirectory&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f1c770a035d2038eeaaf42bcc12e85a9d70dacab"
target="_blank"&gt;FileSystem: Add createSymbolicLink&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/0e8137c2afdb2033c6a3c6fd901bf9f6042f2508"
target="_blank"&gt;File: Add read / write uint8_t overloads and make readAppend private&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;p&gt;
Bugfixes:
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f444e3619f691a23b81e30df9f8c2d5dd8a0080d"
target="_blank"&gt;File: Pop null terminator before appending to String with
readUntilEOF&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;h3&gt;SC::Strings&lt;a href="#section-5-4" id="section-5-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h3&gt;

&lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_strings.html" target="_blank"&gt;SC::Strings&lt;/a&gt; got
a series of improvements identified when implementing all
the tools.
&lt;p&gt;
Features:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/f1bec9d5713bf3fc8dff32f6d5e875b025161db9"
target="_blank"&gt;Strings: Add StringView {starts | ends}WithAnyOf and trim{ start | end
}AnyOf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/4efa35baecfc6fdabf9eb06a01e2dff443314455"
target="_blank"&gt;Strings: Allow using&lt;code&gt;SmallString&lt;N&gt;&lt;/code&gt; as argument to
format&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/d563cf064d890447a567dd039791c3e6fe931415"
target="_blank"&gt;Strings: Add casing parameter to StringBuilder::appendHex&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/2098dd80d5fd12f37cdff31cd337bb90ec97c309"
target="_blank"&gt;Strings: Add Windows only UTF16 StringView::fromNullTerminated&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/36db6b61f9db1bcf897a279c4a277c279592855c"
target="_blank"&gt;Strings: Add StringFormatterFor void* pointers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;

Bugfixes:
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/commit/3eef35691023382437f002aeb94c88f4df0d64ef"
target="_blank"&gt;Strings: Fix an UB when copying StringView containing null&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üé† Sane C++ February 24</title><link href="https://pagghiu.github.io/site/blog/2024-02-23-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-02-23T00:00:00+01:00</published><updated>2024-02-23T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-02-23:/site/blog/2024-02-23-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;Two months have passed since the &lt;a href="2023-12-23-SaneCppLibrariesRelease.html"&gt;initial release of Sane C++ Libraries&lt;/a&gt;! üéâüéâüéâ&lt;br&gt; This post collects all relevant events happened during the second month of (public) life of the project.&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ February 2024&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;Github Releases&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;Hacker News&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;Github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;YouTube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;
&lt;section&gt;
&lt;article&gt;
&lt;h2&gt;Code&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
Code is always the most important news!üë®üèª‚Äçüíª&lt;br&gt;
Continuing giving Linux some love!! üêß
&lt;br&gt;
&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt; got an
&lt;code&gt;io_uring&lt;/code&gt; Linux backend!&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;
&lt;code&gt;epoll&lt;/code&gt; backend got simplified &lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt; now
tracks all active requests to mark them as free on a sudden close requests. &lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt; got
all private implementation details hidden under a compiler firewall&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt; can
now use &lt;code&gt;SC::ThreadPool&lt;/code&gt; to run some async ops&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;
&lt;code&gt;AsyncFileRead&lt;/code&gt; / &lt;code&gt;AsyncFileWrite&lt;/code&gt; are now fully async also on buffered files &lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_threading.html"
target="_blank"&gt;SC::ThreadPool&lt;/a&gt; has been added, to allow running tasks in background&lt;br&gt;
‚úÖ Got CI building and running tests on Windows, Linux and macOS (using Github Actions).&lt;br&gt;
‚úÖ The CI also enforces proper formatting through clang-format.&lt;br&gt;
‚úÖ Fixed a few UB and leaks signaled by gcc UBSAN and LSAN on Linux.&lt;br&gt;
‚úÖ Improved documentation for &lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_building_user.html"
target="_blank"&gt;Building as an User&lt;/a&gt; vs
&lt;a href="https://pagghiu.github.io/SaneCppLibraries/page_building_contributor.html"&gt;Building as a
contributor&lt;/a&gt;&lt;br&gt;

&lt;h2&gt;Github Releases&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
I have started creating Github &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/releases"
target="_blank"&gt;releases&lt;/a&gt; tagged with each month. &lt;br&gt;
I'm not planning to do semantic versioning for now, just sticking to &lt;i&gt;year-month&lt;/i&gt; release tagging.
&lt;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/releases/tag/release%2F2024%2F02"
target="_blank"&gt;February 2024
Release&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Pagghiu/SaneCppLibraries/releases/tag/release%2F2024%2F01"
target="_blank"&gt;January 2024
Release&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;h2&gt;Hacker News&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
The Library has been &lt;a href="https://news.ycombinator.com/item?id=39159153"&gt;posted to Hacker News&lt;/a&gt;
bringing some visibility on the project for a few hours.
The discussions / comments are also quite interesting, sparkled by the many opinionated and strong decisions /
principles of the library.&lt;br&gt;
I've tried answering some of the posts, and it has been fun honestly üòÅ.&lt;br&gt;
Some themes:&lt;br&gt;
&lt;ul&gt;
&lt;li&gt;You shouldn't be writing C++ libraries without the standard library / exceptions / smart pointers&lt;/li&gt;
&lt;li&gt;Qt / POCO exists and provides everything you need&lt;/li&gt;
&lt;li&gt;Writing Builds in C++ is not Sane&lt;/li&gt;
&lt;li&gt;You should implement all containers that exists in the STL&lt;/li&gt;
&lt;/ul&gt;
My favorite comment is &lt;a href="https://news.ycombinator.com/item?id=39161028"&gt; this one&lt;/a&gt;:
&lt;figure&gt;
&lt;img src="https://pagghiu.github.io/site/blog/HackerNewsComment.jpg"&gt;
&lt;/figure&gt;
&lt;h2&gt;Github&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
As of today, the Sane C++ Libraries has got 419 ‚≠êÔ∏è stars ‚≠êÔ∏è on &lt;a
href="https://github.com/pagghiu/SaneCppLibraries" target="_blank"&gt;Github&lt;/a&gt;
(&lt;a href="https://github.com/pagghiu/SaneCppLibraries"&gt;&lt;img
src="https://img.shields.io/github/stars/Pagghiu/SaneCppLibraries"&gt;&lt;/a&gt;).&lt;br&gt;
A big jump from the 187 stars of last month!&lt;br&gt;
A big step has been due to the hacker news post, but in the subsequent weeks there has been a steady
and horganic increase, hopefully meaning that more people are finding something interesting in the project.
&lt;/p&gt;

&lt;h2&gt;YouTube &lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
I have been producing 5 videos explaining some of the design decisions around the &lt;a
href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt;
library, the addition of &lt;code&gt;io_uring&lt;/code&gt; to it, the creation of &lt;a
href="https://pagghiu.github.io/SaneCppLibraries/library_threading.html"
target="_blank"&gt;SC::ThreadPool&lt;/a&gt; and how it has been used to do proper Async File I/O also for buffered
files (that always act synchronously under most async APIs, excluding &lt;code&gt;io_uring&lt;/code&gt;...)
&lt;/p&gt;
&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/pIGosb2D2Ro?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/YR935rorb3E?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/CgYE0YrpHt0?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/e48ruImESxI?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/WF9beKyEA_E?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;h2&gt;Next&lt;a href="#section-1" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
So what's next?&lt;br&gt;
I'm not really sure. One thing I would like to experiment with is a &lt;a href="https://github.com/nothings/stb"
target="_blank"&gt;stb style&lt;/a&gt; wrapper for some of the libraries, to make them usable from C.
&lt;br&gt;
Thank you for reading this far!&lt;br&gt;&lt;br&gt;
Bye!üëãüèº&lt;br&gt;
Pagghiu
&lt;/article&gt;

&lt;/section&gt;
&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>‚ùÑÔ∏è Sane C++ January 24</title><link href="https://pagghiu.github.io/site/blog/2024-01-23-SaneCppLibrariesUpdate.html" rel="alternate"></link><published>2024-01-23T00:00:00+01:00</published><updated>2024-01-23T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2024-01-23:/site/blog/2024-01-23-SaneCppLibrariesUpdate.html</id><summary type="html">&lt;p&gt;One month has passed since the initial release of Sane C++ Libraries üéâüéâüéâ&lt;br&gt;This post collects all relevant events happened during the first month of (public) life of the project.&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ February 2024&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;Github Releases&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;Hacker News&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;Github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;YouTube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;
&lt;section&gt;
&lt;article&gt;
&lt;h5&gt;Code&lt;/h5&gt;
Code is always the most important news!üë®üèª‚Äçüíª&lt;br&gt;
This is the month marking official Linux support for all Libraries!! üêß
&lt;br&gt;
&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_async.html" target="_blank"&gt;SC::Async&lt;/a&gt; got an
epoll Linux backend.&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_file_system_watcher.html"
target="_blank"&gt;SC::FileSystemWatcher&lt;/a&gt; got an inotify Linux backend.&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_process.html" target="_blank"&gt;SC::Process&lt;/a&gt;
has been made more solid on Posix in general (including Linux).&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_build.html" target="_blank"&gt;SC::Build&lt;/a&gt; got a
Makefile generator for Linux (and macOS).&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_strings.html"
target="_blank"&gt;SC::StringConverter&lt;/a&gt; got UTF8 to / from UTF16 code path necessary on Linux.&lt;br&gt;
‚úÖ &lt;a href="https://pagghiu.github.io/SaneCppLibraries/library_plugin.html" target="_blank"&gt;SC::Plugin&lt;/a&gt; got
necessary fixes to run on Linux.&lt;br&gt;

&lt;h5&gt;X (Twitter)&lt;/h5&gt;
After the initial announcement I got a very warm social welcome on Twitter!&lt;br&gt;
This has been definitively the best way to start this journey!
&lt;blockquote class="twitter-tweet"&gt;
&lt;p lang="en" dir="ltr"&gt;Sane C++ Libraries has been open-sourced! üéâ&lt;br&gt;&lt;br&gt;‚úÖ Fast compile times&lt;br&gt;‚úÖ Bloat
free&lt;br&gt;‚úÖ Simple readable code&lt;br&gt;‚úÖ Easy to integrate&lt;br&gt;‚õîÔ∏è No C++ Standard Library / Exceptions&lt;br&gt;‚õîÔ∏è No
third party dependencies&lt;a href="https://t.co/D0DUDuAoSG"&gt;https://t.co/D0DUDuAoSG&lt;/a&gt;&lt;br&gt;Blog:&lt;a
href="https://t.co/M8hyEQ9YWE"&gt;https://t.co/M8hyEQ9YWE&lt;/a&gt;&lt;br&gt;&lt;br&gt;Retweet if you like it ‚ù§Ô∏è&lt;/p&gt;&amp;mdash;
Stefano Cristiano (@pagghiu_) &lt;a
href="https://twitter.com/pagghiu_/status/1738349359266197892?ref_src=twsrc%5Etfw"&gt;December 23, 2023&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;h5&gt;Github&lt;/h5&gt;
&lt;p&gt;
As of today, the Sane C++ Libraries has got 187 ‚≠êÔ∏è stars ‚≠êÔ∏è on &lt;a
href="https://github.com/pagghiu/SaneCppLibraries" target="_blank"&gt;Github&lt;/a&gt;
(&lt;a href="https://github.com/pagghiu/SaneCppLibraries"&gt;&lt;img
src="https://img.shields.io/github/stars/Pagghiu/SaneCppLibraries"&gt;&lt;/a&gt;).&lt;br&gt;
The repo has also been in trending list for C++ for a couple of days!!&lt;br&gt;
This has been leaving me both completely mind-blown ü§Ø and super happy about that üòé.&lt;br&gt;
&lt;img src="https://pagghiu.github.io/site/blog/GithubTrending.jpg" alt="Sane C++ on Github Trending" /&gt;
&lt;/p&gt;
&lt;p&gt;
For this reason I immediately went on the seaside to celebrate
(&lt;a href="https://maps.app.goo.gl/53qgxUVyHuKHbuEx8" target="_blank"&gt;in Manfredonia&lt;/a&gt;)!üçπ&lt;br&gt;
&lt;/p&gt;



&lt;figure&gt;
&lt;img src="https://pagghiu.github.io/site/blog/SaneCppCelebration.jpg" width=90%&gt;
&lt;figcaption&gt;Nice sunny south Italy day for being in December ‚ùÑÔ∏è ü•Ç ‚ùÑÔ∏è!&lt;/figcaption&gt;
&lt;/figure&gt;


&lt;h5&gt;Contributing&lt;/h5&gt;
I have been writing some documents to help figuring out how to contribute to the project.
&lt;p&gt;
üìÉ &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/CONTRIBUTING.md"
target="_blank"&gt;CONTRIBUTING.md&lt;/a&gt;&lt;br&gt;
üìÉ &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/blob/main/Documentation/CodingStyle.md"
target="_blank"&gt;Coding Style&lt;/a&gt;
&lt;/p&gt;

I've also starting to create some &lt;a href="https://github.com/Pagghiu/SaneCppLibraries/issues"
target="_blank"&gt;Github Issues&lt;/a&gt; with some &lt;b&gt;good first issue&lt;/b&gt; labels to
help a potential contributor trying to look for some task to start with.

&lt;h5&gt;Discord&lt;/h5&gt;
I have created the &lt;a href="https://discord.gg/tyBfFp33Z6"&gt;Sane Coding Discord&lt;/a&gt;.
&lt;a href="https://discord.gg/tyBfFp33Z6"&gt;&lt;img src="https://img.shields.io/discord/1195076118307426384"&gt;&lt;/a&gt;
&lt;br&gt;
This is a place where to discuss about the library but it's not limited to that.&lt;br&gt;
Let's see if it can become a place of aggregation for anyone sharing similar ideas as shown in the project.

&lt;h5&gt;Youtube &lt;/h5&gt;
&lt;p&gt;
In addition to the &lt;a href="https://www.youtube.com/watch?v=5w1_rRXgyv0&amp;t=1170s"
target="_blank"&gt;presentation youtube video&lt;/a&gt; to introduce the library,
I have been producing 8 additional ones in the &lt;a href="https://www.youtube.com/@Pagghiu"
target="_blank"&gt;Sane Coding Youtube channel&lt;/a&gt;, mostly as an experiment and to document the process of
porting the library to Linux.&lt;br&gt;
I would really like to receive some feedback on the format! üòÖ&lt;br&gt;
So far I'm filming myself talking when trying to implement a feature in a reasonable (kinda) amount of time,
after I've already done research on how
to implement the feature and I have a pretty clear idea of what to do.&lt;br&gt;
As there are no cuts in the videos, it's possible sometimes getting to know my ‚ÅâÔ∏èü§î‚ÅâÔ∏è face when something
doesn't work and I need to debug it.
&lt;/p&gt;
&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/2ccW8TBAWWE?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/wYmT3xAzMxU?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/DUZeu6VDGL8?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/gu3x3Y1zZLI?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/-OiVELMxL6Q?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/4rC4aKCD0V8?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/uCsGpJcF2oc?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/92saVDCRnCI?si=vyQhUZ_vU5Rtn0pi"
title="YouTube video player" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;h5&gt;Next&lt;/h5&gt;
So what's next? I will continue improving the library to make it become solid on all platforms.&lt;br&gt;
When I will identify some interesting developments, I will make sure to record them in a video üëÄ.&lt;br&gt;
&lt;br&gt;
Thank you for reading this far!&lt;br&gt;&lt;br&gt;
Bye!üëãüèº&lt;br&gt;
Pagghiu
&lt;/article&gt;

&lt;/section&gt;
&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry><entry><title>üéâ Sane C++ Libraries</title><link href="https://pagghiu.github.io/site/blog/2023-12-23-SaneCppLibrariesRelease.html" rel="alternate"></link><published>2023-12-23T00:00:00+01:00</published><updated>2023-12-23T00:00:00+01:00</updated><author><name>Stefano Cristiano</name></author><id>tag:pagghiu.github.io,2023-12-23:/site/blog/2023-12-23-SaneCppLibrariesRelease.html</id><summary type="html">&lt;p&gt;Let's go!&lt;/p&gt;</summary><content type="html">&lt;aside id="table-of-contents"&gt;
&lt;nav class="is-sticky-above-lg "&gt;
&lt;details open=""&gt;
&lt;summary&gt;Content&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-0"&gt;Sane C++ Release&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-1"&gt;Where do we start from?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-2"&gt;Other languages and libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-3"&gt;The holy &lt;i&gt;hidden subset&lt;/i&gt; of C++&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-4"&gt;Defining the scope&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-5"&gt;Some rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-6"&gt;Dependencies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-7"&gt;Maturity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-8"&gt;Platforms&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-9"&gt;Licensing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="secondary" href="#section-10"&gt;Conclusions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;/nav&gt;
&lt;/aside&gt;
&lt;div id="content" role="document"&gt;
&lt;section&gt;
&lt;article&gt;
&lt;h2&gt;Where do we even start?&lt;a href="#section-1" id="section-1" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
So...where do I even start? &lt;br&gt;
This is probably just an articulation of my multi-decade old opinion on
&lt;code&gt;How should C++ be written&lt;/code&gt;&amp;trade; that nobody has ever asked for ü§≠.&lt;br&gt;
&lt;iframe width="560" height="315"
src="https://www.youtube-nocookie.com/embed/5w1_rRXgyv0?si=vyQhUZ_vU5Rtn0pi" title="YouTube video player"
frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
allowfullscreen&gt;&lt;/iframe&gt;

&lt;h3&gt;Modern C++ and Standard C++ Library&lt;/h3&gt;
I find Modern C++ style problematic üò©, causing large increases in compile time and binary
size, frequent confusion caused to code completion engines, and micro-heap-allocations habits engraved in
a mountain of hard-to-understand code.&lt;br&gt;
Many of these (and other) problems are not easily avoidable when using the &lt;i&gt;Standard C++ Library&lt;/i&gt;,
making it too easy descending into an endless hole of growing complexity.&lt;br&gt;

&lt;h3&gt;Handmade C&lt;/h3&gt;
On the other side of the spectrum I observe so many &lt;i&gt;proudly handmade&lt;/i&gt; developers sticking to C or
coming up with new languages sharing similar minimalistic spirit.&lt;br&gt;
I'm definitively more spiritually affine to readable and well written C üßòüèª‚Äç‚ôÇÔ∏è, rather than Modern C++.&lt;br&gt;
I often feel however that such libraries are rare (&lt;code&gt;sqlite&lt;/code&gt;, &lt;code&gt;sokol&lt;/code&gt;,
&lt;code&gt;stb&lt;/code&gt;, &lt;code&gt;raylib&lt;/code&gt; etc.) and it takes a lot of discipline and experience to stick
successfully to such clean and coherent style.&lt;br&gt;
&lt;/p&gt;

&lt;h2&gt;Other languages and libraries&lt;a href="#section-2" id="section-2" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
Many programming languages come with a standard library designed to solve common user needs.&lt;br&gt;
That's not the case for C++ though, where any non trivial project will have to integrate
&lt;i&gt;third party libraries&lt;/i&gt; to do anything significant.&lt;br&gt;
Integrating such libraries morphs C++ projects into a patchwork of incoherent programming styles,
as direct derivation of the subset of language features chosen by the authors.&lt;br&gt;
Sometimes these incoherences become actual bad practices producing hard to read and maintain code, bugs,
instabilities, inefficiencies and security issues.&lt;br&gt;
&lt;/p&gt;

&lt;h2&gt;The holy &lt;i&gt;hidden subset&lt;/i&gt; of C++&lt;a href="#section-3" id="section-3" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
This project is a journey of defining and discovering a C++ subset that makes writing code with it enjoyable
üòå.
Libraries should be working harmonically with each other while still making it possible to use them in
isolation or with minimum inter-dependencies.&lt;br&gt;
This holy hidden C++ subset should encourage writing readable programs that are efficient and fast to
compile while still being easy to develop / debug / deploy and reasonably safe on multiple platforms.&lt;br&gt;
The edit / recompile cycle should ideally be closer to the ones of &lt;i&gt;highly productive&lt;/i&gt; languages
like Python and Javascript than the average C++ project / library.
&lt;/p&gt;

&lt;h2&gt;Defining the scope&lt;a href="#section-4" id="section-4" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
So what is the initial scope of the library?
&lt;h3&gt;Basic building blocks&lt;/h3&gt;
The very first basic building blocks are a good API for: async IO / networking, file system and process
handling, serialization, text (with utf support), json and http.
&lt;h3&gt;Data structures and algorithms&lt;/h3&gt;
Data structures and algorithms are for now secondary, but the library comes with a solid
&lt;code&gt;Vector T&lt;/code&gt; implementation with support for custom inline storage
&lt;code&gt;SmallVector T, N&lt;/code&gt;.
Proper arena allocation / release strategies will be explored too.
&lt;h3&gt;User Interfaces&lt;/h3&gt;
User interfaces abstraction are excluded (for now).&lt;br&gt;
Once most of the libraries will be in &lt;i&gt;MVP&lt;/i&gt; or &lt;i&gt;Stable&lt;/i&gt; the topic will be revisited.
&lt;h3&gt;Integrations&lt;/h3&gt;
It's very important showing how to integrate libraries inside such system specific GUI libraries /
toolkits.&lt;br&gt;
For example it could be not obvious how to properly integrate the Async IO event loop inside a GUI event
loop. Providing ready-made examples for such setups is going to be very useful to many users of the libraries.
&lt;h3&gt;Self-hosted build system&lt;/h3&gt;
An optional to use build system, where build files are written in imperative C++ code (compiled on the fly) is
being worked on. The build system links the rest of library compiled as a single unity build.
&lt;/p&gt;

&lt;h2&gt;Some rules&lt;a href="#section-5" id="section-5" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
Some rules used in the project:
&lt;ul&gt;
&lt;li&gt;Libraries will not use C++ standard library at all.&lt;/li&gt;
&lt;li&gt;Libraries will not need a build system to be integrated in existing projects.&lt;/li&gt;
&lt;li&gt;Libraries will not increase build time when integrated into existing projects.&lt;/li&gt;
&lt;li&gt;Libraries will compile free of warnings on all major C++ compilers (Clang, GCC, MSVC).&lt;/li&gt;
&lt;li&gt;Libraries will try to avoid heap allocation and make efforts to let caller handle such memory.&lt;/li&gt;
&lt;li&gt;Libraries will have proper tests and documentation.&lt;/li&gt;
&lt;li&gt;Libraries will focus on common use cases rather than trying to cover every possible use case.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;h2&gt;Dependencies&lt;a href="#section-6" id="section-6" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
General advice is to avoid using 3rd party libraries as much as possible.&lt;br&gt;
&lt;br&gt;
There are some cases where it's simply unreasonable not using any third party library.&lt;br&gt;
Windows and macOS native APIs are being leveraged to avoid needing libraries (a good example is the
&lt;code&gt;Hashing&lt;/code&gt; library).&lt;br&gt;
On Linux however some of these API are not part of the kernel, are typically part of user-space
libraries. Such libraries will need to be installed with &lt;code&gt;apt-get&lt;/code&gt; or delivered by wrapping some
3rd party dependency.&lt;br&gt;&lt;br&gt;

In any case if 3rd party libraries will be used, they will be made optional and properly wrapped in
a way that they will be an hidden implementation detail.&lt;br&gt;
Building the library will still not require a build system and it will still be fast to compile.&lt;br&gt;
No derogation will be made to these principles.
&lt;/p&gt;

&lt;h2&gt;Maturity&lt;a href="#section-7" id="section-7" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
The project is being open-sourced in its very early stages.&lt;br&gt;
Libraries have different level of maturity, stated in the documentations with a brief roadmap.&lt;br&gt;
As of today, when this post is written, they're mostly in &lt;i&gt;Draft&lt;/i&gt; or &lt;i&gt;MVP&lt;/i&gt; state.&lt;br&gt;
No guarantee is being done for API stability too for now.
&lt;/p&gt;

&lt;h2&gt;Platforms&lt;a href="#section-8" id="section-8" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
Initially, the only supported platforms are macOS and Windows.&lt;br&gt;
A partial port to Emscripten / WebAssembly is also being worked on.&lt;br&gt;
Linux support is one explicit bullet point in the roadmap of all libraries that use OS specific API.&lt;br&gt;
Compatibility on iOS will be explored too.&lt;br&gt;
&lt;/p&gt;

&lt;h2&gt;Licensing&lt;a href="#section-9" id="section-9" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
The project is MIT licensed, so it should make things easy for any potential adopter.
&lt;/p&gt;

&lt;h2&gt;Conclusions&lt;a href="#section-10" id="section-10" class="secondary" tabindex="-1"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;
It'll be fun! üòé
&lt;/p&gt;
&lt;/article&gt;

&lt;/section&gt;
&lt;/div&gt;</content><category term="SaneCppLibraries"></category></entry></feed>